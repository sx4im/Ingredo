import{j as e,m as y,T as B,o as M,P as L,a8 as _,v as ee,p as se,F as ae,a7 as te,ac as re,ad as ie,ae as le,af as ne,ag as ce,a1 as de}from"./ui-BzyooJSI.js";import{a as n}from"./vendor-BfRVl83A.js";import{v as N,u as oe,B as c,C as m,b as h}from"./index-9SW5wrSE.js";import{I as b}from"./input-1gfFfBuy.js";import{L as g}from"./label-3IiVbzYS.js";import{B as U}from"./badge-DhJbbhe2.js";import{D as xe,e as me,a as he,b as pe,c as ue}from"./dialog-C3pEOE3v.js";import{S as w,a as C,b as k,d as D,e as o}from"./select-DvlYYxQ6.js";import"./query-CozCGnLG.js";import"./index-D2KtrdjK.js";function De(){const d=N(s=>s.pantryItems),V=N(s=>s.addPantryItem),Q=N(s=>s.updatePantryItem),$=N(s=>s.removePantryItem),{toast:j}=oe(),[I,O]=n.useState(""),[v,W]=n.useState("all"),[S,G]=n.useState("expiry"),[f,H]=n.useState("asc"),[q,E]=n.useState("grid"),[R,p]=n.useState(!1),[u,A]=n.useState(null),[r,l]=n.useState({name:"",quantity:1,unit:"pieces",expiryDate:"",category:"vegetables"}),F=["vegetables","fruits","dairy","meat","grains","spices","beverages","other"],Y=["pieces","kg","g","lbs","oz","liters","ml","cups","tbsp","tsp","cans","packages"],z=n.useMemo(()=>{let s=d.filter(a=>{const t=a.name.toLowerCase().includes(I.toLowerCase()),i=v==="all"||a.category===v;return t&&i});return s.sort((a,t)=>{let i=0;switch(S){case"name":i=a.name.localeCompare(t.name);break;case"expiry":i=new Date(a.expiryDate).getTime()-new Date(t.expiryDate).getTime();break;case"category":i=a.category.localeCompare(t.category);break;case"quantity":i=a.quantity-t.quantity;break}return f==="asc"?i:-i}),s},[d,I,v,S,f]),P=s=>{const a=new Date,i=new Date(s).getTime()-a.getTime(),x=Math.ceil(i/(1e3*60*60*24));return x<0?{status:"expired",color:"destructive",days:x}:x<=1?{status:"expiring",color:"destructive",days:x}:x<=3?{status:"soon",color:"secondary",days:x}:{status:"fresh",color:"default",days:x}},J=()=>{if(!r.name||!r.expiryDate){j({title:"Missing information",description:"Please fill in all required fields.",variant:"destructive"});return}V(r),l({name:"",quantity:1,unit:"pieces",expiryDate:"",category:"vegetables"}),p(!1),j({title:"Item added!",description:`${r.name} has been added to your pantry.`})},K=s=>{A(s),l({name:s.name,quantity:s.quantity,unit:s.unit,expiryDate:s.expiryDate,category:s.category}),p(!0)},X=()=>{!u||!r.name||!r.expiryDate||(Q(u.id,r),A(null),l({name:"",quantity:1,unit:"pieces",expiryDate:"",category:"vegetables"}),p(!1),j({title:"Item updated!",description:`${r.name} has been updated.`}))},Z=(s,a)=>{$(s),j({title:"Item removed",description:`${a} has been removed from your pantry.`})},T=()=>d.filter(s=>{const a=P(s.expiryDate);return a.status==="expiring"||a.status==="expired"}).length;return e.jsx("div",{className:"relative min-h-screen bg-grain bg-background font-sans text-foreground py-12",children:e.jsx("div",{className:"relative z-20 container mx-auto px-6 lg:px-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(y.div,{initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"relative pb-1",children:[e.jsx("h1",{className:"font-serif text-4xl lg:text-5xl font-medium tracking-tight text-foreground mb-4",children:"My Pantry"}),e.jsx("div",{className:"w-12 h-0.5 mb-6",style:{background:"var(--accent-gold)"}}),e.jsx("p",{className:"text-muted-foreground text-lg italic font-serif",children:"Manage your ingredients and track expiry dates"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[T()>0&&e.jsxs(U,{variant:"destructive",className:"px-3 py-1",children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),T()," expiring"]}),e.jsxs(xe,{open:R,onOpenChange:p,children:[e.jsx(me,{asChild:!0,children:e.jsxs(c,{children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add Item"]})}),e.jsxs(he,{className:"sm:max-w-md",children:[e.jsx(pe,{children:e.jsx(ue,{children:u?"Edit Pantry Item":"Add New Item"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"name",children:"Item Name"}),e.jsx(b,{id:"name",value:r.name,onChange:s=>l(a=>({...a,name:s.target.value})),placeholder:"e.g., Tomatoes"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(g,{htmlFor:"quantity",children:"Quantity"}),e.jsx(b,{id:"quantity",type:"number",min:"1",value:r.quantity,onChange:s=>l(a=>({...a,quantity:Number(s.target.value)}))})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"unit",children:"Unit"}),e.jsxs(w,{value:r.unit,onValueChange:s=>l(a=>({...a,unit:s})),children:[e.jsx(C,{children:e.jsx(k,{})}),e.jsx(D,{children:Y.map(s=>e.jsx(o,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"category",children:"Category"}),e.jsxs(w,{value:r.category,onValueChange:s=>l(a=>({...a,category:s})),children:[e.jsx(C,{children:e.jsx(k,{})}),e.jsx(D,{children:F.map(s=>e.jsx(o,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(b,{id:"expiryDate",type:"date",value:r.expiryDate,onChange:s=>l(a=>({...a,expiryDate:s.target.value}))})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(c,{onClick:u?X:J,className:"flex-1 bg-primary hover:bg-primary/90",children:u?"Update Item":"Add Item"}),e.jsx(c,{variant:"outline",onClick:()=>{p(!1),A(null),l({name:"",quantity:1,unit:"pieces",expiryDate:"",category:"vegetables"})},children:"Cancel"})]})]})]})]})]})]})}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx(m,{className:"border-0 shadow-sm transition-colors",style:{background:"var(--bg-deep-olive)"},children:e.jsx(h,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col items-start gap-4",children:[e.jsx(L,{className:"h-5 w-5",style:{color:"var(--accent-gold)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-serif font-medium mb-1",style:{color:"var(--text-on-dark)"},children:d.length}),e.jsx("p",{className:"text-xs uppercase tracking-widest font-bold",style:{color:"var(--text-on-dark-muted)"},children:"Total Items"})]})]})})}),e.jsx(m,{className:"border-0 shadow-sm transition-colors",style:{background:"var(--bg-deep-olive)"},children:e.jsx(h,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col items-start gap-4",children:[e.jsx(B,{className:"h-5 w-5",style:{color:"var(--accent-gold)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-serif font-medium mb-1",style:{color:"var(--text-on-dark)"},children:T()}),e.jsx("p",{className:"text-xs uppercase tracking-widest font-bold",style:{color:"var(--text-on-dark-muted)"},children:"Expiring Soon"})]})]})})}),e.jsx(m,{className:"border-0 shadow-sm transition-colors",style:{background:"var(--bg-deep-olive)"},children:e.jsx(h,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col items-start gap-4",children:[e.jsx(_,{className:"h-5 w-5",style:{color:"var(--accent-gold)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-serif font-medium mb-1",style:{color:"var(--text-on-dark)"},children:new Set(d.map(s=>s.category)).size}),e.jsx("p",{className:"text-xs uppercase tracking-widest font-bold",style:{color:"var(--text-on-dark-muted)"},children:"Categories"})]})]})})}),e.jsx(m,{className:"border-0 shadow-sm transition-colors",style:{background:"var(--bg-deep-olive)"},children:e.jsx(h,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col items-start gap-4",children:[e.jsx(ee,{className:"h-5 w-5",style:{color:"var(--accent-gold)"}}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-serif font-medium mb-1",style:{color:"var(--text-on-dark)"},children:d.filter(s=>P(s.expiryDate).status==="fresh").length}),e.jsx("p",{className:"text-xs uppercase tracking-widest font-bold",style:{color:"var(--text-on-dark-muted)"},children:"Fresh Items"})]})]})})})]}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mb-8",children:e.jsx(m,{children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(b,{placeholder:"Search pantry items...",value:I,onChange:s=>O(s.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4",children:[e.jsxs(w,{value:v,onValueChange:W,children:[e.jsxs(C,{className:"w-full sm:w-40",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),e.jsx(k,{placeholder:"Category"})]}),e.jsxs(D,{children:[e.jsx(o,{value:"all",children:"All Categories"}),F.map(s=>e.jsx(o,{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))]})]}),e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsxs(w,{value:S,onValueChange:G,children:[e.jsx(C,{className:"flex-1 sm:w-32",children:e.jsx(k,{placeholder:"Sort by"})}),e.jsxs(D,{children:[e.jsx(o,{value:"expiry",children:"Expiry Date"}),e.jsx(o,{value:"name",children:"Name"}),e.jsx(o,{value:"category",children:"Category"}),e.jsx(o,{value:"quantity",children:"Quantity"})]})]}),e.jsx(c,{variant:"outline",onClick:()=>H(f==="asc"?"desc":"asc"),className:"px-3",children:f==="asc"?e.jsx(te,{className:"h-4 w-4"}):e.jsx(re,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(c,{variant:q==="grid"?"default":"outline",size:"sm",onClick:()=>E("grid"),className:"px-3",children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx(c,{variant:q==="list"?"default":"outline",size:"sm",onClick:()=>E("list"),className:"px-3",children:e.jsx(le,{className:"h-4 w-4"})})]})]})]})]})})})}),e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:z.length===0?e.jsx(m,{className:"bg-white/95 backdrop-blur-sm",children:e.jsxs(h,{className:"p-12 text-center",children:[e.jsx(L,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 text-center",children:"No items found"}),e.jsx("p",{className:"text-gray-600 mb-6 text-center max-w-md mx-auto",children:d.length===0?"Start building your pantry by adding some ingredients!":"Try adjusting your search or filter criteria."}),d.length===0&&e.jsx("div",{className:"flex justify-center",children:e.jsxs(c,{onClick:()=>p(!0),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Add Your First Item"]})})]})}):e.jsx("div",{className:q==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:e.jsx(ne,{children:z.map((s,a)=>{const t=P(s.expiryDate);return e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:a*.05},children:e.jsx(m,{className:`hover:shadow-lg transition-all duration-300 ${t.status==="expired"?"border-red-200 bg-red-50":t.status==="expiring"?"border-secondary/30 bg-secondary/10":"border-gray-200"}`,children:e.jsxs(h,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:s.category})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>K(s),children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>Z(s.id,s.name),children:e.jsx(de,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Quantity:"}),e.jsxs("span",{className:"font-medium",children:[s.quantity," ",s.unit]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Expires:"}),e.jsx("span",{className:"font-medium",children:new Date(s.expiryDate).toLocaleDateString()})]})]}),e.jsxs(U,{variant:t.color,className:"w-full justify-center",children:[t.status==="expired"&&"Expired",t.status==="expiring"&&"Expiring today",t.status==="soon"&&`Expires in ${t.days} days`,t.status==="fresh"&&"Fresh"]})]})})},s.id)})})})})]})})})}export{De as default};
