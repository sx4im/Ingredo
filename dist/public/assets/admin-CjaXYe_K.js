import{j as e,S as D,u as C,w as B,q as A,a6 as U,a7 as k,T as z,a8 as S}from"./ui-CVZEx6G0.js";import{b as g}from"./query-DB9TWAFE.js";import{a as o,B as h,C as d,n,o as c,b as x}from"./index-DW-P11BM.js";import{B as N}from"./badge-sJBV6tXO.js";import{T as H,a as $,b,c as y}from"./tabs-D2eI-PjQ.js";import{a as m}from"./vendor-BfRVl83A.js";import{S as f}from"./skeleton-C_wLd4fh.js";const v=m.forwardRef(({className:a,...l},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:o("w-full caption-bottom text-sm",a),...l})}));v.displayName="Table";const w=m.forwardRef(({className:a,...l},t)=>e.jsx("thead",{ref:t,className:o("[&_tr]:border-b",a),...l}));w.displayName="TableHeader";const T=m.forwardRef(({className:a,...l},t)=>e.jsx("tbody",{ref:t,className:o("[&_tr:last-child]:border-0",a),...l}));T.displayName="TableBody";const E=m.forwardRef(({className:a,...l},t)=>e.jsx("tfoot",{ref:t,className:o("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...l}));E.displayName="TableFooter";const u=m.forwardRef(({className:a,...l},t)=>e.jsx("tr",{ref:t,className:o("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l}));u.displayName="TableRow";const i=m.forwardRef(({className:a,...l},t)=>e.jsx("th",{ref:t,className:o("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...l}));i.displayName="TableHead";const r=m.forwardRef(({className:a,...l},t)=>e.jsx("td",{ref:t,className:o("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...l}));r.displayName="TableCell";const _=m.forwardRef(({className:a,...l},t)=>e.jsx("caption",{ref:t,className:o("mt-4 text-sm text-muted-foreground",a),...l}));_.displayName="TableCaption";function P(){const{data:a,isLoading:l}=g({queryKey:["/api/admin/stats"]}),{data:t,isLoading:L}=g({queryKey:["/api/admin/users"]}),{data:p,isLoading:R}=g({queryKey:["/api/admin/recipes"]});return l?e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsx(f,{className:"h-8 w-48"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Array.from({length:6}).map((s,j)=>e.jsx(f,{className:"h-32"},j))})]})}):e.jsx("div",{className:"relative min-h-screen bg-grain bg-background font-sans text-foreground py-12",children:e.jsx("div",{className:"container mx-auto px-6 lg:px-12",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"font-serif text-4xl lg:text-5xl font-medium tracking-tight text-foreground",children:"Admin Dashboard"}),e.jsxs(h,{"data-testid":"admin-settings",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Settings"]})]}),a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.users.total.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",a.users.newThisMonth," this month"]})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(B,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.users.active.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Math.round(a.users.active/a.users.total*100),"% of total"]})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"Total Recipes"}),e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.recipes.total.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.recipes.pending," pending approval"]})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"System Uptime"}),e.jsx(U,{className:"h-4 w-4 text-primary"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.system.uptime}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"System running smoothly"})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"API Calls"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.system.apiCalls.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 24 hours"})]})]}),e.jsxs(d,{children:[e.jsxs(n,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium",children:"System Errors"}),e.jsx(z,{className:"h-4 w-4 text-destructive"})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.system.errors}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 24 hours"})]})]})]}),e.jsxs(H,{defaultValue:"users",className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(b,{value:"users","data-testid":"tab-users",children:"Users"}),e.jsx(b,{value:"recipes","data-testid":"tab-recipes",children:"Recipes"}),e.jsx(b,{value:"analytics","data-testid":"tab-analytics",children:"Analytics"})]}),e.jsx(y,{value:"users",className:"space-y-4",children:e.jsxs(d,{children:[e.jsx(n,{children:e.jsx(c,{children:"User Management"})}),e.jsx(x,{children:L?e.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((s,j)=>e.jsx(f,{className:"h-12 w-full"},j))}):t&&t.length>0?e.jsxs(v,{children:[e.jsx(w,{children:e.jsxs(u,{children:[e.jsx(i,{children:"Name"}),e.jsx(i,{children:"Email"}),e.jsx(i,{children:"Role"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Joined"}),e.jsx(i,{children:"Last Active"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(T,{children:t.map(s=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:s.name}),e.jsx(r,{children:s.email}),e.jsx(r,{children:e.jsx(N,{variant:s.role==="admin"?"default":"secondary",children:s.role})}),e.jsx(r,{children:e.jsx(N,{variant:s.status==="active"?"default":s.status==="inactive"?"secondary":"destructive",children:s.status})}),e.jsx(r,{children:new Date(s.joinDate).toLocaleDateString()}),e.jsx(r,{children:new Date(s.lastActive).toLocaleDateString()}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{size:"sm",variant:"outline","data-testid":`edit-user-${s.id}`,children:"Edit"}),s.status==="active"?e.jsx(h,{size:"sm",variant:"destructive","data-testid":`ban-user-${s.id}`,children:"Ban"}):e.jsx(h,{size:"sm",variant:"default","data-testid":`activate-user-${s.id}`,children:"Activate"})]})})]},s.id))})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(C,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No users found"}),e.jsx("p",{className:"text-muted-foreground",children:"Users will appear here once they register."})]})})]})}),e.jsx(y,{value:"recipes",className:"space-y-4",children:e.jsxs(d,{children:[e.jsx(n,{children:e.jsx(c,{children:"Recipe Management"})}),e.jsx(x,{children:R?e.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((s,j)=>e.jsx(f,{className:"h-12 w-full"},j))}):p&&p.length>0?e.jsxs(v,{children:[e.jsx(w,{children:e.jsxs(u,{children:[e.jsx(i,{children:"Title"}),e.jsx(i,{children:"Author"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Created"}),e.jsx(i,{children:"Rating"}),e.jsx(i,{children:"Views"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(T,{children:p.map(s=>e.jsxs(u,{children:[e.jsx(r,{className:"font-medium",children:s.title}),e.jsx(r,{children:s.author}),e.jsx(r,{children:e.jsx(N,{variant:s.status==="published"?"default":s.status==="pending"?"secondary":s.status==="draft"?"outline":"destructive",children:s.status})}),e.jsx(r,{children:new Date(s.createdAt).toLocaleDateString()}),e.jsx(r,{children:s.rating.toFixed(1)}),e.jsx(r,{children:s.views.toLocaleString()}),e.jsx(r,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{size:"sm",variant:"outline","data-testid":`view-recipe-${s.id}`,children:"View"}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(h,{size:"sm",variant:"default","data-testid":`approve-recipe-${s.id}`,children:"Approve"}),e.jsx(h,{size:"sm",variant:"destructive","data-testid":`reject-recipe-${s.id}`,children:"Reject"})]})]})})]},s.id))})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(A,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No recipes found"}),e.jsx("p",{className:"text-muted-foreground",children:"Recipes will appear here once users start creating them."})]})})]})}),e.jsx(y,{value:"analytics",className:"space-y-4",children:e.jsxs(d,{children:[e.jsx(n,{children:e.jsxs(c,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5"}),"Analytics Dashboard"]})}),e.jsx(x,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(S,{className:"mx-auto h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Analytics Coming Soon"}),e.jsx("p",{className:"text-muted-foreground",children:"Detailed analytics and insights will be available here."})]})})]})})]})]})})})}export{P as default};
