import{j as v,g as _o,h as Ci,X as dn,i as No,k as To,l as qr,I as Ao,n as _i,o as Po,p as Xt,G as Io,b as Ro,F as Do,q as jo,B as ko,H as Eo,r as Mo,s as Fo,v as Ni,w as Oo,x as Ti,E as Uo,R as Fs,y as Bo,z as Os,m as Kt}from"./ui-BzyooJSI.js";import{a as R,R as Xe,u as Lo,L as zo}from"./vendor-BfRVl83A.js";import{r as Yt,c as $n,P as Je,a as ke,B as De,u as Ai,C as wt,b as Rt,d as hs,e as Vo,f as bt,g as Pi,h as Tt,i as $o,j as Go,k as Ii,l as Ri,m as Di,R as qo,I as Zo,n as Qo,o as Ho,t as Us}from"./index-9SW5wrSE.js";import{u as Mr,b as Zr}from"./query-CozCGnLG.js";import{B as Ve}from"./badge-DhJbbhe2.js";import{a as Jn}from"./apiClient-BAYgEl2O.js";import{D as Wo,a as Xo,b as Ko,c as Yo,d as Jo}from"./dialog-C3pEOE3v.js";import{I as ji}from"./input-1gfFfBuy.js";import{L as rt}from"./label-3IiVbzYS.js";import{c as ki,S as Qr,a as Hr,b as Wr,d as Xr,e as Et}from"./select-DvlYYxQ6.js";import{u as Ei}from"./index-D2KtrdjK.js";import{S as el}from"./switch-DJZjshct.js";import{T as tl,a as nl,b as Bs}from"./tabs-IClMMtXn.js";import{S as nt}from"./skeleton-C865a2-8.js";function rl(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return R.useMemo(()=>s=>{e.forEach(i=>i(s))},e)}const br=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function fn(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function ms(t){return"nodeType"in t}function et(t){var e,r;return t?fn(t)?t:ms(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function gs(t){const{Document:e}=et(t);return t instanceof e}function Gn(t){return fn(t)?!1:t instanceof et(t).HTMLElement}function Mi(t){return t instanceof et(t).SVGElement}function hn(t){return t?fn(t)?t.document:ms(t)?gs(t)?t:Gn(t)||Mi(t)?t.ownerDocument:document:document:document}const Ct=br?R.useLayoutEffect:R.useEffect;function ps(t){const e=R.useRef(t);return Ct(()=>{e.current=t}),R.useCallback(function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e.current==null?void 0:e.current(...s)},[])}function sl(){const t=R.useRef(null),e=R.useCallback((s,i)=>{t.current=setInterval(s,i)},[]),r=R.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function _n(t,e){e===void 0&&(e=[t]);const r=R.useRef(t);return Ct(()=>{r.current!==t&&(r.current=t)},e),r}function qn(t,e){const r=R.useRef();return R.useMemo(()=>{const s=t(r.current);return r.current=s,s},[...e])}function rr(t){const e=ps(t),r=R.useRef(null),s=R.useCallback(i=>{i!==r.current&&e?.(i,r.current),r.current=i},[]);return[r,s]}function Kr(t){const e=R.useRef();return R.useEffect(()=>{e.current=t},[t]),e.current}let Fr={};function Zn(t,e){return R.useMemo(()=>{if(e)return e;const r=Fr[t]==null?0:Fr[t]+1;return Fr[t]=r,t+"-"+r},[t,e])}function Fi(t){return function(e){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,o)=>{const l=Object.entries(o);for(const[f,h]of l){const c=a[f];c!=null&&(a[f]=c+t*h)}return a},{...e})}}const tn=Fi(1),Nn=Fi(-1);function il(t){return"clientX"in t&&"clientY"in t}function vs(t){if(!t)return!1;const{KeyboardEvent:e}=et(t.target);return e&&t instanceof e}function al(t){if(!t)return!1;const{TouchEvent:e}=et(t.target);return e&&t instanceof e}function Yr(t){if(al(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return il(t)?{x:t.clientX,y:t.clientY}:null}const Tn=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Tn.Translate.toString(t),Tn.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:s}=t;return e+" "+r+"ms "+s}}}),Ls="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ol(t){return t.matches(Ls)?t:t.querySelector(Ls)}const ll={display:"none"};function cl(t){let{id:e,value:r}=t;return Xe.createElement("div",{id:e,style:ll},r)}function ul(t){let{id:e,announcement:r,ariaLiveType:s="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Xe.createElement("div",{id:e,style:i,role:"status","aria-live":s,"aria-atomic":!0},r)}function dl(){const[t,e]=R.useState("");return{announce:R.useCallback(s=>{s!=null&&e(s)},[]),announcement:t}}const Oi=R.createContext(null);function fl(t){const e=R.useContext(Oi);R.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function hl(){const[t]=R.useState(()=>new Set),e=R.useCallback(s=>(t.add(s),()=>t.delete(s)),[t]);return[R.useCallback(s=>{let{type:i,event:a}=s;t.forEach(o=>{var l;return(l=o[i])==null?void 0:l.call(o,a)})},[t]),e]}const ml={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},gl={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function pl(t){let{announcements:e=gl,container:r,hiddenTextDescribedById:s,screenReaderInstructions:i=ml}=t;const{announce:a,announcement:o}=dl(),l=Zn("DndLiveRegion"),[f,h]=R.useState(!1);if(R.useEffect(()=>{h(!0)},[]),fl(R.useMemo(()=>({onDragStart(u){let{active:d}=u;a(e.onDragStart({active:d}))},onDragMove(u){let{active:d,over:p}=u;e.onDragMove&&a(e.onDragMove({active:d,over:p}))},onDragOver(u){let{active:d,over:p}=u;a(e.onDragOver({active:d,over:p}))},onDragEnd(u){let{active:d,over:p}=u;a(e.onDragEnd({active:d,over:p}))},onDragCancel(u){let{active:d,over:p}=u;a(e.onDragCancel({active:d,over:p}))}}),[a,e])),!f)return null;const c=Xe.createElement(Xe.Fragment,null,Xe.createElement(cl,{id:s,value:i.draggable}),Xe.createElement(ul,{id:l,announcement:o}));return r?Yt.createPortal(c,r):c}var je;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(je||(je={}));function sr(){}function zs(t,e){return R.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function vl(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return R.useMemo(()=>[...e].filter(s=>s!=null),[...e])}const gt=Object.freeze({x:0,y:0});function Ui(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Bi(t,e){let{data:{value:r}}=t,{data:{value:s}}=e;return r-s}function yl(t,e){let{data:{value:r}}=t,{data:{value:s}}=e;return s-r}function Vs(t){let{left:e,top:r,height:s,width:i}=t;return[{x:e,y:r},{x:e+i,y:r},{x:e,y:r+s},{x:e+i,y:r+s}]}function Li(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function $s(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const xl=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:s}=t;const i=$s(e,e.left,e.top),a=[];for(const o of s){const{id:l}=o,f=r.get(l);if(f){const h=Ui($s(f),i);a.push({id:l,data:{droppableContainer:o,value:h}})}}return a.sort(Bi)},bl=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:s}=t;const i=Vs(e),a=[];for(const o of s){const{id:l}=o,f=r.get(l);if(f){const h=Vs(f),c=i.reduce((d,p,C)=>d+Ui(h[C],p),0),u=Number((c/4).toFixed(4));a.push({id:l,data:{droppableContainer:o,value:u}})}}return a.sort(Bi)};function wl(t,e){const r=Math.max(e.top,t.top),s=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),o=i-s,l=a-r;if(s<i&&r<a){const f=e.width*e.height,h=t.width*t.height,c=o*l,u=c/(f+h-c);return Number(u.toFixed(4))}return 0}const Sl=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:s}=t;const i=[];for(const a of s){const{id:o}=a,l=r.get(o);if(l){const f=wl(l,e);f>0&&i.push({id:o,data:{droppableContainer:a,value:f}})}}return i.sort(yl)};function Cl(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function zi(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:gt}function _l(t){return function(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...r})}}const Nl=_l(1);function Tl(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Al(t,e,r){const s=Tl(e);if(!s)return t;const{scaleX:i,scaleY:a,x:o,y:l}=s,f=t.left-o-(1-i)*parseFloat(r),h=t.top-l-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),c=i?t.width/i:t.width,u=a?t.height/a:t.height;return{width:c,height:u,top:h,right:f+c,bottom:h+u,left:f}}const Pl={ignoreTransform:!1};function mn(t,e){e===void 0&&(e=Pl);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:c}=et(t).getComputedStyle(t);h&&(r=Al(r,h,c))}const{top:s,left:i,width:a,height:o,bottom:l,right:f}=r;return{top:s,left:i,width:a,height:o,bottom:l,right:f}}function Gs(t){return mn(t,{ignoreTransform:!0})}function Il(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function Rl(t,e){return e===void 0&&(e=et(t).getComputedStyle(t)),e.position==="fixed"}function Dl(t,e){e===void 0&&(e=et(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?r.test(a):!1})}function wr(t,e){const r=[];function s(i){if(e!=null&&r.length>=e||!i)return r;if(gs(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!Gn(i)||Mi(i)||r.includes(i))return r;const a=et(t).getComputedStyle(i);return i!==t&&Dl(i,a)&&r.push(i),Rl(i,a)?r:s(i.parentNode)}return t?s(t):r}function Vi(t){const[e]=wr(t,1);return e??null}function Or(t){return!br||!t?null:fn(t)?t:ms(t)?gs(t)||t===hn(t).scrollingElement?window:Gn(t)?t:null:null}function $i(t){return fn(t)?t.scrollX:t.scrollLeft}function Gi(t){return fn(t)?t.scrollY:t.scrollTop}function Jr(t){return{x:$i(t),y:Gi(t)}}var Oe;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Oe||(Oe={}));function qi(t){return!br||!t?!1:t===document.scrollingElement}function Zi(t){const e={x:0,y:0},r=qi(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},i=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,o=t.scrollTop>=s.y,l=t.scrollLeft>=s.x;return{isTop:i,isLeft:a,isBottom:o,isRight:l,maxScroll:s,minScroll:e}}const jl={x:.2,y:.2};function kl(t,e,r,s,i){let{top:a,left:o,right:l,bottom:f}=r;s===void 0&&(s=10),i===void 0&&(i=jl);const{isTop:h,isBottom:c,isLeft:u,isRight:d}=Zi(t),p={x:0,y:0},C={x:0,y:0},I={height:e.height*i.y,width:e.width*i.x};return!h&&a<=e.top+I.height?(p.y=Oe.Backward,C.y=s*Math.abs((e.top+I.height-a)/I.height)):!c&&f>=e.bottom-I.height&&(p.y=Oe.Forward,C.y=s*Math.abs((e.bottom-I.height-f)/I.height)),!d&&l>=e.right-I.width?(p.x=Oe.Forward,C.x=s*Math.abs((e.right-I.width-l)/I.width)):!u&&o<=e.left+I.width&&(p.x=Oe.Backward,C.x=s*Math.abs((e.left+I.width-o)/I.width)),{direction:p,speed:C}}function El(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:e,left:r,right:s,bottom:i}=t.getBoundingClientRect();return{top:e,left:r,right:s,bottom:i,width:t.clientWidth,height:t.clientHeight}}function Qi(t){return t.reduce((e,r)=>tn(e,Jr(r)),gt)}function Ml(t){return t.reduce((e,r)=>e+$i(r),0)}function Fl(t){return t.reduce((e,r)=>e+Gi(r),0)}function Ol(t,e){if(e===void 0&&(e=mn),!t)return;const{top:r,left:s,bottom:i,right:a}=e(t);Vi(t)&&(i<=0||a<=0||r>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Ul=[["x",["left","right"],Ml],["y",["top","bottom"],Fl]];class ys{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=wr(r),i=Qi(s);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,o,l]of Ul)for(const f of o)Object.defineProperty(this,f,{get:()=>{const h=l(s),c=i[a]-h;return this.rect[f]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class wn{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=e}add(e,r,s){var i;(i=this.target)==null||i.addEventListener(e,r,s),this.listeners.push([e,r,s])}}function Bl(t){const{EventTarget:e}=et(t);return t instanceof e?t:hn(t)}function Ur(t,e){const r=Math.abs(t.x),s=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+s**2)>e:"x"in e&&"y"in e?r>e.x&&s>e.y:"x"in e?r>e.x:"y"in e?s>e.y:!1}var ot;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ot||(ot={}));function qs(t){t.preventDefault()}function Ll(t){t.stopPropagation()}var ie;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(ie||(ie={}));const Hi={start:[ie.Space,ie.Enter],cancel:[ie.Esc],end:[ie.Space,ie.Enter,ie.Tab]},zl=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case ie.Right:return{...r,x:r.x+25};case ie.Left:return{...r,x:r.x-25};case ie.Down:return{...r,y:r.y+25};case ie.Up:return{...r,y:r.y-25}}};class xs{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new wn(hn(r)),this.windowListeners=new wn(et(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ot.Resize,this.handleCancel),this.windowListeners.add(ot.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ot.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,s=e.node.current;s&&Ol(s),r(gt)}handleKeyDown(e){if(vs(e)){const{active:r,context:s,options:i}=this.props,{keyboardCodes:a=Hi,coordinateGetter:o=zl,scrollBehavior:l="smooth"}=i,{code:f}=e;if(a.end.includes(f)){this.handleEnd(e);return}if(a.cancel.includes(f)){this.handleCancel(e);return}const{collisionRect:h}=s.current,c=h?{x:h.left,y:h.top}:gt;this.referenceCoordinates||(this.referenceCoordinates=c);const u=o(e,{active:r,context:s.current,currentCoordinates:c});if(u){const d=Nn(u,c),p={x:0,y:0},{scrollableAncestors:C}=s.current;for(const I of C){const k=e.code,{isTop:P,isRight:D,isLeft:E,isBottom:j,maxScroll:U,minScroll:T}=Zi(I),O=El(I),b={x:Math.min(k===ie.Right?O.right-O.width/2:O.right,Math.max(k===ie.Right?O.left:O.left+O.width/2,u.x)),y:Math.min(k===ie.Down?O.bottom-O.height/2:O.bottom,Math.max(k===ie.Down?O.top:O.top+O.height/2,u.y))},m=k===ie.Right&&!D||k===ie.Left&&!E,x=k===ie.Down&&!j||k===ie.Up&&!P;if(m&&b.x!==u.x){const w=I.scrollLeft+d.x,A=k===ie.Right&&w<=U.x||k===ie.Left&&w>=T.x;if(A&&!d.y){I.scrollTo({left:w,behavior:l});return}A?p.x=I.scrollLeft-w:p.x=k===ie.Right?I.scrollLeft-U.x:I.scrollLeft-T.x,p.x&&I.scrollBy({left:-p.x,behavior:l});break}else if(x&&b.y!==u.y){const w=I.scrollTop+d.y,A=k===ie.Down&&w<=U.y||k===ie.Up&&w>=T.y;if(A&&!d.x){I.scrollTo({top:w,behavior:l});return}A?p.y=I.scrollTop-w:p.y=k===ie.Down?I.scrollTop-U.y:I.scrollTop-T.y,p.y&&I.scrollBy({top:-p.y,behavior:l});break}}this.handleMove(e,tn(Nn(u,this.referenceCoordinates),p))}}}handleMove(e,r){const{onMove:s}=this.props;e.preventDefault(),s(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}xs.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:s=Hi,onActivation:i}=e,{active:a}=r;const{code:o}=t.nativeEvent;if(s.start.includes(o)){const l=a.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i?.({event:t.nativeEvent}),!0)}return!1}}];function Zs(t){return!!(t&&"distance"in t)}function Qs(t){return!!(t&&"delay"in t)}class bs{constructor(e,r,s){var i;s===void 0&&(s=Bl(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:a}=e,{target:o}=a;this.props=e,this.events=r,this.document=hn(o),this.documentListeners=new wn(this.document),this.listeners=new wn(s),this.windowListeners=new wn(et(o)),this.initialCoordinates=(i=Yr(a))!=null?i:gt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ot.Resize,this.handleCancel),this.windowListeners.add(ot.DragStart,qs),this.windowListeners.add(ot.VisibilityChange,this.handleCancel),this.windowListeners.add(ot.ContextMenu,qs),this.documentListeners.add(ot.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Qs(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Zs(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:s,onPending:i}=this.props;i(s,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(ot.Click,Ll,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ot.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:s,initialCoordinates:i,props:a}=this,{onMove:o,options:{activationConstraint:l}}=a;if(!i)return;const f=(r=Yr(e))!=null?r:gt,h=Nn(i,f);if(!s&&l){if(Zs(l)){if(l.tolerance!=null&&Ur(h,l.tolerance))return this.handleCancel();if(Ur(h,l.distance))return this.handleStart()}if(Qs(l)&&Ur(h,l.tolerance))return this.handleCancel();this.handlePending(l,h);return}e.cancelable&&e.preventDefault(),o(f)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===ie.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Vl={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ws extends bs{constructor(e){const{event:r}=e,s=hn(r.target);super(e,Vl,s)}}ws.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:s}=e;return!r.isPrimary||r.button!==0?!1:(s?.({event:r}),!0)}}];const $l={move:{name:"mousemove"},end:{name:"mouseup"}};var es;(function(t){t[t.RightClick=2]="RightClick"})(es||(es={}));class Gl extends bs{constructor(e){super(e,$l,hn(e.event.target))}}Gl.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:s}=e;return r.button===es.RightClick?!1:(s?.({event:r}),!0)}}];const Br={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ql extends bs{constructor(e){super(e,Br)}static setup(){return window.addEventListener(Br.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Br.move.name,e)};function e(){}}}ql.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:s}=e;const{touches:i}=r;return i.length>1?!1:(s?.({event:r}),!0)}}];var Sn;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Sn||(Sn={}));var ir;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(ir||(ir={}));function Zl(t){let{acceleration:e,activator:r=Sn.Pointer,canScroll:s,draggingRect:i,enabled:a,interval:o=5,order:l=ir.TreeOrder,pointerCoordinates:f,scrollableAncestors:h,scrollableAncestorRects:c,delta:u,threshold:d}=t;const p=Hl({delta:u,disabled:!a}),[C,I]=sl(),k=R.useRef({x:0,y:0}),P=R.useRef({x:0,y:0}),D=R.useMemo(()=>{switch(r){case Sn.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case Sn.DraggableRect:return i}},[r,i,f]),E=R.useRef(null),j=R.useCallback(()=>{const T=E.current;if(!T)return;const O=k.current.x*P.current.x,b=k.current.y*P.current.y;T.scrollBy(O,b)},[]),U=R.useMemo(()=>l===ir.TreeOrder?[...h].reverse():h,[l,h]);R.useEffect(()=>{if(!a||!h.length||!D){I();return}for(const T of U){if(s?.(T)===!1)continue;const O=h.indexOf(T),b=c[O];if(!b)continue;const{direction:m,speed:x}=kl(T,b,D,e,d);for(const w of["x","y"])p[w][m[w]]||(x[w]=0,m[w]=0);if(x.x>0||x.y>0){I(),E.current=T,C(j,o),k.current=x,P.current=m;return}}k.current={x:0,y:0},P.current={x:0,y:0},I()},[e,j,s,I,a,o,JSON.stringify(D),JSON.stringify(p),C,h,U,c,JSON.stringify(d)])}const Ql={x:{[Oe.Backward]:!1,[Oe.Forward]:!1},y:{[Oe.Backward]:!1,[Oe.Forward]:!1}};function Hl(t){let{delta:e,disabled:r}=t;const s=Kr(e);return qn(i=>{if(r||!s||!i)return Ql;const a={x:Math.sign(e.x-s.x),y:Math.sign(e.y-s.y)};return{x:{[Oe.Backward]:i.x[Oe.Backward]||a.x===-1,[Oe.Forward]:i.x[Oe.Forward]||a.x===1},y:{[Oe.Backward]:i.y[Oe.Backward]||a.y===-1,[Oe.Forward]:i.y[Oe.Forward]||a.y===1}}},[r,e,s])}function Wl(t,e){const r=e!=null?t.get(e):void 0,s=r?r.node.current:null;return qn(i=>{var a;return e==null?null:(a=s??i)!=null?a:null},[s,e])}function Xl(t,e){return R.useMemo(()=>t.reduce((r,s)=>{const{sensor:i}=s,a=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,s)}));return[...r,...a]},[]),[t,e])}var An;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(An||(An={}));var ts;(function(t){t.Optimized="optimized"})(ts||(ts={}));const Hs=new Map;function Kl(t,e){let{dragging:r,dependencies:s,config:i}=e;const[a,o]=R.useState(null),{frequency:l,measure:f,strategy:h}=i,c=R.useRef(t),u=k(),d=_n(u),p=R.useCallback(function(P){P===void 0&&(P=[]),!d.current&&o(D=>D===null?P:D.concat(P.filter(E=>!D.includes(E))))},[d]),C=R.useRef(null),I=qn(P=>{if(u&&!r)return Hs;if(!P||P===Hs||c.current!==t||a!=null){const D=new Map;for(let E of t){if(!E)continue;if(a&&a.length>0&&!a.includes(E.id)&&E.rect.current){D.set(E.id,E.rect.current);continue}const j=E.node.current,U=j?new ys(f(j),j):null;E.rect.current=U,U&&D.set(E.id,U)}return D}return P},[t,a,r,u,f]);return R.useEffect(()=>{c.current=t},[t]),R.useEffect(()=>{u||p()},[r,u]),R.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),R.useEffect(()=>{u||typeof l!="number"||C.current!==null||(C.current=setTimeout(()=>{p(),C.current=null},l))},[l,u,p,...s]),{droppableRects:I,measureDroppableContainers:p,measuringScheduled:a!=null};function k(){switch(h){case An.Always:return!1;case An.BeforeDragging:return r;default:return!r}}}function Wi(t,e){return qn(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function Yl(t,e){return Wi(t,e)}function Jl(t){let{callback:e,disabled:r}=t;const s=ps(e),i=R.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,r]);return R.useEffect(()=>()=>i?.disconnect(),[i]),i}function Sr(t){let{callback:e,disabled:r}=t;const s=ps(e),i=R.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[r]);return R.useEffect(()=>()=>i?.disconnect(),[i]),i}function ec(t){return new ys(mn(t),t)}function Ws(t,e,r){e===void 0&&(e=ec);const[s,i]=R.useState(null);function a(){i(f=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=f??r)!=null?h:null}const c=e(t);return JSON.stringify(f)===JSON.stringify(c)?f:c})}const o=Jl({callback(f){if(t)for(const h of f){const{type:c,target:u}=h;if(c==="childList"&&u instanceof HTMLElement&&u.contains(t)){a();break}}}}),l=Sr({callback:a});return Ct(()=>{a(),t?(l?.observe(t),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[t]),s}function tc(t){const e=Wi(t);return zi(t,e)}const Xs=[];function nc(t){const e=R.useRef(t),r=qn(s=>t?s&&s!==Xs&&t&&e.current&&t.parentNode===e.current.parentNode?s:wr(t):Xs,[t]);return R.useEffect(()=>{e.current=t},[t]),r}function rc(t){const[e,r]=R.useState(null),s=R.useRef(t),i=R.useCallback(a=>{const o=Or(a.target);o&&r(l=>l?(l.set(o,Jr(o)),new Map(l)):null)},[]);return R.useEffect(()=>{const a=s.current;if(t!==a){o(a);const l=t.map(f=>{const h=Or(f);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,Jr(h)]):null}).filter(f=>f!=null);r(l.length?new Map(l):null),s.current=t}return()=>{o(t),o(a)};function o(l){l.forEach(f=>{const h=Or(f);h?.removeEventListener("scroll",i)})}},[i,t]),R.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,o)=>tn(a,o),gt):Qi(t):gt,[t,e])}function Ks(t,e){e===void 0&&(e=[]);const r=R.useRef(null);return R.useEffect(()=>{r.current=null},e),R.useEffect(()=>{const s=t!==gt;s&&!r.current&&(r.current=t),!s&&r.current&&(r.current=null)},[t]),r.current?Nn(t,r.current):gt}function sc(t){R.useEffect(()=>{if(!br)return;const e=t.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of e)r?.()}},t.map(e=>{let{sensor:r}=e;return r}))}function ic(t,e){return R.useMemo(()=>t.reduce((r,s)=>{let{eventName:i,handler:a}=s;return r[i]=o=>{a(o,e)},r},{}),[t,e])}function Xi(t){return R.useMemo(()=>t?Il(t):null,[t])}const Ys=[];function ac(t,e){e===void 0&&(e=mn);const[r]=t,s=Xi(r?et(r):null),[i,a]=R.useState(Ys);function o(){a(()=>t.length?t.map(f=>qi(f)?s:new ys(e(f),f)):Ys)}const l=Sr({callback:o});return Ct(()=>{l?.disconnect(),o(),t.forEach(f=>l?.observe(f))},[t]),i}function oc(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Gn(e)?e:t}function lc(t){let{measure:e}=t;const[r,s]=R.useState(null),i=R.useCallback(h=>{for(const{target:c}of h)if(Gn(c)){s(u=>{const d=e(c);return u?{...u,width:d.width,height:d.height}:d});break}},[e]),a=Sr({callback:i}),o=R.useCallback(h=>{const c=oc(h);a?.disconnect(),c&&a?.observe(c),s(c?e(c):null)},[e,a]),[l,f]=rr(o);return R.useMemo(()=>({nodeRef:l,rect:r,setRef:f}),[r,l,f])}const cc=[{sensor:ws,options:{}},{sensor:xs,options:{}}],uc={current:{}},er={draggable:{measure:Gs},droppable:{measure:Gs,strategy:An.WhileDragging,frequency:ts.Optimized},dragOverlay:{measure:mn}};class Cn extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,s;return(r=(s=this.get(e))==null?void 0:s.node.current)!=null?r:void 0}}const dc={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Cn,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:sr},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:er,measureDroppableContainers:sr,windowRect:null,measuringScheduled:!1},fc={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:sr,draggableNodes:new Map,over:null,measureDroppableContainers:sr},Cr=R.createContext(fc),Ki=R.createContext(dc);function hc(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Cn}}}function mc(t,e){switch(e.type){case je.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case je.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case je.DragEnd:case je.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case je.RegisterDroppable:{const{element:r}=e,{id:s}=r,i=new Cn(t.droppable.containers);return i.set(s,r),{...t,droppable:{...t.droppable,containers:i}}}case je.SetDroppableDisabled:{const{id:r,key:s,disabled:i}=e,a=t.droppable.containers.get(r);if(!a||s!==a.key)return t;const o=new Cn(t.droppable.containers);return o.set(r,{...a,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case je.UnregisterDroppable:{const{id:r,key:s}=e,i=t.droppable.containers.get(r);if(!i||s!==i.key)return t;const a=new Cn(t.droppable.containers);return a.delete(r),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function gc(t){let{disabled:e}=t;const{active:r,activatorEvent:s,draggableNodes:i}=R.useContext(Cr),a=Kr(s),o=Kr(r?.id);return R.useEffect(()=>{if(!e&&!s&&a&&o!=null){if(!vs(a)||document.activeElement===a.target)return;const l=i.get(o);if(!l)return;const{activatorNode:f,node:h}=l;if(!f.current&&!h.current)return;requestAnimationFrame(()=>{for(const c of[f.current,h.current]){if(!c)continue;const u=ol(c);if(u){u.focus();break}}})}},[s,e,i,o,a]),null}function pc(t,e){let{transform:r,...s}=e;return t!=null&&t.length?t.reduce((i,a)=>a({transform:i,...s}),r):r}function vc(t){return R.useMemo(()=>({draggable:{...er.draggable,...t?.draggable},droppable:{...er.droppable,...t?.droppable},dragOverlay:{...er.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function yc(t){let{activeNode:e,measure:r,initialRect:s,config:i=!0}=t;const a=R.useRef(!1),{x:o,y:l}=typeof i=="boolean"?{x:i,y:i}:i;Ct(()=>{if(!o&&!l||!e){a.current=!1;return}if(a.current||!s)return;const h=e?.node.current;if(!h||h.isConnected===!1)return;const c=r(h),u=zi(c,s);if(o||(u.x=0),l||(u.y=0),a.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const d=Vi(h);d&&d.scrollBy({top:u.y,left:u.x})}},[e,o,l,s,r])}const Yi=R.createContext({...gt,scaleX:1,scaleY:1});var Mt;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Mt||(Mt={}));const xc=R.memo(function(e){var r,s,i,a;let{id:o,accessibility:l,autoScroll:f=!0,children:h,sensors:c=cc,collisionDetection:u=Sl,measuring:d,modifiers:p,...C}=e;const I=R.useReducer(mc,void 0,hc),[k,P]=I,[D,E]=hl(),[j,U]=R.useState(Mt.Uninitialized),T=j===Mt.Initialized,{draggable:{active:O,nodes:b,translate:m},droppable:{containers:x}}=k,w=O!=null?b.get(O):null,A=R.useRef({initial:null,translated:null}),S=R.useMemo(()=>{var pe;return O!=null?{id:O,data:(pe=w?.data)!=null?pe:uc,rect:A}:null},[O,w]),N=R.useRef(null),[_,g]=R.useState(null),[y,M]=R.useState(null),F=_n(C,Object.values(C)),B=Zn("DndDescribedBy",o),Q=R.useMemo(()=>x.getEnabled(),[x]),$=vc(d),{droppableRects:q,measureDroppableContainers:z,measuringScheduled:L}=Kl(Q,{dragging:T,dependencies:[m.x,m.y],config:$.droppable}),X=Wl(b,O),ce=R.useMemo(()=>y?Yr(y):null,[y]),se=kr(),ne=Yl(X,$.draggable.measure);yc({activeNode:O!=null?b.get(O):null,config:se.layoutShiftCompensation,initialRect:ne,measure:$.draggable.measure});const K=Ws(X,$.draggable.measure,ne),he=Ws(X?X.parentElement:null),le=R.useRef({activatorEvent:null,active:null,activeNode:X,collisionRect:null,collisions:null,droppableRects:q,draggableNodes:b,draggingNode:null,draggingNodeRect:null,droppableContainers:x,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),He=x.getNodeFor((r=le.current.over)==null?void 0:r.id),Pe=lc({measure:$.dragOverlay.measure}),ue=(s=Pe.nodeRef.current)!=null?s:X,ye=T?(i=Pe.rect)!=null?i:K:null,me=!!(Pe.nodeRef.current&&Pe.rect),de=tc(me?null:K),Ne=Xi(ue?et(ue):null),ve=nc(T?He??X:null),ge=ac(ve),Ee=pc(p,{transform:{x:m.x-de.x,y:m.y-de.y,scaleX:1,scaleY:1},activatorEvent:y,active:S,activeNodeRect:K,containerNodeRect:he,draggingNodeRect:ye,over:le.current.over,overlayNodeRect:Pe.rect,scrollableAncestors:ve,scrollableAncestorRects:ge,windowRect:Ne}),xe=ce?tn(ce,m):null,fe=rc(ve),Ge=Ks(fe),vt=Ks(fe,[K]),lt=tn(Ee,Ge),be=ye?Nl(ye,Ee):null,tt=S&&be?u({active:S,collisionRect:be,droppableRects:q,droppableContainers:Q,pointerCoordinates:xe}):null,Me=Li(tt,"id"),[Ie,qe]=R.useState(null),ct=me?Ee:tn(Ee,vt),at=Cl(ct,(a=Ie?.rect)!=null?a:null,K),ut=R.useRef(null),Zt=R.useCallback((pe,Ce)=>{let{sensor:Re,options:We}=Ce;if(N.current==null)return;const Ze=b.get(N.current);if(!Ze)return;const Te=pe.nativeEvent,Fe=new Re({active:N.current,activeNode:Ze,event:Te,options:We,context:le,onAbort(Be){if(!b.get(Be))return;const{onDragAbort:yt}=F.current,At={id:Be};yt?.(At),D({type:"onDragAbort",event:At})},onPending(Be,jt,yt,At){if(!b.get(Be))return;const{onDragPending:vn}=F.current,kt={id:Be,constraint:jt,initialCoordinates:yt,offset:At};vn?.(kt),D({type:"onDragPending",event:kt})},onStart(Be){const jt=N.current;if(jt==null)return;const yt=b.get(jt);if(!yt)return;const{onDragStart:At}=F.current,pn={activatorEvent:Te,active:{id:jt,data:yt.data,rect:A}};Yt.unstable_batchedUpdates(()=>{At?.(pn),U(Mt.Initializing),P({type:je.DragStart,initialCoordinates:Be,active:jt}),D({type:"onDragStart",event:pn}),g(ut.current),M(Te)})},onMove(Be){P({type:je.DragMove,coordinates:Be})},onEnd:Ht(je.DragEnd),onCancel:Ht(je.DragCancel)});ut.current=Fe;function Ht(Be){return async function(){const{active:yt,collisions:At,over:pn,scrollAdjustedTranslate:vn}=le.current;let kt=null;if(yt&&vn){const{cancelDrop:yn}=F.current;kt={activatorEvent:Te,active:yt,collisions:At,delta:vn,over:pn},Be===je.DragEnd&&typeof yn=="function"&&await Promise.resolve(yn(kt))&&(Be=je.DragCancel)}N.current=null,Yt.unstable_batchedUpdates(()=>{P({type:Be}),U(Mt.Uninitialized),qe(null),g(null),M(null),ut.current=null;const yn=Be===je.DragEnd?"onDragEnd":"onDragCancel";if(kt){const Er=F.current[yn];Er?.(kt),D({type:yn,event:kt})}})}}},[b]),jr=R.useCallback((pe,Ce)=>(Re,We)=>{const Ze=Re.nativeEvent,Te=b.get(We);if(N.current!==null||!Te||Ze.dndKit||Ze.defaultPrevented)return;const Fe={active:Te};pe(Re,Ce.options,Fe)===!0&&(Ze.dndKit={capturedBy:Ce.sensor},N.current=We,Zt(Re,Ce))},[b,Zt]),Qt=Xl(c,jr);sc(c),Ct(()=>{K&&j===Mt.Initializing&&U(Mt.Initialized)},[K,j]),R.useEffect(()=>{const{onDragMove:pe}=F.current,{active:Ce,activatorEvent:Re,collisions:We,over:Ze}=le.current;if(!Ce||!Re)return;const Te={active:Ce,activatorEvent:Re,collisions:We,delta:{x:lt.x,y:lt.y},over:Ze};Yt.unstable_batchedUpdates(()=>{pe?.(Te),D({type:"onDragMove",event:Te})})},[lt.x,lt.y]),R.useEffect(()=>{const{active:pe,activatorEvent:Ce,collisions:Re,droppableContainers:We,scrollAdjustedTranslate:Ze}=le.current;if(!pe||N.current==null||!Ce||!Ze)return;const{onDragOver:Te}=F.current,Fe=We.get(Me),Ht=Fe&&Fe.rect.current?{id:Fe.id,rect:Fe.rect.current,data:Fe.data,disabled:Fe.disabled}:null,Be={active:pe,activatorEvent:Ce,collisions:Re,delta:{x:Ze.x,y:Ze.y},over:Ht};Yt.unstable_batchedUpdates(()=>{qe(Ht),Te?.(Be),D({type:"onDragOver",event:Be})})},[Me]),Ct(()=>{le.current={activatorEvent:y,active:S,activeNode:X,collisionRect:be,collisions:tt,droppableRects:q,draggableNodes:b,draggingNode:ue,draggingNodeRect:ye,droppableContainers:x,over:Ie,scrollableAncestors:ve,scrollAdjustedTranslate:lt},A.current={initial:ye,translated:be}},[S,X,tt,be,b,ue,ye,q,x,Ie,ve,lt]),Zl({...se,delta:m,draggingRect:be,pointerCoordinates:xe,scrollableAncestors:ve,scrollableAncestorRects:ge});const Wn=R.useMemo(()=>({active:S,activeNode:X,activeNodeRect:K,activatorEvent:y,collisions:tt,containerNodeRect:he,dragOverlay:Pe,draggableNodes:b,droppableContainers:x,droppableRects:q,over:Ie,measureDroppableContainers:z,scrollableAncestors:ve,scrollableAncestorRects:ge,measuringConfiguration:$,measuringScheduled:L,windowRect:Ne}),[S,X,K,y,tt,he,Pe,b,x,q,Ie,z,ve,ge,$,L,Ne]),Lt=R.useMemo(()=>({activatorEvent:y,activators:Qt,active:S,activeNodeRect:K,ariaDescribedById:{draggable:B},dispatch:P,draggableNodes:b,over:Ie,measureDroppableContainers:z}),[y,Qt,S,K,P,B,b,Ie,z]);return Xe.createElement(Oi.Provider,{value:E},Xe.createElement(Cr.Provider,{value:Lt},Xe.createElement(Ki.Provider,{value:Wn},Xe.createElement(Yi.Provider,{value:at},h)),Xe.createElement(gc,{disabled:l?.restoreFocus===!1})),Xe.createElement(pl,{...l,hiddenTextDescribedById:B}));function kr(){const pe=_?.autoScrollEnabled===!1,Ce=typeof f=="object"?f.enabled===!1:f===!1,Re=T&&!pe&&!Ce;return typeof f=="object"?{...f,enabled:Re}:{enabled:Re}}}),bc=R.createContext(null),Js="button",wc="Draggable";function Sc(t){let{id:e,data:r,disabled:s=!1,attributes:i}=t;const a=Zn(wc),{activators:o,activatorEvent:l,active:f,activeNodeRect:h,ariaDescribedById:c,draggableNodes:u,over:d}=R.useContext(Cr),{role:p=Js,roleDescription:C="draggable",tabIndex:I=0}=i??{},k=f?.id===e,P=R.useContext(k?Yi:bc),[D,E]=rr(),[j,U]=rr(),T=ic(o,e),O=_n(r);Ct(()=>(u.set(e,{id:e,key:a,node:D,activatorNode:j,data:O}),()=>{const m=u.get(e);m&&m.key===a&&u.delete(e)}),[u,e]);const b=R.useMemo(()=>({role:p,tabIndex:I,"aria-disabled":s,"aria-pressed":k&&p===Js?!0:void 0,"aria-roledescription":C,"aria-describedby":c.draggable}),[s,p,I,k,C,c.draggable]);return{active:f,activatorEvent:l,activeNodeRect:h,attributes:b,isDragging:k,listeners:s?void 0:T,node:D,over:d,setNodeRef:E,setActivatorNodeRef:U,transform:P}}function Cc(){return R.useContext(Ki)}const _c="Droppable",Nc={timeout:25};function Tc(t){let{data:e,disabled:r=!1,id:s,resizeObserverConfig:i}=t;const a=Zn(_c),{active:o,dispatch:l,over:f,measureDroppableContainers:h}=R.useContext(Cr),c=R.useRef({disabled:r}),u=R.useRef(!1),d=R.useRef(null),p=R.useRef(null),{disabled:C,updateMeasurementsFor:I,timeout:k}={...Nc,...i},P=_n(I??s),D=R.useCallback(()=>{if(!u.current){u.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{h(Array.isArray(P.current)?P.current:[P.current]),p.current=null},k)},[k]),E=Sr({callback:D,disabled:C||!o}),j=R.useCallback((b,m)=>{E&&(m&&(E.unobserve(m),u.current=!1),b&&E.observe(b))},[E]),[U,T]=rr(j),O=_n(e);return R.useEffect(()=>{!E||!U.current||(E.disconnect(),u.current=!1,E.observe(U.current))},[U,E]),R.useEffect(()=>(l({type:je.RegisterDroppable,element:{id:s,key:a,disabled:r,node:U,rect:d,data:O}}),()=>l({type:je.UnregisterDroppable,key:a,id:s})),[s]),R.useEffect(()=>{r!==c.current.disabled&&(l({type:je.SetDroppableDisabled,id:s,key:a,disabled:r}),c.current.disabled=r)},[s,a,r,l]),{active:o,rect:d,isOver:f?.id===s,node:U,over:f,setNodeRef:T}}function Ss(t,e,r){const s=t.slice();return s.splice(r<0?s.length+r:r,0,s.splice(e,1)[0]),s}function Ac(t,e){return t.reduce((r,s,i)=>{const a=e.get(s);return a&&(r[i]=a),r},Array(t.length))}function Xn(t){return t!==null&&t>=0}function Pc(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Ic(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Kn={scaleX:1,scaleY:1},Rc=t=>{var e;let{rects:r,activeNodeRect:s,activeIndex:i,overIndex:a,index:o}=t;const l=(e=r[i])!=null?e:s;if(!l)return null;const f=Dc(r,o,i);if(o===i){const h=r[a];return h?{x:i<a?h.left+h.width-(l.left+l.width):h.left-l.left,y:0,...Kn}:null}return o>i&&o<=a?{x:-l.width-f,y:0,...Kn}:o<i&&o>=a?{x:l.width+f,y:0,...Kn}:{x:0,y:0,...Kn}};function Dc(t,e,r){const s=t[e],i=t[e-1],a=t[e+1];return!s||!i&&!a?0:r<e?i?s.left-(i.left+i.width):a.left-(s.left+s.width):a?a.left-(s.left+s.width):s.left-(i.left+i.width)}const Ji=t=>{let{rects:e,activeIndex:r,overIndex:s,index:i}=t;const a=Ss(e,s,r),o=e[i],l=a[i];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},ea="Sortable",ta=Xe.createContext({activeIndex:-1,containerId:ea,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ji,disabled:{draggable:!1,droppable:!1}});function jc(t){let{children:e,id:r,items:s,strategy:i=Ji,disabled:a=!1}=t;const{active:o,dragOverlay:l,droppableRects:f,over:h,measureDroppableContainers:c}=Cc(),u=Zn(ea,r),d=l.rect!==null,p=R.useMemo(()=>s.map(T=>typeof T=="object"&&"id"in T?T.id:T),[s]),C=o!=null,I=o?p.indexOf(o.id):-1,k=h?p.indexOf(h.id):-1,P=R.useRef(p),D=!Pc(p,P.current),E=k!==-1&&I===-1||D,j=Ic(a);Ct(()=>{D&&C&&c(p)},[D,p,C,c]),R.useEffect(()=>{P.current=p},[p]);const U=R.useMemo(()=>({activeIndex:I,containerId:u,disabled:j,disableTransforms:E,items:p,overIndex:k,useDragOverlay:d,sortedRects:Ac(p,f),strategy:i}),[I,u,j.draggable,j.droppable,E,p,k,f,d,i]);return Xe.createElement(ta.Provider,{value:U},e)}const kc=t=>{let{id:e,items:r,activeIndex:s,overIndex:i}=t;return Ss(r,s,i).indexOf(e)},Ec=t=>{let{containerId:e,isSorting:r,wasDragging:s,index:i,items:a,newIndex:o,previousItems:l,previousContainerId:f,transition:h}=t;return!h||!s||l!==a&&i===o?!1:r?!0:o!==i&&e===f},Mc={duration:200,easing:"ease"},na="transform",Fc=Tn.Transition.toString({property:na,duration:0,easing:"linear"}),Oc={roleDescription:"sortable"};function Uc(t){let{disabled:e,index:r,node:s,rect:i}=t;const[a,o]=R.useState(null),l=R.useRef(r);return Ct(()=>{if(!e&&r!==l.current&&s.current){const f=i.current;if(f){const h=mn(s.current,{ignoreTransform:!0}),c={x:f.left-h.left,y:f.top-h.top,scaleX:f.width/h.width,scaleY:f.height/h.height};(c.x||c.y)&&o(c)}}r!==l.current&&(l.current=r)},[e,r,s,i]),R.useEffect(()=>{a&&o(null)},[a]),a}function Bc(t){let{animateLayoutChanges:e=Ec,attributes:r,disabled:s,data:i,getNewIndex:a=kc,id:o,strategy:l,resizeObserverConfig:f,transition:h=Mc}=t;const{items:c,containerId:u,activeIndex:d,disabled:p,disableTransforms:C,sortedRects:I,overIndex:k,useDragOverlay:P,strategy:D}=R.useContext(ta),E=Lc(s,p),j=c.indexOf(o),U=R.useMemo(()=>({sortable:{containerId:u,index:j,items:c},...i}),[u,i,j,c]),T=R.useMemo(()=>c.slice(c.indexOf(o)),[c,o]),{rect:O,node:b,isOver:m,setNodeRef:x}=Tc({id:o,data:U,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...f}}),{active:w,activatorEvent:A,activeNodeRect:S,attributes:N,setNodeRef:_,listeners:g,isDragging:y,over:M,setActivatorNodeRef:F,transform:B}=Sc({id:o,data:U,attributes:{...Oc,...r},disabled:E.draggable}),Q=rl(x,_),$=!!w,q=$&&!C&&Xn(d)&&Xn(k),z=!P&&y,L=z&&q?B:null,ce=q?L??(l??D)({rects:I,activeNodeRect:S,activeIndex:d,overIndex:k,index:j}):null,se=Xn(d)&&Xn(k)?a({id:o,items:c,activeIndex:d,overIndex:k}):j,ne=w?.id,K=R.useRef({activeId:ne,items:c,newIndex:se,containerId:u}),he=c!==K.current.items,le=e({active:w,containerId:u,isDragging:y,isSorting:$,id:o,index:j,items:c,newIndex:K.current.newIndex,previousItems:K.current.items,previousContainerId:K.current.containerId,transition:h,wasDragging:K.current.activeId!=null}),He=Uc({disabled:!le,index:j,node:b,rect:O});return R.useEffect(()=>{$&&K.current.newIndex!==se&&(K.current.newIndex=se),u!==K.current.containerId&&(K.current.containerId=u),c!==K.current.items&&(K.current.items=c)},[$,se,u,c]),R.useEffect(()=>{if(ne===K.current.activeId)return;if(ne!=null&&K.current.activeId==null){K.current.activeId=ne;return}const ue=setTimeout(()=>{K.current.activeId=ne},50);return()=>clearTimeout(ue)},[ne]),{active:w,activeIndex:d,attributes:N,data:U,rect:O,index:j,newIndex:se,items:c,isOver:m,isSorting:$,isDragging:y,listeners:g,node:b,overIndex:k,over:M,setNodeRef:Q,setActivatorNodeRef:F,setDroppableNodeRef:x,setDraggableNodeRef:_,transform:He??ce,transition:Pe()};function Pe(){if(He||he&&K.current.newIndex===j)return Fc;if(!(z&&!vs(A)||!h)&&($||le))return Tn.Transition.toString({...h,property:na})}}function Lc(t,e){var r,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t?.draggable)!=null?r:e.draggable,droppable:(s=t?.droppable)!=null?s:e.droppable}}function ar(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const zc=[ie.Down,ie.Right,ie.Up,ie.Left],Vc=(t,e)=>{let{context:{active:r,collisionRect:s,droppableRects:i,droppableContainers:a,over:o,scrollableAncestors:l}}=e;if(zc.includes(t.code)){if(t.preventDefault(),!r||!s)return;const f=[];a.getEnabled().forEach(u=>{if(!u||u!=null&&u.disabled)return;const d=i.get(u.id);if(d)switch(t.code){case ie.Down:s.top<d.top&&f.push(u);break;case ie.Up:s.top>d.top&&f.push(u);break;case ie.Left:s.left>d.left&&f.push(u);break;case ie.Right:s.left<d.left&&f.push(u);break}});const h=bl({collisionRect:s,droppableRects:i,droppableContainers:f});let c=Li(h,"id");if(c===o?.id&&h.length>1&&(c=h[1].id),c!=null){const u=a.get(r.id),d=a.get(c),p=d?i.get(d.id):null,C=d?.node.current;if(C&&p&&u&&d){const k=wr(C).some((T,O)=>l[O]!==T),P=ra(u,d),D=$c(u,d),E=k||!P?{x:0,y:0}:{x:D?s.width-p.width:0,y:D?s.height-p.height:0},j={x:p.left,y:p.top};return E.x&&E.y?j:Nn(j,E)}}}};function ra(t,e){return!ar(t)||!ar(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function $c(t,e){return!ar(t)||!ar(e)||!ra(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}function Gc(t,e){return e.forEach((function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach((function(s){if(s!=="default"&&!(s in t)){var i=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return r[s]}})}}))})),Object.freeze(t)}function sa(t,e){return new Promise((function(r,s){let i;return qc(t).then((function(a){try{return i=a,r(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return s(o)}}),s)}))}const qc=t=>new Promise(((e,r)=>{const s=new FileReader;s.addEventListener("load",(({target:{result:i}})=>{const a=new DataView(i);let o=0;if(a.getUint16(o)!==65496)return r("not a valid JPEG");for(o+=2;;){const l=a.getUint16(o);if(l===65498)break;const f=a.getUint16(o+2);if(l===65505&&a.getUint32(o+4)===1165519206){const h=o+10;let c;switch(a.getUint16(h)){case 18761:c=!0;break;case 19789:c=!1;break;default:return r("TIFF header contains invalid endian")}if(a.getUint16(h+2,c)!==42)return r("TIFF header contains invalid version");const u=a.getUint32(h+4,c),d=h+u+2+12*a.getUint16(h+u,c);for(let p=h+u+2;p<d;p+=12)if(a.getUint16(p,c)==274){if(a.getUint16(p+2,c)!==3)return r("Orientation data type is invalid");if(a.getUint32(p+4,c)!==1)return r("Orientation data count is invalid");a.setUint16(p+8,1,c);break}return e(i.slice(o,o+2+f))}o+=2+f}return e(new Blob)})),s.readAsArrayBuffer(t)}));var or={},Zc={get exports(){return or},set exports(t){or=t}};(function(t){var e,r,s={};Zc.exports=s,s.parse=function(i,a){for(var o=s.bin.readUshort,l=s.bin.readUint,f=0,h={},c=new Uint8Array(i),u=c.length-4;l(c,u)!=101010256;)u--;f=u,f+=4;var d=o(c,f+=4);o(c,f+=2);var p=l(c,f+=2),C=l(c,f+=4);f+=4,f=C;for(var I=0;I<d;I++){l(c,f),f+=4,f+=4,f+=4,l(c,f+=4),p=l(c,f+=4);var k=l(c,f+=4),P=o(c,f+=4),D=o(c,f+2),E=o(c,f+4);f+=6;var j=l(c,f+=8);f+=4,f+=P+D+E,s._readLocal(c,j,h,p,k,a)}return h},s._readLocal=function(i,a,o,l,f,h){var c=s.bin.readUshort,u=s.bin.readUint;u(i,a),c(i,a+=4),c(i,a+=2);var d=c(i,a+=2);u(i,a+=2),u(i,a+=4),a+=4;var p=c(i,a+=8),C=c(i,a+=2);a+=2;var I=s.bin.readUTF8(i,a,p);if(a+=p,a+=C,h)o[I]={size:f,csize:l};else{var k=new Uint8Array(i.buffer,a);if(d==0)o[I]=new Uint8Array(k.buffer.slice(a,a+l));else{if(d!=8)throw"unknown compression method: "+d;var P=new Uint8Array(f);s.inflateRaw(k,P),o[I]=P}}},s.inflateRaw=function(i,a){return s.F.inflate(i,a)},s.inflate=function(i,a){return i[0],i[1],s.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},s.deflate=function(i,a){a==null&&(a={level:6});var o=0,l=new Uint8Array(50+Math.floor(1.1*i.length));l[o]=120,l[o+1]=156,o+=2,o=s.F.deflateRaw(i,l,o,a.level);var f=s.adler(i,0,i.length);return l[o+0]=f>>>24&255,l[o+1]=f>>>16&255,l[o+2]=f>>>8&255,l[o+3]=f>>>0&255,new Uint8Array(l.buffer,0,o+4)},s.deflateRaw=function(i,a){a==null&&(a={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),l=s.F.deflateRaw(i,o,l,a.level);return new Uint8Array(o.buffer,0,l)},s.encode=function(i,a){a==null&&(a=!1);var o=0,l=s.bin.writeUint,f=s.bin.writeUshort,h={};for(var c in i){var u=!s._noNeed(c)&&!a,d=i[c],p=s.crc.crc(d,0,d.length);h[c]={cpr:u,usize:d.length,crc:p,file:u?s.deflateRaw(d):d}}for(var c in h)o+=h[c].file.length+30+46+2*s.bin.sizeUTF8(c);o+=22;var C=new Uint8Array(o),I=0,k=[];for(var c in h){var P=h[c];k.push(I),I=s._writeHeader(C,I,c,P,0)}var D=0,E=I;for(var c in h)P=h[c],k.push(I),I=s._writeHeader(C,I,c,P,1,k[D++]);var j=I-E;return l(C,I,101010256),I+=4,f(C,I+=4,D),f(C,I+=2,D),l(C,I+=2,j),l(C,I+=4,E),I+=4,I+=2,C.buffer},s._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},s._writeHeader=function(i,a,o,l,f,h){var c=s.bin.writeUint,u=s.bin.writeUshort,d=l.file;return c(i,a,f==0?67324752:33639248),a+=4,f==1&&(a+=2),u(i,a,20),u(i,a+=2,0),u(i,a+=2,l.cpr?8:0),c(i,a+=2,0),c(i,a+=4,l.crc),c(i,a+=4,d.length),c(i,a+=4,l.usize),u(i,a+=4,s.bin.sizeUTF8(o)),u(i,a+=2,0),a+=2,f==1&&(a+=2,a+=2,c(i,a+=6,h),a+=4),a+=s.bin.writeUTF8(i,a,o),f==0&&(i.set(d,a),a+=d.length),a},s.crc={table:(function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var o=a,l=0;l<8;l++)1&o?o=3988292384^o>>>1:o>>>=1;i[a]=o}return i})(),update:function(i,a,o,l){for(var f=0;f<l;f++)i=s.crc.table[255&(i^a[o+f])]^i>>>8;return i},crc:function(i,a,o){return 4294967295^s.crc.update(4294967295,i,a,o)}},s.adler=function(i,a,o){for(var l=1,f=0,h=a,c=a+o;h<c;){for(var u=Math.min(h+5552,c);h<u;)f+=l+=i[h++];l%=65521,f%=65521}return f<<16|l},s.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255,i[a+2]=o>>16&255,i[a+3]=o>>24&255},readASCII:function(i,a,o){for(var l="",f=0;f<o;f++)l+=String.fromCharCode(i[a+f]);return l},writeASCII:function(i,a,o){for(var l=0;l<o.length;l++)i[a+l]=o.charCodeAt(l)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,o){for(var l,f="",h=0;h<o;h++)f+="%"+s.bin.pad(i[a+h].toString(16));try{l=decodeURIComponent(f)}catch{return s.bin.readASCII(i,a,o)}return l},writeUTF8:function(i,a,o){for(var l=o.length,f=0,h=0;h<l;h++){var c=o.charCodeAt(h);if((4294967168&c)==0)i[a+f]=c,f++;else if((4294965248&c)==0)i[a+f]=192|c>>6,i[a+f+1]=128|c>>0&63,f+=2;else if((4294901760&c)==0)i[a+f]=224|c>>12,i[a+f+1]=128|c>>6&63,i[a+f+2]=128|c>>0&63,f+=3;else{if((4292870144&c)!=0)throw"e";i[a+f]=240|c>>18,i[a+f+1]=128|c>>12&63,i[a+f+2]=128|c>>6&63,i[a+f+3]=128|c>>0&63,f+=4}}return f},sizeUTF8:function(i){for(var a=i.length,o=0,l=0;l<a;l++){var f=i.charCodeAt(l);if((4294967168&f)==0)o++;else if((4294965248&f)==0)o+=2;else if((4294901760&f)==0)o+=3;else{if((4292870144&f)!=0)throw"e";o+=4}}return o}},s.F={},s.F.deflateRaw=function(i,a,o,l){var f=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],h=s.F.U,c=s.F._goodIndex;s.F._hash;var u=s.F._putsE,d=0,p=o<<3,C=0,I=i.length;if(l==0){for(;d<I;)u(a,p,d+(w=Math.min(65535,I-d))==I?1:0),p=s.F._copyExact(i,d,w,a,p+8),d+=w;return p>>>3}var k=h.lits,P=h.strt,D=h.prev,E=0,j=0,U=0,T=0,O=0,b=0;for(I>2&&(P[b=s.F._hash(i,0)]=0),d=0;d<I;d++){if(O=b,d+1<I-2){b=s.F._hash(i,d+1);var m=d+1&32767;D[m]=P[b],P[b]=m}if(C<=d){(E>14e3||j>26697)&&I-d>100&&(C<d&&(k[E]=d-C,E+=2,C=d),p=s.F._writeBlock(d==I-1||C==I?1:0,k,E,T,i,U,d-U,a,p),E=j=T=0,U=d);var x=0;d<I-2&&(x=s.F._bestMatch(i,d,D,O,Math.min(f[2],I-d),f[3]));var w=x>>>16,A=65535&x;if(x!=0){A=65535&x;var S=c(w=x>>>16,h.of0);h.lhst[257+S]++;var N=c(A,h.df0);h.dhst[N]++,T+=h.exb[S]+h.dxb[N],k[E]=w<<23|d-C,k[E+1]=A<<16|S<<8|N,E+=2,C=d+w}else h.lhst[i[d]]++;j++}}for(U==d&&i.length!=0||(C<d&&(k[E]=d-C,E+=2,C=d),p=s.F._writeBlock(1,k,E,T,i,U,d-U,a,p),E=0,j=0,E=j=T=0,U=d);(7&p)!=0;)p++;return p>>>3},s.F._bestMatch=function(i,a,o,l,f,h){var c=32767&a,u=o[c],d=c-u+32768&32767;if(u==c||l!=s.F._hash(i,a-d))return 0;for(var p=0,C=0,I=Math.min(32767,a);d<=I&&--h!=0&&u!=c;){if(p==0||i[a+p]==i[a+p-d]){var k=s.F._howLong(i,a,d);if(k>p){if(C=d,(p=k)>=f)break;d+2<k&&(k=d+2);for(var P=0,D=0;D<k-2;D++){var E=a-d+D+32768&32767,j=E-o[E]+32768&32767;j>P&&(P=j,u=E)}}}d+=(c=u)-(u=o[c])+32768&32767}return p<<16|C},s.F._howLong=function(i,a,o){if(i[a]!=i[a-o]||i[a+1]!=i[a+1-o]||i[a+2]!=i[a+2-o])return 0;var l=a,f=Math.min(i.length,a+258);for(a+=3;a<f&&i[a]==i[a-o];)a++;return a-l},s.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(i,a,o,l,f,h,c,u,d){var p,C,I,k,P,D,E,j,U,T=s.F.U,O=s.F._putsF,b=s.F._putsE;T.lhst[256]++,C=(p=s.F.getTrees())[0],I=p[1],k=p[2],P=p[3],D=p[4],E=p[5],j=p[6],U=p[7];var m=32+((d+3&7)==0?0:8-(d+3&7))+(c<<3),x=l+s.F.contSize(T.fltree,T.lhst)+s.F.contSize(T.fdtree,T.dhst),w=l+s.F.contSize(T.ltree,T.lhst)+s.F.contSize(T.dtree,T.dhst);w+=14+3*E+s.F.contSize(T.itree,T.ihst)+(2*T.ihst[16]+3*T.ihst[17]+7*T.ihst[18]);for(var A=0;A<286;A++)T.lhst[A]=0;for(A=0;A<30;A++)T.dhst[A]=0;for(A=0;A<19;A++)T.ihst[A]=0;var S=m<x&&m<w?0:x<w?1:2;if(O(u,d,i),O(u,d+1,S),d+=3,S==0){for(;(7&d)!=0;)d++;d=s.F._copyExact(f,h,c,u,d)}else{var N,_;if(S==1&&(N=T.fltree,_=T.fdtree),S==2){s.F.makeCodes(T.ltree,C),s.F.revCodes(T.ltree,C),s.F.makeCodes(T.dtree,I),s.F.revCodes(T.dtree,I),s.F.makeCodes(T.itree,k),s.F.revCodes(T.itree,k),N=T.ltree,_=T.dtree,b(u,d,P-257),b(u,d+=5,D-1),b(u,d+=5,E-4),d+=4;for(var g=0;g<E;g++)b(u,d+3*g,T.itree[1+(T.ordr[g]<<1)]);d+=3*E,d=s.F._codeTiny(j,T.itree,u,d),d=s.F._codeTiny(U,T.itree,u,d)}for(var y=h,M=0;M<o;M+=2){for(var F=a[M],B=F>>>23,Q=y+(8388607&F);y<Q;)d=s.F._writeLit(f[y++],N,u,d);if(B!=0){var $=a[M+1],q=$>>16,z=$>>8&255,L=255&$;b(u,d=s.F._writeLit(257+z,N,u,d),B-T.of0[z]),d+=T.exb[z],O(u,d=s.F._writeLit(L,_,u,d),q-T.df0[L]),d+=T.dxb[L],y+=B}}d=s.F._writeLit(256,N,u,d)}return d},s.F._copyExact=function(i,a,o,l,f){var h=f>>>3;return l[h]=o,l[h+1]=o>>>8,l[h+2]=255-l[h],l[h+3]=255-l[h+1],h+=4,l.set(new Uint8Array(i.buffer,a,o),h),f+(o+4<<3)},s.F.getTrees=function(){for(var i=s.F.U,a=s.F._hufTree(i.lhst,i.ltree,15),o=s.F._hufTree(i.dhst,i.dtree,15),l=[],f=s.F._lenCodes(i.ltree,l),h=[],c=s.F._lenCodes(i.dtree,h),u=0;u<l.length;u+=2)i.ihst[l[u]]++;for(u=0;u<h.length;u+=2)i.ihst[h[u]]++;for(var d=s.F._hufTree(i.ihst,i.itree,7),p=19;p>4&&i.itree[1+(i.ordr[p-1]<<1)]==0;)p--;return[a,o,d,f,c,p,l,h]},s.F.getSecond=function(i){for(var a=[],o=0;o<i.length;o+=2)a.push(i[o+1]);return a},s.F.nonZero=function(i){for(var a="",o=0;o<i.length;o+=2)i[o+1]!=0&&(a+=(o>>1)+",");return a},s.F.contSize=function(i,a){for(var o=0,l=0;l<a.length;l++)o+=a[l]*i[1+(l<<1)];return o},s.F._codeTiny=function(i,a,o,l){for(var f=0;f<i.length;f+=2){var h=i[f],c=i[f+1];l=s.F._writeLit(h,a,o,l);var u=h==16?2:h==17?3:7;h>15&&(s.F._putsE(o,l,c,u),l+=u)}return l},s.F._lenCodes=function(i,a){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var l=0;l<o;l+=2){var f=i[l+1],h=l+3<o?i[l+3]:-1,c=l+5<o?i[l+5]:-1,u=l==0?-1:i[l-1];if(f==0&&h==f&&c==f){for(var d=l+5;d+2<o&&i[d+2]==f;)d+=2;(p=Math.min(d+1-l>>>1,138))<11?a.push(17,p-3):a.push(18,p-11),l+=2*p-2}else if(f==u&&h==f&&c==f){for(d=l+5;d+2<o&&i[d+2]==f;)d+=2;var p=Math.min(d+1-l>>>1,6);a.push(16,p-3),l+=2*p-2}else a.push(f,0)}return o>>>1},s.F._hufTree=function(i,a,o){var l=[],f=i.length,h=a.length,c=0;for(c=0;c<h;c+=2)a[c]=0,a[c+1]=0;for(c=0;c<f;c++)i[c]!=0&&l.push({lit:c,f:i[c]});var u=l.length,d=l.slice(0);if(u==0)return 0;if(u==1){var p=l[0].lit;return d=p==0?1:0,a[1+(p<<1)]=1,a[1+(d<<1)]=1,1}l.sort((function(j,U){return j.f-U.f}));var C=l[0],I=l[1],k=0,P=1,D=2;for(l[0]={lit:-1,f:C.f+I.f,l:C,r:I,d:0};P!=u-1;)C=k!=P&&(D==u||l[k].f<l[D].f)?l[k++]:l[D++],I=k!=P&&(D==u||l[k].f<l[D].f)?l[k++]:l[D++],l[P++]={lit:-1,f:C.f+I.f,l:C,r:I};var E=s.F.setDepth(l[P-1],0);for(E>o&&(s.F.restrictDepth(d,o,E),E=o),c=0;c<u;c++)a[1+(d[c].lit<<1)]=d[c].d;return E},s.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(s.F.setDepth(i.l,a+1),s.F.setDepth(i.r,a+1))},s.F.restrictDepth=function(i,a,o){var l=0,f=1<<o-a,h=0;for(i.sort((function(u,d){return d.d==u.d?u.f-d.f:d.d-u.d})),l=0;l<i.length&&i[l].d>a;l++){var c=i[l].d;i[l].d=a,h+=f-(1<<o-c)}for(h>>>=o-a;h>0;)(c=i[l].d)<a?(i[l].d++,h-=1<<a-c-1):l++;for(;l>=0;l--)i[l].d==a&&h<0&&(i[l].d--,h++);h!=0&&console.log("debt left")},s.F._goodIndex=function(i,a){var o=0;return a[16|o]<=i&&(o|=16),a[8|o]<=i&&(o|=8),a[4|o]<=i&&(o|=4),a[2|o]<=i&&(o|=2),a[1|o]<=i&&(o|=1),o},s.F._writeLit=function(i,a,o,l){return s.F._putsF(o,l,a[i<<1]),l+a[1+(i<<1)]},s.F.inflate=function(i,a){var o=Uint8Array;if(i[0]==3&&i[1]==0)return a||new o(0);var l=s.F,f=l._bitsF,h=l._bitsE,c=l._decodeTiny,u=l.makeCodes,d=l.codes2map,p=l._get17,C=l.U,I=a==null;I&&(a=new o(i.length>>>2<<3));for(var k,P,D=0,E=0,j=0,U=0,T=0,O=0,b=0,m=0,x=0;D==0;)if(D=f(i,x,1),E=f(i,x+1,2),x+=3,E!=0){if(I&&(a=s.F._check(a,m+(1<<17))),E==1&&(k=C.flmap,P=C.fdmap,O=511,b=31),E==2){j=h(i,x,5)+257,U=h(i,x+5,5)+1,T=h(i,x+10,4)+4,x+=14;for(var w=0;w<38;w+=2)C.itree[w]=0,C.itree[w+1]=0;var A=1;for(w=0;w<T;w++){var S=h(i,x+3*w,3);C.itree[1+(C.ordr[w]<<1)]=S,S>A&&(A=S)}x+=3*T,u(C.itree,A),d(C.itree,A,C.imap),k=C.lmap,P=C.dmap,x=c(C.imap,(1<<A)-1,j+U,i,x,C.ttree);var N=l._copyOut(C.ttree,0,j,C.ltree);O=(1<<N)-1;var _=l._copyOut(C.ttree,j,U,C.dtree);b=(1<<_)-1,u(C.ltree,N),d(C.ltree,N,k),u(C.dtree,_),d(C.dtree,_,P)}for(;;){var g=k[p(i,x)&O];x+=15&g;var y=g>>>4;if(!(y>>>8))a[m++]=y;else{if(y==256)break;var M=m+y-254;if(y>264){var F=C.ldef[y-257];M=m+(F>>>3)+h(i,x,7&F),x+=7&F}var B=P[p(i,x)&b];x+=15&B;var Q=B>>>4,$=C.ddef[Q],q=($>>>4)+f(i,x,15&$);for(x+=15&$,I&&(a=s.F._check(a,m+(1<<17)));m<M;)a[m]=a[m++-q],a[m]=a[m++-q],a[m]=a[m++-q],a[m]=a[m++-q];m=M}}}else{(7&x)!=0&&(x+=8-(7&x));var z=4+(x>>>3),L=i[z-4]|i[z-3]<<8;I&&(a=s.F._check(a,m+L)),a.set(new o(i.buffer,i.byteOffset+z,L),m),x=z+L<<3,m+=L}return a.length==m?a:a.slice(0,m)},s.F._check=function(i,a){var o=i.length;if(a<=o)return i;var l=new Uint8Array(Math.max(o<<1,a));return l.set(i,0),l},s.F._decodeTiny=function(i,a,o,l,f,h){for(var c=s.F._bitsE,u=s.F._get17,d=0;d<o;){var p=i[u(l,f)&a];f+=15&p;var C=p>>>4;if(C<=15)h[d]=C,d++;else{var I=0,k=0;C==16?(k=3+c(l,f,2),f+=2,I=h[d-1]):C==17?(k=3+c(l,f,3),f+=3):C==18&&(k=11+c(l,f,7),f+=7);for(var P=d+k;d<P;)h[d]=I,d++}}return f},s.F._copyOut=function(i,a,o,l){for(var f=0,h=0,c=l.length>>>1;h<o;){var u=i[h+a];l[h<<1]=0,l[1+(h<<1)]=u,u>f&&(f=u),h++}for(;h<c;)l[h<<1]=0,l[1+(h<<1)]=0,h++;return f},s.F.makeCodes=function(i,a){for(var o,l,f,h,c=s.F.U,u=i.length,d=c.bl_count,p=0;p<=a;p++)d[p]=0;for(p=1;p<u;p+=2)d[i[p]]++;var C=c.next_code;for(o=0,d[0]=0,l=1;l<=a;l++)o=o+d[l-1]<<1,C[l]=o;for(f=0;f<u;f+=2)(h=i[f+1])!=0&&(i[f]=C[h],C[h]++)},s.F.codes2map=function(i,a,o){for(var l=i.length,f=s.F.U.rev15,h=0;h<l;h+=2)if(i[h+1]!=0)for(var c=h>>1,u=i[h+1],d=c<<4|u,p=a-u,C=i[h]<<p,I=C+(1<<p);C!=I;)o[f[C]>>>15-a]=d,C++},s.F.revCodes=function(i,a){for(var o=s.F.U.rev15,l=15-a,f=0;f<i.length;f+=2){var h=i[f]<<a-i[f+1];i[f]=o[h]>>>l}},s.F._putsE=function(i,a,o){o<<=7&a;var l=a>>>3;i[l]|=o,i[l+1]|=o>>>8},s.F._putsF=function(i,a,o){o<<=7&a;var l=a>>>3;i[l]|=o,i[l+1]|=o>>>8,i[l+2]|=o>>>16},s.F._bitsE=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<o)-1},s.F._bitsF=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<o)-1},s.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},s.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},s.F.U=(e=Uint16Array,r=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var i=s.F.U,a=0;a<32768;a++){var o=a;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[a]=(o>>>16|o<<16)>>>17}function l(f,h,c){for(;h--!=0;)f.push(0,c)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];l(i.fltree,144,8),l(i.fltree,112,9),l(i.fltree,24,7),l(i.fltree,8,8),s.F.makeCodes(i.fltree,9),s.F.codes2map(i.fltree,9,i.flmap),s.F.revCodes(i.fltree,9),l(i.fdtree,32,5),s.F.makeCodes(i.fdtree,5),s.F.codes2map(i.fdtree,5,i.fdmap),s.F.revCodes(i.fdtree,5),l(i.itree,19,0),l(i.ltree,286,0),l(i.dtree,30,0),l(i.ttree,320,0)})()})();var Qc=Gc({__proto__:null,default:or},[or]);const dt=(function(){var t={nextZero(c,u){for(;c[u]!=0;)u++;return u},readUshort:(c,u)=>c[u]<<8|c[u+1],writeUshort(c,u,d){c[u]=d>>8&255,c[u+1]=255&d},readUint:(c,u)=>16777216*c[u]+(c[u+1]<<16|c[u+2]<<8|c[u+3]),writeUint(c,u,d){c[u]=d>>24&255,c[u+1]=d>>16&255,c[u+2]=d>>8&255,c[u+3]=255&d},readASCII(c,u,d){let p="";for(let C=0;C<d;C++)p+=String.fromCharCode(c[u+C]);return p},writeASCII(c,u,d){for(let p=0;p<d.length;p++)c[u+p]=d.charCodeAt(p)},readBytes(c,u,d){const p=[];for(let C=0;C<d;C++)p.push(c[u+C]);return p},pad:c=>c.length<2?`0${c}`:c,readUTF8(c,u,d){let p,C="";for(let I=0;I<d;I++)C+=`%${t.pad(c[u+I].toString(16))}`;try{p=decodeURIComponent(C)}catch{return t.readASCII(c,u,d)}return p}};function e(c,u,d,p){const C=u*d,I=a(p),k=Math.ceil(u*I/8),P=new Uint8Array(4*C),D=new Uint32Array(P.buffer),{ctype:E}=p,{depth:j}=p,U=t.readUshort;if(E==6){const F=C<<2;if(j==8)for(var T=0;T<F;T+=4)P[T]=c[T],P[T+1]=c[T+1],P[T+2]=c[T+2],P[T+3]=c[T+3];if(j==16)for(T=0;T<F;T++)P[T]=c[T<<1]}else if(E==2){const F=p.tabs.tRNS;if(F==null){if(j==8)for(T=0;T<C;T++){var O=3*T;D[T]=255<<24|c[O+2]<<16|c[O+1]<<8|c[O]}if(j==16)for(T=0;T<C;T++)O=6*T,D[T]=255<<24|c[O+4]<<16|c[O+2]<<8|c[O]}else{var b=F[0];const B=F[1],Q=F[2];if(j==8)for(T=0;T<C;T++){var m=T<<2;O=3*T,D[T]=255<<24|c[O+2]<<16|c[O+1]<<8|c[O],c[O]==b&&c[O+1]==B&&c[O+2]==Q&&(P[m+3]=0)}if(j==16)for(T=0;T<C;T++)m=T<<2,O=6*T,D[T]=255<<24|c[O+4]<<16|c[O+2]<<8|c[O],U(c,O)==b&&U(c,O+2)==B&&U(c,O+4)==Q&&(P[m+3]=0)}}else if(E==3){const F=p.tabs.PLTE,B=p.tabs.tRNS,Q=B?B.length:0;if(j==1)for(var x=0;x<d;x++){var w=x*k,A=x*u;for(T=0;T<u;T++){m=A+T<<2;var S=3*(N=c[w+(T>>3)]>>7-((7&T)<<0)&1);P[m]=F[S],P[m+1]=F[S+1],P[m+2]=F[S+2],P[m+3]=N<Q?B[N]:255}}if(j==2)for(x=0;x<d;x++)for(w=x*k,A=x*u,T=0;T<u;T++)m=A+T<<2,S=3*(N=c[w+(T>>2)]>>6-((3&T)<<1)&3),P[m]=F[S],P[m+1]=F[S+1],P[m+2]=F[S+2],P[m+3]=N<Q?B[N]:255;if(j==4)for(x=0;x<d;x++)for(w=x*k,A=x*u,T=0;T<u;T++)m=A+T<<2,S=3*(N=c[w+(T>>1)]>>4-((1&T)<<2)&15),P[m]=F[S],P[m+1]=F[S+1],P[m+2]=F[S+2],P[m+3]=N<Q?B[N]:255;if(j==8)for(T=0;T<C;T++){var N;m=T<<2,S=3*(N=c[T]),P[m]=F[S],P[m+1]=F[S+1],P[m+2]=F[S+2],P[m+3]=N<Q?B[N]:255}}else if(E==4){if(j==8)for(T=0;T<C;T++){m=T<<2;var _=c[g=T<<1];P[m]=_,P[m+1]=_,P[m+2]=_,P[m+3]=c[g+1]}if(j==16)for(T=0;T<C;T++){var g;m=T<<2,_=c[g=T<<2],P[m]=_,P[m+1]=_,P[m+2]=_,P[m+3]=c[g+2]}}else if(E==0)for(b=p.tabs.tRNS?p.tabs.tRNS:-1,x=0;x<d;x++){const F=x*k,B=x*u;if(j==1)for(var y=0;y<u;y++){var M=(_=255*(c[F+(y>>>3)]>>>7-(7&y)&1))==255*b?0:255;D[B+y]=M<<24|_<<16|_<<8|_}else if(j==2)for(y=0;y<u;y++)M=(_=85*(c[F+(y>>>2)]>>>6-((3&y)<<1)&3))==85*b?0:255,D[B+y]=M<<24|_<<16|_<<8|_;else if(j==4)for(y=0;y<u;y++)M=(_=17*(c[F+(y>>>1)]>>>4-((1&y)<<2)&15))==17*b?0:255,D[B+y]=M<<24|_<<16|_<<8|_;else if(j==8)for(y=0;y<u;y++)M=(_=c[F+y])==b?0:255,D[B+y]=M<<24|_<<16|_<<8|_;else if(j==16)for(y=0;y<u;y++)_=c[F+(y<<1)],M=U(c,F+(y<<1))==b?0:255,D[B+y]=M<<24|_<<16|_<<8|_}return P}function r(c,u,d,p){const C=a(c),I=Math.ceil(d*C/8),k=new Uint8Array((I+1+c.interlace)*p);return u=c.tabs.CgBI?i(u,k):s(u,k),c.interlace==0?u=o(u,c,0,d,p):c.interlace==1&&(u=(function(D,E){const j=E.width,U=E.height,T=a(E),O=T>>3,b=Math.ceil(j*T/8),m=new Uint8Array(U*b);let x=0;const w=[0,0,4,0,2,0,1],A=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],N=[8,8,4,4,2,2,1];let _=0;for(;_<7;){const y=S[_],M=N[_];let F=0,B=0,Q=w[_];for(;Q<U;)Q+=y,B++;let $=A[_];for(;$<j;)$+=M,F++;const q=Math.ceil(F*T/8);o(D,E,x,F,B);let z=0,L=w[_];for(;L<U;){let X=A[_],ce=x+z*q<<3;for(;X<j;){var g;if(T==1&&(g=(g=D[ce>>3])>>7-(7&ce)&1,m[L*b+(X>>3)]|=g<<7-((7&X)<<0)),T==2&&(g=(g=D[ce>>3])>>6-(7&ce)&3,m[L*b+(X>>2)]|=g<<6-((3&X)<<1)),T==4&&(g=(g=D[ce>>3])>>4-(7&ce)&15,m[L*b+(X>>1)]|=g<<4-((1&X)<<2)),T>=8){const se=L*b+X*O;for(let ne=0;ne<O;ne++)m[se+ne]=D[(ce>>3)+ne]}ce+=T,X+=M}z++,L+=y}F*B!=0&&(x+=B*(1+q)),_+=1}return m})(u,c)),u}function s(c,u){return i(new Uint8Array(c.buffer,2,c.length-6),u)}var i=(function(){const c={H:{}};return c.H.N=function(u,d){const p=Uint8Array;let C,I,k=0,P=0,D=0,E=0,j=0,U=0,T=0,O=0,b=0;if(u[0]==3&&u[1]==0)return d||new p(0);const m=c.H,x=m.b,w=m.e,A=m.R,S=m.n,N=m.A,_=m.Z,g=m.m,y=d==null;for(y&&(d=new p(u.length>>>2<<5));k==0;)if(k=x(u,b,1),P=x(u,b+1,2),b+=3,P!=0){if(y&&(d=c.H.W(d,O+(1<<17))),P==1&&(C=g.J,I=g.h,U=511,T=31),P==2){D=w(u,b,5)+257,E=w(u,b+5,5)+1,j=w(u,b+10,4)+4,b+=14;let F=1;for(var M=0;M<38;M+=2)g.Q[M]=0,g.Q[M+1]=0;for(M=0;M<j;M++){const $=w(u,b+3*M,3);g.Q[1+(g.X[M]<<1)]=$,$>F&&(F=$)}b+=3*j,S(g.Q,F),N(g.Q,F,g.u),C=g.w,I=g.d,b=A(g.u,(1<<F)-1,D+E,u,b,g.v);const B=m.V(g.v,0,D,g.C);U=(1<<B)-1;const Q=m.V(g.v,D,E,g.D);T=(1<<Q)-1,S(g.C,B),N(g.C,B,C),S(g.D,Q),N(g.D,Q,I)}for(;;){const F=C[_(u,b)&U];b+=15&F;const B=F>>>4;if(!(B>>>8))d[O++]=B;else{if(B==256)break;{let Q=O+B-254;if(B>264){const X=g.q[B-257];Q=O+(X>>>3)+w(u,b,7&X),b+=7&X}const $=I[_(u,b)&T];b+=15&$;const q=$>>>4,z=g.c[q],L=(z>>>4)+x(u,b,15&z);for(b+=15&z;O<Q;)d[O]=d[O++-L],d[O]=d[O++-L],d[O]=d[O++-L],d[O]=d[O++-L];O=Q}}}}else{(7&b)!=0&&(b+=8-(7&b));const F=4+(b>>>3),B=u[F-4]|u[F-3]<<8;y&&(d=c.H.W(d,O+B)),d.set(new p(u.buffer,u.byteOffset+F,B),O),b=F+B<<3,O+=B}return d.length==O?d:d.slice(0,O)},c.H.W=function(u,d){const p=u.length;if(d<=p)return u;const C=new Uint8Array(p<<1);return C.set(u,0),C},c.H.R=function(u,d,p,C,I,k){const P=c.H.e,D=c.H.Z;let E=0;for(;E<p;){const j=u[D(C,I)&d];I+=15&j;const U=j>>>4;if(U<=15)k[E]=U,E++;else{let T=0,O=0;U==16?(O=3+P(C,I,2),I+=2,T=k[E-1]):U==17?(O=3+P(C,I,3),I+=3):U==18&&(O=11+P(C,I,7),I+=7);const b=E+O;for(;E<b;)k[E]=T,E++}}return I},c.H.V=function(u,d,p,C){let I=0,k=0;const P=C.length>>>1;for(;k<p;){const D=u[k+d];C[k<<1]=0,C[1+(k<<1)]=D,D>I&&(I=D),k++}for(;k<P;)C[k<<1]=0,C[1+(k<<1)]=0,k++;return I},c.H.n=function(u,d){const p=c.H.m,C=u.length;let I,k,P,D;const E=p.j;for(var j=0;j<=d;j++)E[j]=0;for(j=1;j<C;j+=2)E[u[j]]++;const U=p.K;for(I=0,E[0]=0,k=1;k<=d;k++)I=I+E[k-1]<<1,U[k]=I;for(P=0;P<C;P+=2)D=u[P+1],D!=0&&(u[P]=U[D],U[D]++)},c.H.A=function(u,d,p){const C=u.length,I=c.H.m.r;for(let k=0;k<C;k+=2)if(u[k+1]!=0){const P=k>>1,D=u[k+1],E=P<<4|D,j=d-D;let U=u[k]<<j;const T=U+(1<<j);for(;U!=T;)p[I[U]>>>15-d]=E,U++}},c.H.l=function(u,d){const p=c.H.m.r,C=15-d;for(let I=0;I<u.length;I+=2){const k=u[I]<<d-u[I+1];u[I]=p[k]>>>C}},c.H.M=function(u,d,p){p<<=7&d;const C=d>>>3;u[C]|=p,u[C+1]|=p>>>8},c.H.I=function(u,d,p){p<<=7&d;const C=d>>>3;u[C]|=p,u[C+1]|=p>>>8,u[C+2]|=p>>>16},c.H.e=function(u,d,p){return(u[d>>>3]|u[1+(d>>>3)]<<8)>>>(7&d)&(1<<p)-1},c.H.b=function(u,d,p){return(u[d>>>3]|u[1+(d>>>3)]<<8|u[2+(d>>>3)]<<16)>>>(7&d)&(1<<p)-1},c.H.Z=function(u,d){return(u[d>>>3]|u[1+(d>>>3)]<<8|u[2+(d>>>3)]<<16)>>>(7&d)},c.H.i=function(u,d){return(u[d>>>3]|u[1+(d>>>3)]<<8|u[2+(d>>>3)]<<16|u[3+(d>>>3)]<<24)>>>(7&d)},c.H.m=(function(){const u=Uint16Array,d=Uint32Array;return{K:new u(16),j:new u(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new u(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new d(32),J:new u(512),_:[],h:new u(32),$:[],w:new u(32768),C:[],v:[],d:new u(32768),D:[],u:new u(512),Q:[],r:new u(32768),s:new d(286),Y:new d(30),a:new d(19),t:new d(15e3),k:new u(65536),g:new u(32768)}})(),(function(){const u=c.H.m;for(var d=0;d<32768;d++){let C=d;C=(2863311530&C)>>>1|(1431655765&C)<<1,C=(3435973836&C)>>>2|(858993459&C)<<2,C=(4042322160&C)>>>4|(252645135&C)<<4,C=(4278255360&C)>>>8|(16711935&C)<<8,u.r[d]=(C>>>16|C<<16)>>>17}function p(C,I,k){for(;I--!=0;)C.push(0,k)}for(d=0;d<32;d++)u.q[d]=u.S[d]<<3|u.T[d],u.c[d]=u.p[d]<<4|u.z[d];p(u._,144,8),p(u._,112,9),p(u._,24,7),p(u._,8,8),c.H.n(u._,9),c.H.A(u._,9,u.J),c.H.l(u._,9),p(u.$,32,5),c.H.n(u.$,5),c.H.A(u.$,5,u.h),c.H.l(u.$,5),p(u.Q,19,0),p(u.C,286,0),p(u.D,30,0),p(u.v,320,0)})(),c.H.N})();function a(c){return[1,null,3,1,2,null,4][c.ctype]*c.depth}function o(c,u,d,p,C){let I=a(u);const k=Math.ceil(p*I/8);let P,D;I=Math.ceil(I/8);let E=c[d],j=0;if(E>1&&(c[d]=[0,0,1][E-2]),E==3)for(j=I;j<k;j++)c[j+1]=c[j+1]+(c[j+1-I]>>>1)&255;for(let U=0;U<C;U++)if(P=d+U*k,D=P+U+1,E=c[D-1],j=0,E==0)for(;j<k;j++)c[P+j]=c[D+j];else if(E==1){for(;j<I;j++)c[P+j]=c[D+j];for(;j<k;j++)c[P+j]=c[D+j]+c[P+j-I]}else if(E==2)for(;j<k;j++)c[P+j]=c[D+j]+c[P+j-k];else if(E==3){for(;j<I;j++)c[P+j]=c[D+j]+(c[P+j-k]>>>1);for(;j<k;j++)c[P+j]=c[D+j]+(c[P+j-k]+c[P+j-I]>>>1)}else{for(;j<I;j++)c[P+j]=c[D+j]+l(0,c[P+j-k],0);for(;j<k;j++)c[P+j]=c[D+j]+l(c[P+j-I],c[P+j-k],c[P+j-I-k])}return c}function l(c,u,d){const p=c+u-d,C=p-c,I=p-u,k=p-d;return C*C<=I*I&&C*C<=k*k?c:I*I<=k*k?u:d}function f(c,u,d){d.width=t.readUint(c,u),u+=4,d.height=t.readUint(c,u),u+=4,d.depth=c[u],u++,d.ctype=c[u],u++,d.compress=c[u],u++,d.filter=c[u],u++,d.interlace=c[u],u++}function h(c,u,d,p,C,I,k,P,D){const E=Math.min(u,C),j=Math.min(d,I);let U=0,T=0;for(let _=0;_<j;_++)for(let g=0;g<E;g++)if(k>=0&&P>=0?(U=_*u+g<<2,T=(P+_)*C+k+g<<2):(U=(-P+_)*u-k+g<<2,T=_*C+g<<2),D==0)p[T]=c[U],p[T+1]=c[U+1],p[T+2]=c[U+2],p[T+3]=c[U+3];else if(D==1){var O=c[U+3]*.00392156862745098,b=c[U]*O,m=c[U+1]*O,x=c[U+2]*O,w=p[T+3]*(1/255),A=p[T]*w,S=p[T+1]*w,N=p[T+2]*w;const y=1-O,M=O+w*y,F=M==0?0:1/M;p[T+3]=255*M,p[T+0]=(b+A*y)*F,p[T+1]=(m+S*y)*F,p[T+2]=(x+N*y)*F}else if(D==2)O=c[U+3],b=c[U],m=c[U+1],x=c[U+2],w=p[T+3],A=p[T],S=p[T+1],N=p[T+2],O==w&&b==A&&m==S&&x==N?(p[T]=0,p[T+1]=0,p[T+2]=0,p[T+3]=0):(p[T]=b,p[T+1]=m,p[T+2]=x,p[T+3]=O);else if(D==3){if(O=c[U+3],b=c[U],m=c[U+1],x=c[U+2],w=p[T+3],A=p[T],S=p[T+1],N=p[T+2],O==w&&b==A&&m==S&&x==N)continue;if(O<220&&w>20)return!1}return!0}return{decode:function(u){const d=new Uint8Array(u);let p=8;const C=t,I=C.readUshort,k=C.readUint,P={tabs:{},frames:[]},D=new Uint8Array(d.length);let E,j=0,U=0;const T=[137,80,78,71,13,10,26,10];for(var O=0;O<8;O++)if(d[O]!=T[O])throw"The input is not a PNG file!";for(;p<d.length;){const _=C.readUint(d,p);p+=4;const g=C.readASCII(d,p,4);if(p+=4,g=="IHDR")f(d,p,P);else if(g=="iCCP"){for(var b=p;d[b]!=0;)b++;C.readASCII(d,p,b-p),d[b+1];const y=d.slice(b+2,p+_);let M=null;try{M=s(y)}catch{M=i(y)}P.tabs[g]=M}else if(g=="CgBI")P.tabs[g]=d.slice(p,p+4);else if(g=="IDAT"){for(O=0;O<_;O++)D[j+O]=d[p+O];j+=_}else if(g=="acTL")P.tabs[g]={num_frames:k(d,p),num_plays:k(d,p+4)},E=new Uint8Array(d.length);else if(g=="fcTL"){U!=0&&((N=P.frames[P.frames.length-1]).data=r(P,E.slice(0,U),N.rect.width,N.rect.height),U=0);const y={x:k(d,p+12),y:k(d,p+16),width:k(d,p+4),height:k(d,p+8)};let M=I(d,p+22);M=I(d,p+20)/(M==0?100:M);const F={rect:y,delay:Math.round(1e3*M),dispose:d[p+24],blend:d[p+25]};P.frames.push(F)}else if(g=="fdAT"){for(O=0;O<_-4;O++)E[U+O]=d[p+O+4];U+=_-4}else if(g=="pHYs")P.tabs[g]=[C.readUint(d,p),C.readUint(d,p+4),d[p+8]];else if(g=="cHRM")for(P.tabs[g]=[],O=0;O<8;O++)P.tabs[g].push(C.readUint(d,p+4*O));else if(g=="tEXt"||g=="zTXt"){P.tabs[g]==null&&(P.tabs[g]={});var m=C.nextZero(d,p),x=C.readASCII(d,p,m-p),w=p+_-m-1;if(g=="tEXt")S=C.readASCII(d,m+1,w);else{var A=s(d.slice(m+2,m+2+w));S=C.readUTF8(A,0,A.length)}P.tabs[g][x]=S}else if(g=="iTXt"){P.tabs[g]==null&&(P.tabs[g]={}),m=0,b=p,m=C.nextZero(d,b),x=C.readASCII(d,b,m-b);const y=d[b=m+1];var S;d[b+1],b+=2,m=C.nextZero(d,b),C.readASCII(d,b,m-b),b=m+1,m=C.nextZero(d,b),C.readUTF8(d,b,m-b),w=_-((b=m+1)-p),y==0?S=C.readUTF8(d,b,w):(A=s(d.slice(b,b+w)),S=C.readUTF8(A,0,A.length)),P.tabs[g][x]=S}else if(g=="PLTE")P.tabs[g]=C.readBytes(d,p,_);else if(g=="hIST"){const y=P.tabs.PLTE.length/3;for(P.tabs[g]=[],O=0;O<y;O++)P.tabs[g].push(I(d,p+2*O))}else if(g=="tRNS")P.ctype==3?P.tabs[g]=C.readBytes(d,p,_):P.ctype==0?P.tabs[g]=I(d,p):P.ctype==2&&(P.tabs[g]=[I(d,p),I(d,p+2),I(d,p+4)]);else if(g=="gAMA")P.tabs[g]=C.readUint(d,p)/1e5;else if(g=="sRGB")P.tabs[g]=d[p];else if(g=="bKGD")P.ctype==0||P.ctype==4?P.tabs[g]=[I(d,p)]:P.ctype==2||P.ctype==6?P.tabs[g]=[I(d,p),I(d,p+2),I(d,p+4)]:P.ctype==3&&(P.tabs[g]=d[p]);else if(g=="IEND")break;p+=_,C.readUint(d,p),p+=4}var N;return U!=0&&((N=P.frames[P.frames.length-1]).data=r(P,E.slice(0,U),N.rect.width,N.rect.height)),P.data=r(P,D,P.width,P.height),delete P.compress,delete P.interlace,delete P.filter,P},toRGBA8:function(u){const d=u.width,p=u.height;if(u.tabs.acTL==null)return[e(u.data,d,p,u).buffer];const C=[];u.frames[0].data==null&&(u.frames[0].data=u.data);const I=d*p*4,k=new Uint8Array(I),P=new Uint8Array(I),D=new Uint8Array(I);for(let j=0;j<u.frames.length;j++){const U=u.frames[j],T=U.rect.x,O=U.rect.y,b=U.rect.width,m=U.rect.height,x=e(U.data,b,m,u);if(j!=0)for(var E=0;E<I;E++)D[E]=k[E];if(U.blend==0?h(x,b,m,k,d,p,T,O,0):U.blend==1&&h(x,b,m,k,d,p,T,O,1),C.push(k.buffer.slice(0)),U.dispose!=0){if(U.dispose==1)h(P,b,m,k,d,p,T,O,0);else if(U.dispose==2)for(E=0;E<I;E++)k[E]=D[E]}}return C},_paeth:l,_copyTile:h,_bin:t}})();(function(){const{_copyTile:t}=dt,{_bin:e}=dt,r=dt._paeth;var s={table:(function(){const b=new Uint32Array(256);for(let m=0;m<256;m++){let x=m;for(let w=0;w<8;w++)1&x?x=3988292384^x>>>1:x>>>=1;b[m]=x}return b})(),update(b,m,x,w){for(let A=0;A<w;A++)b=s.table[255&(b^m[x+A])]^b>>>8;return b},crc:(b,m,x)=>4294967295^s.update(4294967295,b,m,x)};function i(b,m,x,w){m[x]+=b[0]*w>>4,m[x+1]+=b[1]*w>>4,m[x+2]+=b[2]*w>>4,m[x+3]+=b[3]*w>>4}function a(b){return Math.max(0,Math.min(255,b))}function o(b,m){const x=b[0]-m[0],w=b[1]-m[1],A=b[2]-m[2],S=b[3]-m[3];return x*x+w*w+A*A+S*S}function l(b,m,x,w,A,S,N){N==null&&(N=1);const _=w.length,g=[];for(var y=0;y<_;y++){const L=w[y];g.push([L>>>0&255,L>>>8&255,L>>>16&255,L>>>24&255])}for(y=0;y<_;y++){let L=4294967295;for(var M=0,F=0;F<_;F++){var B=o(g[y],g[F]);F!=y&&B<L&&(L=B,M=F)}}const Q=new Uint32Array(A.buffer),$=new Int16Array(m*x*4),q=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(y=0;y<q.length;y++)q[y]=255*((q[y]+.5)/16-.5);for(let L=0;L<x;L++)for(let X=0;X<m;X++){var z;y=4*(L*m+X),N!=2?z=[a(b[y]+$[y]),a(b[y+1]+$[y+1]),a(b[y+2]+$[y+2]),a(b[y+3]+$[y+3])]:(B=q[4*(3&L)+(3&X)],z=[a(b[y]+B),a(b[y+1]+B),a(b[y+2]+B),a(b[y+3]+B)]),M=0;let ce=16777215;for(F=0;F<_;F++){const K=o(z,g[F]);K<ce&&(ce=K,M=F)}const se=g[M],ne=[z[0]-se[0],z[1]-se[1],z[2]-se[2],z[3]-se[3]];N==1&&(X!=m-1&&i(ne,$,y+4,7),L!=x-1&&(X!=0&&i(ne,$,y+4*m-4,3),i(ne,$,y+4*m,5),X!=m-1&&i(ne,$,y+4*m+4,1))),S[y>>2]=M,Q[y>>2]=w[M]}}function f(b,m,x,w,A){A==null&&(A={});const{crc:S}=s,N=e.writeUint,_=e.writeUshort,g=e.writeASCII;let y=8;const M=b.frames.length>1;let F,B=!1,Q=33+(M?20:0);if(A.sRGB!=null&&(Q+=13),A.pHYs!=null&&(Q+=21),A.iCCP!=null&&(F=pako.deflate(A.iCCP),Q+=21+F.length+4),b.ctype==3){for(var $=b.plte.length,q=0;q<$;q++)b.plte[q]>>>24!=255&&(B=!0);Q+=8+3*$+4+(B?8+1*$+4:0)}for(var z=0;z<b.frames.length;z++)M&&(Q+=38),Q+=(se=b.frames[z]).cimg.length+12,z!=0&&(Q+=4);Q+=12;const L=new Uint8Array(Q),X=[137,80,78,71,13,10,26,10];for(q=0;q<8;q++)L[q]=X[q];if(N(L,y,13),y+=4,g(L,y,"IHDR"),y+=4,N(L,y,m),y+=4,N(L,y,x),y+=4,L[y]=b.depth,y++,L[y]=b.ctype,y++,L[y]=0,y++,L[y]=0,y++,L[y]=0,y++,N(L,y,S(L,y-17,17)),y+=4,A.sRGB!=null&&(N(L,y,1),y+=4,g(L,y,"sRGB"),y+=4,L[y]=A.sRGB,y++,N(L,y,S(L,y-5,5)),y+=4),A.iCCP!=null){const ne=13+F.length;N(L,y,ne),y+=4,g(L,y,"iCCP"),y+=4,g(L,y,"ICC profile"),y+=11,y+=2,L.set(F,y),y+=F.length,N(L,y,S(L,y-(ne+4),ne+4)),y+=4}if(A.pHYs!=null&&(N(L,y,9),y+=4,g(L,y,"pHYs"),y+=4,N(L,y,A.pHYs[0]),y+=4,N(L,y,A.pHYs[1]),y+=4,L[y]=A.pHYs[2],y++,N(L,y,S(L,y-13,13)),y+=4),M&&(N(L,y,8),y+=4,g(L,y,"acTL"),y+=4,N(L,y,b.frames.length),y+=4,N(L,y,A.loop!=null?A.loop:0),y+=4,N(L,y,S(L,y-12,12)),y+=4),b.ctype==3){for(N(L,y,3*($=b.plte.length)),y+=4,g(L,y,"PLTE"),y+=4,q=0;q<$;q++){const ne=3*q,K=b.plte[q],he=255&K,le=K>>>8&255,He=K>>>16&255;L[y+ne+0]=he,L[y+ne+1]=le,L[y+ne+2]=He}if(y+=3*$,N(L,y,S(L,y-3*$-4,3*$+4)),y+=4,B){for(N(L,y,$),y+=4,g(L,y,"tRNS"),y+=4,q=0;q<$;q++)L[y+q]=b.plte[q]>>>24&255;y+=$,N(L,y,S(L,y-$-4,$+4)),y+=4}}let ce=0;for(z=0;z<b.frames.length;z++){var se=b.frames[z];M&&(N(L,y,26),y+=4,g(L,y,"fcTL"),y+=4,N(L,y,ce++),y+=4,N(L,y,se.rect.width),y+=4,N(L,y,se.rect.height),y+=4,N(L,y,se.rect.x),y+=4,N(L,y,se.rect.y),y+=4,_(L,y,w[z]),y+=2,_(L,y,1e3),y+=2,L[y]=se.dispose,y++,L[y]=se.blend,y++,N(L,y,S(L,y-30,30)),y+=4);const ne=se.cimg;N(L,y,($=ne.length)+(z==0?0:4)),y+=4;const K=y;g(L,y,z==0?"IDAT":"fdAT"),y+=4,z!=0&&(N(L,y,ce++),y+=4),L.set(ne,y),y+=$,N(L,y,S(L,K,y-K)),y+=4}return N(L,y,0),y+=4,g(L,y,"IEND"),y+=4,N(L,y,S(L,y-4,4)),y+=4,L.buffer}function h(b,m,x){for(let w=0;w<b.frames.length;w++){const A=b.frames[w];A.rect.width;const S=A.rect.height,N=new Uint8Array(S*A.bpl+S);A.cimg=p(A.img,S,A.bpp,A.bpl,N,m,x)}}function c(b,m,x,w,A){const S=A[0],N=A[1],_=A[2],g=A[3],y=A[4],M=A[5];let F=6,B=8,Q=255;for(var $=0;$<b.length;$++){const ye=new Uint8Array(b[$]);for(var q=ye.length,z=0;z<q;z+=4)Q&=ye[z+3]}const L=Q!=255,X=(function(me,de,Ne,ve,ge,Ee){const xe=[];for(var fe=0;fe<me.length;fe++){const Me=new Uint8Array(me[fe]),Ie=new Uint32Array(Me.buffer);var Ge;let qe=0,ct=0,at=de,ut=Ne,Zt=ve?1:0;if(fe!=0){const jr=Ee||ve||fe==1||xe[fe-2].dispose!=0?1:2;let Qt=0,Wn=1e9;for(let Lt=0;Lt<jr;Lt++){var vt=new Uint8Array(me[fe-1-Lt]);const kr=new Uint32Array(me[fe-1-Lt]);let pe=de,Ce=Ne,Re=-1,We=-1;for(let Te=0;Te<Ne;Te++)for(let Fe=0;Fe<de;Fe++)Ie[be=Te*de+Fe]!=kr[be]&&(Fe<pe&&(pe=Fe),Fe>Re&&(Re=Fe),Te<Ce&&(Ce=Te),Te>We&&(We=Te));Re==-1&&(pe=Ce=Re=We=0),ge&&((1&pe)==1&&pe--,(1&Ce)==1&&Ce--);const Ze=(Re-pe+1)*(We-Ce+1);Ze<Wn&&(Wn=Ze,Qt=Lt,qe=pe,ct=Ce,at=Re-pe+1,ut=We-Ce+1)}vt=new Uint8Array(me[fe-1-Qt]),Qt==1&&(xe[fe-1].dispose=2),Ge=new Uint8Array(at*ut*4),t(vt,de,Ne,Ge,at,ut,-qe,-ct,0),Zt=t(Me,de,Ne,Ge,at,ut,-qe,-ct,3)?1:0,Zt==1?d(Me,de,Ne,Ge,{x:qe,y:ct,width:at,height:ut}):t(Me,de,Ne,Ge,at,ut,-qe,-ct,0)}else Ge=Me.slice(0);xe.push({rect:{x:qe,y:ct,width:at,height:ut},img:Ge,blend:Zt,dispose:0})}if(ve)for(fe=0;fe<xe.length;fe++){if((tt=xe[fe]).blend==1)continue;const Me=tt.rect,Ie=xe[fe-1].rect,qe=Math.min(Me.x,Ie.x),ct=Math.min(Me.y,Ie.y),at={x:qe,y:ct,width:Math.max(Me.x+Me.width,Ie.x+Ie.width)-qe,height:Math.max(Me.y+Me.height,Ie.y+Ie.height)-ct};xe[fe-1].dispose=1,fe-1!=0&&u(me,de,Ne,xe,fe-1,at,ge),u(me,de,Ne,xe,fe,at,ge)}let lt=0;if(me.length!=1)for(var be=0;be<xe.length;be++){var tt;lt+=(tt=xe[be]).rect.width*tt.rect.height}return xe})(b,m,x,S,N,_),ce={},se=[],ne=[];if(w!=0){const ye=[];for(z=0;z<X.length;z++)ye.push(X[z].img.buffer);const me=(function(ge){let Ee=0;for(var xe=0;xe<ge.length;xe++)Ee+=ge[xe].byteLength;const fe=new Uint8Array(Ee);let Ge=0;for(xe=0;xe<ge.length;xe++){const vt=new Uint8Array(ge[xe]),lt=vt.length;for(let be=0;be<lt;be+=4){let tt=vt[be],Me=vt[be+1],Ie=vt[be+2];const qe=vt[be+3];qe==0&&(tt=Me=Ie=0),fe[Ge+be]=tt,fe[Ge+be+1]=Me,fe[Ge+be+2]=Ie,fe[Ge+be+3]=qe}Ge+=lt}return fe.buffer})(ye),de=I(me,w);for(z=0;z<de.plte.length;z++)se.push(de.plte[z].est.rgba);let Ne=0;for(z=0;z<X.length;z++){const ve=(he=X[z]).img.length;var K=new Uint8Array(de.inds.buffer,Ne>>2,ve>>2);ne.push(K);const ge=new Uint8Array(de.abuf,Ne,ve);M&&l(he.img,he.rect.width,he.rect.height,se,ge,K),he.img.set(ge),Ne+=ve}}else for($=0;$<X.length;$++){var he=X[$];const ye=new Uint32Array(he.img.buffer);var le=he.rect.width;for(q=ye.length,K=new Uint8Array(q),ne.push(K),z=0;z<q;z++){const me=ye[z];if(z!=0&&me==ye[z-1])K[z]=K[z-1];else if(z>le&&me==ye[z-le])K[z]=K[z-le];else{let de=ce[me];if(de==null&&(ce[me]=de=se.length,se.push(me),se.length>=300))break;K[z]=de}}}const He=se.length;for(He<=256&&y==0&&(B=He<=2?1:He<=4?2:He<=16?4:8,B=Math.max(B,g)),$=0;$<X.length;$++){(he=X[$]).rect.x,he.rect.y,le=he.rect.width;const ye=he.rect.height;let me=he.img;new Uint32Array(me.buffer);let de=4*le,Ne=4;if(He<=256&&y==0){de=Math.ceil(B*le/8);var Pe=new Uint8Array(de*ye);const ve=ne[$];for(let ge=0;ge<ye;ge++){z=ge*de;const Ee=ge*le;if(B==8)for(var ue=0;ue<le;ue++)Pe[z+ue]=ve[Ee+ue];else if(B==4)for(ue=0;ue<le;ue++)Pe[z+(ue>>1)]|=ve[Ee+ue]<<4-4*(1&ue);else if(B==2)for(ue=0;ue<le;ue++)Pe[z+(ue>>2)]|=ve[Ee+ue]<<6-2*(3&ue);else if(B==1)for(ue=0;ue<le;ue++)Pe[z+(ue>>3)]|=ve[Ee+ue]<<7-1*(7&ue)}me=Pe,F=3,Ne=1}else if(L==0&&X.length==1){Pe=new Uint8Array(le*ye*3);const ve=le*ye;for(z=0;z<ve;z++){const ge=3*z,Ee=4*z;Pe[ge]=me[Ee],Pe[ge+1]=me[Ee+1],Pe[ge+2]=me[Ee+2]}me=Pe,F=2,Ne=3,de=3*le}he.img=me,he.bpl=de,he.bpp=Ne}return{ctype:F,depth:B,plte:se,frames:X}}function u(b,m,x,w,A,S,N){const _=Uint8Array,g=Uint32Array,y=new _(b[A-1]),M=new g(b[A-1]),F=A+1<b.length?new _(b[A+1]):null,B=new _(b[A]),Q=new g(B.buffer);let $=m,q=x,z=-1,L=-1;for(let ce=0;ce<S.height;ce++)for(let se=0;se<S.width;se++){const ne=S.x+se,K=S.y+ce,he=K*m+ne,le=Q[he];le==0||w[A-1].dispose==0&&M[he]==le&&(F==null||F[4*he+3]!=0)||(ne<$&&($=ne),ne>z&&(z=ne),K<q&&(q=K),K>L&&(L=K))}z==-1&&($=q=z=L=0),N&&((1&$)==1&&$--,(1&q)==1&&q--),S={x:$,y:q,width:z-$+1,height:L-q+1};const X=w[A];X.rect=S,X.blend=1,X.img=new Uint8Array(S.width*S.height*4),w[A-1].dispose==0?(t(y,m,x,X.img,S.width,S.height,-S.x,-S.y,0),d(B,m,x,X.img,S)):t(B,m,x,X.img,S.width,S.height,-S.x,-S.y,0)}function d(b,m,x,w,A){t(b,m,x,w,A.width,A.height,-A.x,-A.y,2)}function p(b,m,x,w,A,S,N){const _=[];let g,y=[0,1,2,3,4];S!=-1?y=[S]:(m*w>5e5||x==1)&&(y=[0]),N&&(g={level:0});const M=Qc;for(var F=0;F<y.length;F++){for(let $=0;$<m;$++)C(A,b,$,w,x,y[F]);_.push(M.deflate(A,g))}let B,Q=1e9;for(F=0;F<_.length;F++)_[F].length<Q&&(B=F,Q=_[F].length);return _[B]}function C(b,m,x,w,A,S){const N=x*w;let _=N+x;if(b[_]=S,_++,S==0)if(w<500)for(var g=0;g<w;g++)b[_+g]=m[N+g];else b.set(new Uint8Array(m.buffer,N,w),_);else if(S==1){for(g=0;g<A;g++)b[_+g]=m[N+g];for(g=A;g<w;g++)b[_+g]=m[N+g]-m[N+g-A]+256&255}else if(x==0){for(g=0;g<A;g++)b[_+g]=m[N+g];if(S==2)for(g=A;g<w;g++)b[_+g]=m[N+g];if(S==3)for(g=A;g<w;g++)b[_+g]=m[N+g]-(m[N+g-A]>>1)+256&255;if(S==4)for(g=A;g<w;g++)b[_+g]=m[N+g]-r(m[N+g-A],0,0)+256&255}else{if(S==2)for(g=0;g<w;g++)b[_+g]=m[N+g]+256-m[N+g-w]&255;if(S==3){for(g=0;g<A;g++)b[_+g]=m[N+g]+256-(m[N+g-w]>>1)&255;for(g=A;g<w;g++)b[_+g]=m[N+g]+256-(m[N+g-w]+m[N+g-A]>>1)&255}if(S==4){for(g=0;g<A;g++)b[_+g]=m[N+g]+256-r(0,m[N+g-w],0)&255;for(g=A;g<w;g++)b[_+g]=m[N+g]+256-r(m[N+g-A],m[N+g-w],m[N+g-A-w])&255}}}function I(b,m){const x=new Uint8Array(b),w=x.slice(0),A=new Uint32Array(w.buffer),S=k(w,m),N=S[0],_=S[1],g=x.length,y=new Uint8Array(g>>2);let M;if(x.length<2e7)for(var F=0;F<g;F+=4)M=P(N,B=x[F]*(1/255),Q=x[F+1]*(1/255),$=x[F+2]*(1/255),q=x[F+3]*(1/255)),y[F>>2]=M.ind,A[F>>2]=M.est.rgba;else for(F=0;F<g;F+=4){var B=x[F]*.00392156862745098,Q=x[F+1]*(1/255),$=x[F+2]*(1/255),q=x[F+3]*(1/255);for(M=N;M.left;)M=D(M.est,B,Q,$,q)<=0?M.left:M.right;y[F>>2]=M.ind,A[F>>2]=M.est.rgba}return{abuf:w.buffer,inds:y,plte:_}}function k(b,m,x){x==null&&(x=1e-4);const w=new Uint32Array(b.buffer),A={i0:0,i1:b.length,bst:null,est:null,tdst:0,left:null,right:null};A.bst=U(b,A.i0,A.i1),A.est=T(A.bst);const S=[A];for(;S.length<m;){let _=0,g=0;for(var N=0;N<S.length;N++)S[N].est.L>_&&(_=S[N].est.L,g=N);if(_<x)break;const y=S[g],M=E(b,w,y.i0,y.i1,y.est.e,y.est.eMq255);if(y.i0>=M||y.i1<=M){y.est.L=0;continue}const F={i0:y.i0,i1:M,bst:null,est:null,tdst:0,left:null,right:null};F.bst=U(b,F.i0,F.i1),F.est=T(F.bst);const B={i0:M,i1:y.i1,bst:null,est:null,tdst:0,left:null,right:null};for(B.bst={R:[],m:[],N:y.bst.N-F.bst.N},N=0;N<16;N++)B.bst.R[N]=y.bst.R[N]-F.bst.R[N];for(N=0;N<4;N++)B.bst.m[N]=y.bst.m[N]-F.bst.m[N];B.est=T(B.bst),y.left=F,y.right=B,S[g]=F,S.push(B)}for(S.sort(((_,g)=>g.bst.N-_.bst.N)),N=0;N<S.length;N++)S[N].ind=N;return[A,S]}function P(b,m,x,w,A){if(b.left==null)return b.tdst=(function(F,B,Q,$,q){const z=B-F[0],L=Q-F[1],X=$-F[2],ce=q-F[3];return z*z+L*L+X*X+ce*ce})(b.est.q,m,x,w,A),b;const S=D(b.est,m,x,w,A);let N=b.left,_=b.right;S>0&&(N=b.right,_=b.left);const g=P(N,m,x,w,A);if(g.tdst<=S*S)return g;const y=P(_,m,x,w,A);return y.tdst<g.tdst?y:g}function D(b,m,x,w,A){const{e:S}=b;return S[0]*m+S[1]*x+S[2]*w+S[3]*A-b.eMq}function E(b,m,x,w,A,S){for(w-=4;x<w;){for(;j(b,x,A)<=S;)x+=4;for(;j(b,w,A)>S;)w-=4;if(x>=w)break;const N=m[x>>2];m[x>>2]=m[w>>2],m[w>>2]=N,x+=4,w-=4}for(;j(b,x,A)>S;)x-=4;return x+4}function j(b,m,x){return b[m]*x[0]+b[m+1]*x[1]+b[m+2]*x[2]+b[m+3]*x[3]}function U(b,m,x){const w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=[0,0,0,0],S=x-m>>2;for(let N=m;N<x;N+=4){const _=b[N]*.00392156862745098,g=b[N+1]*(1/255),y=b[N+2]*(1/255),M=b[N+3]*(1/255);A[0]+=_,A[1]+=g,A[2]+=y,A[3]+=M,w[0]+=_*_,w[1]+=_*g,w[2]+=_*y,w[3]+=_*M,w[5]+=g*g,w[6]+=g*y,w[7]+=g*M,w[10]+=y*y,w[11]+=y*M,w[15]+=M*M}return w[4]=w[1],w[8]=w[2],w[9]=w[6],w[12]=w[3],w[13]=w[7],w[14]=w[11],{R:w,m:A,N:S}}function T(b){const{R:m}=b,{m:x}=b,{N:w}=b,A=x[0],S=x[1],N=x[2],_=x[3],g=w==0?0:1/w,y=[m[0]-A*A*g,m[1]-A*S*g,m[2]-A*N*g,m[3]-A*_*g,m[4]-S*A*g,m[5]-S*S*g,m[6]-S*N*g,m[7]-S*_*g,m[8]-N*A*g,m[9]-N*S*g,m[10]-N*N*g,m[11]-N*_*g,m[12]-_*A*g,m[13]-_*S*g,m[14]-_*N*g,m[15]-_*_*g],M=y,F=O;let B=[Math.random(),Math.random(),Math.random(),Math.random()],Q=0,$=0;if(w!=0)for(let z=0;z<16&&(B=F.multVec(M,B),$=Math.sqrt(F.dot(B,B)),B=F.sml(1/$,B),!(z!=0&&Math.abs($-Q)<1e-9));z++)Q=$;const q=[A*g,S*g,N*g,_*g];return{Cov:y,q,e:B,L:Q,eMq255:F.dot(F.sml(255,q),B),eMq:F.dot(B,q),rgba:(Math.round(255*q[3])<<24|Math.round(255*q[2])<<16|Math.round(255*q[1])<<8|Math.round(255*q[0])<<0)>>>0}}var O={multVec:(b,m)=>[b[0]*m[0]+b[1]*m[1]+b[2]*m[2]+b[3]*m[3],b[4]*m[0]+b[5]*m[1]+b[6]*m[2]+b[7]*m[3],b[8]*m[0]+b[9]*m[1]+b[10]*m[2]+b[11]*m[3],b[12]*m[0]+b[13]*m[1]+b[14]*m[2]+b[15]*m[3]],dot:(b,m)=>b[0]*m[0]+b[1]*m[1]+b[2]*m[2]+b[3]*m[3],sml:(b,m)=>[b*m[0],b*m[1],b*m[2],b*m[3]]};dt.encode=function(m,x,w,A,S,N,_){A==null&&(A=0),_==null&&(_=!1);const g=c(m,x,w,A,[!1,!1,!1,0,_,!1]);return h(g,-1),f(g,x,w,S,N)},dt.encodeLL=function(m,x,w,A,S,N,_,g){const y={ctype:0+(A==1?0:2)+(S==0?0:4),depth:N,frames:[]},M=(A+S)*N,F=M*x;for(let B=0;B<m.length;B++)y.frames.push({rect:{x:0,y:0,width:x,height:w},img:new Uint8Array(m[B]),blend:0,dispose:1,bpp:Math.ceil(M/8),bpl:Math.ceil(F/8)});return h(y,0,!0),f(y,x,w,_,g)},dt.encode.compress=c,dt.encode.dither=l,dt.quantize=I,dt.quantize.getKDtree=k,dt.quantize.getNearest=P})();const ia={toArrayBuffer(t,e){const r=t.width,s=t.height,i=r<<2,a=t.getContext("2d").getImageData(0,0,r,s),o=new Uint32Array(a.data.buffer),l=(32*r+31)/32<<2,f=l*s,h=122+f,c=new ArrayBuffer(h),u=new DataView(c),d=1<<20;let p,C,I,k,P=d,D=0,E=0,j=0;function U(b){u.setUint16(E,b,!0),E+=2}function T(b){u.setUint32(E,b,!0),E+=4}function O(b){E+=b}U(19778),T(h),O(4),T(122),T(108),T(r),T(-s>>>0),U(1),U(32),T(3),T(f),T(2835),T(2835),O(8),T(16711680),T(65280),T(255),T(4278190080),T(1466527264),(function b(){for(;D<s&&P>0;){for(k=122+D*l,p=0;p<i;)P--,C=o[j++],I=C>>>24,u.setUint32(k+p,C<<8|I),p+=4;D++}j<o.length?(P=d,setTimeout(b,ia._dly)):e(c)})()},toBlob(t,e){this.toArrayBuffer(t,(r=>{e(new Blob([r],{type:"image/bmp"}))}))},_dly:9};var Ke={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},Hc={[Ke.CHROME]:16384,[Ke.FIREFOX]:11180,[Ke.DESKTOP_SAFARI]:16384,[Ke.IE]:8192,[Ke.IOS]:4096,[Ke.ETC]:8192};const Cs=typeof window<"u",aa=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,lr=Cs&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Wc=(Cs||aa)&&(lr&&lr.getOriginalSymbol(window,"File")||typeof File<"u"&&File),oa=(Cs||aa)&&(lr&&lr.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function _s(t,e,r=Date.now()){return new Promise((s=>{const i=t.split(","),a=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let l=o.length;const f=new Uint8Array(l);for(;l--;)f[l]=o.charCodeAt(l);const h=new Blob([f],{type:a});h.name=e,h.lastModified=r,s(h)}))}function la(t){return new Promise(((e,r)=>{const s=new oa;s.onload=()=>e(s.result),s.onerror=i=>r(i),s.readAsDataURL(t)}))}function ca(t){return new Promise(((e,r)=>{const s=new Image;s.onload=()=>e(s),s.onerror=i=>r(i),s.src=t}))}function zt(){if(zt.cachedResult!==void 0)return zt.cachedResult;let t=Ke.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Ke.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Ke.IOS:/Safari/i.test(e)?t=Ke.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Ke.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Ke.IE),zt.cachedResult=t,zt.cachedResult}function ua(t,e){const r=zt(),s=Hc[r];let i=t,a=e,o=i*a;const l=i>a?a/i:i/a;for(;o>s*s;){const f=(s+i)/2,h=(s+a)/2;f<h?(a=h,i=h*l):(a=f*l,i=f),o=i*a}return{width:i,height:a}}function _r(t,e){let r,s;try{if(r=new OffscreenCanvas(t,e),s=r.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),s=r.getContext("2d")}return r.width=t,r.height=e,[r,s]}function da(t,e){const{width:r,height:s}=ua(t.width,t.height),[i,a]=_r(r,s);return e&&/jpe?g/.test(e)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(t,0,0,i.width,i.height),i}function tr(){return tr.cachedResult!==void 0||(tr.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),tr.cachedResult}function cr(t,e={}){return new Promise((function(r,s){let i,a;var o=function(){try{return a=da(i,e.fileType||t.type),r([i,a])}catch(f){return s(f)}},l=function(f){try{var h=function(c){try{throw c}catch(u){return s(u)}};try{let c;return la(t).then((function(u){try{return c=u,ca(c).then((function(d){try{return i=d,(function(){try{return o()}catch(p){return s(p)}})()}catch(p){return h(p)}}),h)}catch(d){return h(d)}}),h)}catch(c){h(c)}}catch(c){return s(c)}};try{if(tr()||[Ke.DESKTOP_SAFARI,Ke.MOBILE_SAFARI].includes(zt()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then((function(f){try{return i=f,o()}catch{return l()}}),l)}catch{l()}}))}function ur(t,e,r,s,i=1){return new Promise((function(a,o){let l;if(e==="image/png"){let h,c,u;return h=t.getContext("2d"),{data:c}=h.getImageData(0,0,t.width,t.height),u=dt.encode([c.buffer],t.width,t.height,4096*i),l=new Blob([u],{type:e}),l.name=r,l.lastModified=s,f.call(this)}{let h=function(){return f.call(this)};if(e==="image/bmp")return new Promise((c=>ia.toBlob(t,c))).then((function(c){try{return l=c,l.name=r,l.lastModified=s,h.call(this)}catch(u){return o(u)}}).bind(this),o);{let c=function(){return h.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(u){try{return l=u,l.name=r,l.lastModified=s,c.call(this)}catch(d){return o(d)}}).bind(this),o);{let u;return u=t.toDataURL(e,i),_s(u,r,s).then((function(d){try{return l=d,c.call(this)}catch(p){return o(p)}}).bind(this),o)}}}function f(){return a(l)}}))}function xt(t){t.width=0,t.height=0}function Jt(){return new Promise((function(t,e){let r,s,i,a;return Jt.cachedResult!==void 0?t(Jt.cachedResult):_s("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(o){try{return r=o,cr(r).then((function(l){try{return s=l[1],ur(s,r.type,r.name,r.lastModified).then((function(f){try{return i=f,xt(s),cr(i).then((function(h){try{return a=h[0],Jt.cachedResult=a.width===1&&a.height===2,t(Jt.cachedResult)}catch(c){return e(c)}}),e)}catch(h){return e(h)}}),e)}catch(f){return e(f)}}),e)}catch(l){return e(l)}}),e)}))}function fa(t){return new Promise(((e,r)=>{const s=new oa;s.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return e(-2);const o=a.byteLength;let l=2;for(;l<o;){if(a.getUint16(l+2,!1)<=8)return e(-1);const f=a.getUint16(l,!1);if(l+=2,f==65505){if(a.getUint32(l+=2,!1)!=1165519206)return e(-1);const h=a.getUint16(l+=6,!1)==18761;l+=a.getUint32(l+4,h);const c=a.getUint16(l,h);l+=2;for(let u=0;u<c;u++)if(a.getUint16(l+12*u,h)==274)return e(a.getUint16(l+12*u+8,h))}else{if((65280&f)!=65280)break;l+=a.getUint16(l,!1)}}return e(-1)},s.onerror=i=>r(i),s.readAsArrayBuffer(t)}))}function ha(t,e){const{width:r}=t,{height:s}=t,{maxWidthOrHeight:i}=e;let a,o=t;return isFinite(i)&&(r>i||s>i)&&([o,a]=_r(r,s),r>s?(o.width=i,o.height=s/r*i):(o.width=r/s*i,o.height=i),a.drawImage(t,0,0,o.width,o.height),xt(t)),o}function ma(t,e){const{width:r}=t,{height:s}=t,[i,a]=_r(r,s);switch(e>4&&e<9?(i.width=s,i.height=r):(i.width=r,i.height=s),e){case 2:a.transform(-1,0,0,1,r,0);break;case 3:a.transform(-1,0,0,-1,r,s);break;case 4:a.transform(1,0,0,-1,0,s);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,s,0);break;case 7:a.transform(0,-1,-1,0,s,r);break;case 8:a.transform(0,-1,1,0,0,r)}return a.drawImage(t,0,0,r,s),xt(t),i}function ei(t,e,r=0){return new Promise((function(s,i){let a,o,l,f,h,c,u,d,p,C,I,k,P,D,E,j,U,T,O,b;function m(w=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;a+=w,e.onProgress(Math.min(a,100))}function x(w){if(e.signal&&e.signal.aborted)throw e.signal.reason;a=Math.min(Math.max(w,a),100),e.onProgress(a)}return a=r,o=e.maxIteration||10,l=1024*e.maxSizeMB*1024,m(),cr(t,e).then((function(w){try{return[,f]=w,m(),h=ha(f,e),m(),new Promise((function(A,S){var N;if(!(N=e.exifOrientation))return fa(t).then((function(g){try{return N=g,_.call(this)}catch(y){return S(y)}}).bind(this),S);function _(){return A(N)}return _.call(this)})).then((function(A){try{return c=A,m(),Jt().then((function(S){try{return u=S?h:ma(h,c),m(),d=e.initialQuality||1,p=e.fileType||t.type,ur(u,p,t.name,t.lastModified,d).then((function(N){try{{let g=function(){if(o--&&(E>l||E>P)){let M,F;return M=b?.95*O.width:O.width,F=b?.95*O.height:O.height,[U,T]=_r(M,F),T.drawImage(O,0,0,M,F),d*=p==="image/png"?.85:.95,ur(U,p,t.name,t.lastModified,d).then((function(B){try{return j=B,xt(O),O=U,E=j.size,x(Math.min(99,Math.floor((D-E)/(D-l)*100))),g}catch(Q){return i(Q)}}),i)}return[1]},y=function(){return xt(O),xt(U),xt(h),xt(u),xt(f),x(100),s(j)};if(C=N,m(),I=C.size>l,k=C.size>t.size,!I&&!k)return x(100),s(C);var _;return P=t.size,D=C.size,E=D,O=u,b=!e.alwaysKeepResolution&&I,(_=(function(M){for(;M;){if(M.then)return void M.then(_,i);try{if(M.pop){if(M.length)return M.pop()?y.call(this):M;M=g}else M=M.call(this)}catch(F){return i(F)}}}).bind(this))(g)}}catch(g){return i(g)}}).bind(this),i)}catch(N){return i(N)}}).bind(this),i)}catch(S){return i(S)}}).bind(this),i)}catch(A){return i(A)}}).bind(this),i)}))}const Xc=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Lr;function Kc(t,e){return new Promise(((r,s)=>{Lr||(Lr=(function(o){const l=[];return l.push(o),URL.createObjectURL(new Blob(l))})(Xc));const i=new Worker(Lr);i.addEventListener("message",(function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return s(new Error(o.data.error)),void i.terminate();r(o.data.file),i.terminate()}else e.onProgress(o.data.progress)})),i.addEventListener("error",s),e.signal&&e.signal.addEventListener("abort",(()=>{s(e.signal.reason),i.terminate()})),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function ze(t,e){return new Promise((function(r,s){let i,a,o,l,f,h;if(i={...e},o=0,{onProgress:l}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,f=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=p=>{o=p,typeof l=="function"&&l(o)},!(t instanceof Blob||t instanceof Wc))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return s(new Error("The file given is not an image"));if(h=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!f||typeof Worker!="function"||h)return ei(t,i).then((function(p){try{return a=p,d.call(this)}catch(C){return s(C)}}).bind(this),s);var c=(function(){try{return d.call(this)}catch(p){return s(p)}}).bind(this),u=function(p){try{return ei(t,i).then((function(C){try{return a=C,c()}catch(I){return s(I)}}),s)}catch(C){return s(C)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Kc(t,i).then((function(p){try{return a=p,c()}catch{return u()}}),u)}catch{u()}function d(){try{a.name=t.name,a.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(a=sa(t,a))}catch{}return r(a)}}))}ze.getDataUrlFromFile=la,ze.getFilefromDataUrl=_s,ze.loadImage=ca,ze.drawImageInCanvas=da,ze.drawFileInCanvas=cr,ze.canvasToFile=ur,ze.getExifOrientation=fa,ze.handleMaxWidthOrHeight=ha,ze.followExifOrientation=ma,ze.cleanupCanvasMemory=xt,ze.isAutoOrientationInBrowser=Jt,ze.approximateBelowMaximumCanvasSizeOfBrowser=ua,ze.copyExifWithoutOrientation=sa,ze.getBrowserName=zt,ze.version="2.0.2";var xn={exports:{}},Yc=xn.exports,ti;function Jc(){return ti||(ti=1,(function(t,e){(function(){var r=function(m){if(m instanceof r)return m;if(!(this instanceof r))return new r(m);this.EXIFwrapped=m};t.exports&&(e=t.exports=r),e.EXIF=r;var s=r.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},i=r.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},a=r.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},o=r.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},l=r.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function f(m){return!!m.exifdata}function h(m,x){x=x||m.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",m=m.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var w=atob(m),A=w.length,S=new ArrayBuffer(A),N=new Uint8Array(S),_=0;_<A;_++)N[_]=w.charCodeAt(_);return S}function c(m,x){var w=new XMLHttpRequest;w.open("GET",m,!0),w.responseType="blob",w.onload=function(A){(this.status==200||this.status===0)&&x(this.response)},w.send()}function u(m,x){function w(_){var g=d(_);m.exifdata=g||{};var y=p(_);if(m.iptcdata=y||{},r.isXmpEnabled){var M=T(_);m.xmpdata=M||{}}x&&x.call(m)}if(m.src)if(/^data\:/i.test(m.src)){var A=h(m.src);w(A)}else if(/^blob\:/i.test(m.src)){var S=new FileReader;S.onload=function(_){w(_.target.result)},c(m.src,function(_){S.readAsArrayBuffer(_)})}else{var N=new XMLHttpRequest;N.onload=function(){if(this.status==200||this.status===0)w(N.response);else throw"Could not load image";N=null},N.open("GET",m.src,!0),N.responseType="arraybuffer",N.send(null)}else if(self.FileReader&&(m instanceof self.Blob||m instanceof self.File)){var S=new FileReader;S.onload=function(g){w(g.target.result)},S.readAsArrayBuffer(m)}}function d(m){var x=new DataView(m);if(x.getUint8(0)!=255||x.getUint8(1)!=216)return!1;for(var w=2,A=m.byteLength,S;w<A;){if(x.getUint8(w)!=255)return!1;if(S=x.getUint8(w+1),S==225)return U(x,w+4,x.getUint16(w+2)-2);w+=2+x.getUint16(w+2)}}function p(m){var x=new DataView(m);if(x.getUint8(0)!=255||x.getUint8(1)!=216)return!1;for(var w=2,A=m.byteLength,S=function(y,M){return y.getUint8(M)===56&&y.getUint8(M+1)===66&&y.getUint8(M+2)===73&&y.getUint8(M+3)===77&&y.getUint8(M+4)===4&&y.getUint8(M+5)===4};w<A;){if(S(x,w)){var N=x.getUint8(w+7);N%2!==0&&(N+=1),N===0&&(N=4);var _=w+8+N,g=x.getUint16(w+6+N);return I(m,_,g)}w++}}var C={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function I(m,x,w){for(var A=new DataView(m),S={},N,_,g,y,M=x;M<x+w;)A.getUint8(M)===28&&A.getUint8(M+1)===2&&(y=A.getUint8(M+2),y in C&&(g=A.getInt16(M+3),_=C[y],N=j(A,M+5,g),S.hasOwnProperty(_)?S[_]instanceof Array?S[_].push(N):S[_]=[S[_],N]:S[_]=N)),M++;return S}function k(m,x,w,A,S){var N=m.getUint16(w,!S),_={},g,y,M;for(M=0;M<N;M++)g=w+M*12+2,y=A[m.getUint16(g,!S)],_[y]=P(m,g,x,w,S);return _}function P(m,x,w,A,S){var N=m.getUint16(x+2,!S),_=m.getUint32(x+4,!S),g=m.getUint32(x+8,!S)+w,y,M,F,B,Q,$;switch(N){case 1:case 7:if(_==1)return m.getUint8(x+8,!S);for(y=_>4?g:x+8,M=[],B=0;B<_;B++)M[B]=m.getUint8(y+B);return M;case 2:return y=_>4?g:x+8,j(m,y,_-1);case 3:if(_==1)return m.getUint16(x+8,!S);for(y=_>2?g:x+8,M=[],B=0;B<_;B++)M[B]=m.getUint16(y+2*B,!S);return M;case 4:if(_==1)return m.getUint32(x+8,!S);for(M=[],B=0;B<_;B++)M[B]=m.getUint32(g+4*B,!S);return M;case 5:if(_==1)return Q=m.getUint32(g,!S),$=m.getUint32(g+4,!S),F=new Number(Q/$),F.numerator=Q,F.denominator=$,F;for(M=[],B=0;B<_;B++)Q=m.getUint32(g+8*B,!S),$=m.getUint32(g+4+8*B,!S),M[B]=new Number(Q/$),M[B].numerator=Q,M[B].denominator=$;return M;case 9:if(_==1)return m.getInt32(x+8,!S);for(M=[],B=0;B<_;B++)M[B]=m.getInt32(g+4*B,!S);return M;case 10:if(_==1)return m.getInt32(g,!S)/m.getInt32(g+4,!S);for(M=[],B=0;B<_;B++)M[B]=m.getInt32(g+8*B,!S)/m.getInt32(g+4+8*B,!S);return M}}function D(m,x,w){var A=m.getUint16(x,!w);return m.getUint32(x+2+A*12,!w)}function E(m,x,w,A){var S=D(m,x+w,A);if(S){if(S>m.byteLength)return{}}else return{};var N=k(m,x,x+S,o,A);if(N.Compression)switch(N.Compression){case 6:if(N.JpegIFOffset&&N.JpegIFByteCount){var _=x+N.JpegIFOffset,g=N.JpegIFByteCount;N.blob=new Blob([new Uint8Array(m.buffer,_,g)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",N.Compression)}else N.PhotometricInterpretation==2&&console.log("Thumbnail image format is RGB, which is not implemented.");return N}function j(m,x,w){var A="";for(n=x;n<x+w;n++)A+=String.fromCharCode(m.getUint8(n));return A}function U(m,x){if(j(m,x,4)!="Exif")return!1;var w,A,S,N,_,g=x+6;if(m.getUint16(g)==18761)w=!1;else if(m.getUint16(g)==19789)w=!0;else return!1;if(m.getUint16(g+2,!w)!=42)return!1;var y=m.getUint32(g+4,!w);if(y<8)return!1;if(A=k(m,g,g+y,i,w),A.ExifIFDPointer){N=k(m,g,g+A.ExifIFDPointer,s,w);for(S in N){switch(S){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":N[S]=l[S][N[S]];break;case"ExifVersion":case"FlashpixVersion":N[S]=String.fromCharCode(N[S][0],N[S][1],N[S][2],N[S][3]);break;case"ComponentsConfiguration":N[S]=l.Components[N[S][0]]+l.Components[N[S][1]]+l.Components[N[S][2]]+l.Components[N[S][3]];break}A[S]=N[S]}}if(A.GPSInfoIFDPointer){_=k(m,g,g+A.GPSInfoIFDPointer,a,w);for(S in _)S==="GPSVersionID"&&(_[S]=_[S][0]+"."+_[S][1]+"."+_[S][2]+"."+_[S][3]),A[S]=_[S]}return A.thumbnail=E(m,g,y,w),A}function T(m){if("DOMParser"in self){var x=new DataView(m);if(x.getUint8(0)!=255||x.getUint8(1)!=216)return!1;for(var w=2,A=m.byteLength,S=new DOMParser;w<A-4;)if(j(x,w,4)=="http"){var N=w-1,_=x.getUint16(w-2)-1,g=j(x,N,_),y=g.indexOf("xmpmeta>")+8;g=g.substring(g.indexOf("<x:xmpmeta"),y);var M=g.indexOf("x:xmpmeta")+10;g=g.slice(0,M)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+g.slice(M);var F=S.parseFromString(g,"text/xml");return b(F)}else w++}}function O(m){var x={};if(m.nodeType==1){if(m.attributes.length>0){x["@attributes"]={};for(var w=0;w<m.attributes.length;w++){var A=m.attributes.item(w);x["@attributes"][A.nodeName]=A.nodeValue}}}else if(m.nodeType==3)return m.nodeValue;if(m.hasChildNodes())for(var S=0;S<m.childNodes.length;S++){var N=m.childNodes.item(S),_=N.nodeName;if(x[_]==null)x[_]=O(N);else{if(x[_].push==null){var g=x[_];x[_]=[],x[_].push(g)}x[_].push(O(N))}}return x}function b(m){try{var x={};if(m.children.length>0)for(var w=0;w<m.children.length;w++){var A=m.children.item(w),S=A.attributes;for(var N in S){var _=S[N],g=_.nodeName,y=_.nodeValue;g!==void 0&&(x[g]=y)}var M=A.nodeName;if(typeof x[M]>"u")x[M]=O(A);else{if(typeof x[M].push>"u"){var F=x[M];x[M]=[],x[M].push(F)}x[M].push(O(A))}}else x=m.textContent;return x}catch(B){console.log(B.message)}}r.enableXmp=function(){r.isXmpEnabled=!0},r.disableXmp=function(){r.isXmpEnabled=!1},r.getData=function(m,x){return(self.Image&&m instanceof self.Image||self.HTMLImageElement&&m instanceof self.HTMLImageElement)&&!m.complete?!1:(f(m)?x&&x.call(m):u(m,x),!0)},r.getTag=function(m,x){if(f(m))return m.exifdata[x]},r.getIptcTag=function(m,x){if(f(m))return m.iptcdata[x]},r.getAllTags=function(m){if(!f(m))return{};var x,w=m.exifdata,A={};for(x in w)w.hasOwnProperty(x)&&(A[x]=w[x]);return A},r.getAllIptcTags=function(m){if(!f(m))return{};var x,w=m.iptcdata,A={};for(x in w)w.hasOwnProperty(x)&&(A[x]=w[x]);return A},r.pretty=function(m){if(!f(m))return"";var x,w=m.exifdata,A="";for(x in w)w.hasOwnProperty(x)&&(typeof w[x]=="object"?w[x]instanceof Number?A+=x+" : "+w[x]+" ["+w[x].numerator+"/"+w[x].denominator+`]\r
`:A+=x+" : ["+w[x].length+` values]\r
`:A+=x+" : "+w[x]+`\r
`);return A},r.readFromBinaryFile=function(m){return d(m)}}).call(Yc)})(xn,xn.exports)),xn.exports}var ni=Jc(),Ns="Progress",Ts=100,[eu,Wm]=$n(Ns),[tu,nu]=eu(Ns),ga=R.forwardRef((t,e)=>{const{__scopeProgress:r,value:s=null,max:i,getValueLabel:a=ru,...o}=t;(i||i===0)&&!ri(i)&&console.error(su(`${i}`,"Progress"));const l=ri(i)?i:Ts;s!==null&&!si(s,l)&&console.error(iu(`${s}`,"Progress"));const f=si(s,l)?s:null,h=dr(f)?a(f,l):void 0;return v.jsx(tu,{scope:r,value:f,max:l,children:v.jsx(Je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":dr(f)?f:void 0,"aria-valuetext":h,role:"progressbar","data-state":ya(f,l),"data-value":f??void 0,"data-max":l,...o,ref:e})})});ga.displayName=Ns;var pa="ProgressIndicator",va=R.forwardRef((t,e)=>{const{__scopeProgress:r,...s}=t,i=nu(pa,r);return v.jsx(Je.div,{"data-state":ya(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:e})});va.displayName=pa;function ru(t,e){return`${Math.round(t/e*100)}%`}function ya(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function dr(t){return typeof t=="number"}function ri(t){return dr(t)&&!isNaN(t)&&t>0}function si(t,e){return dr(t)&&!isNaN(t)&&t<=e&&t>=0}function su(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ts}\`.`}function iu(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ts} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var xa=ga,au=va;const ba=R.forwardRef(({className:t,value:e,...r},s)=>v.jsx(xa,{ref:s,className:ke("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:v.jsx(au,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));ba.displayName=xa.displayName;function ou({image:t,onClose:e,onSave:r}){const[s,i]=R.useState(0),[a,o]=R.useState(""),[l,f]=R.useState(!1),h=()=>{i(d=>(d+90)%360)},c=()=>{const d={...t};r(d)},u=()=>{f(!l)};return v.jsx(Wo,{open:!0,onOpenChange:e,children:v.jsxs(Xo,{className:"max-w-4xl max-h-[90vh] overflow-auto",children:[v.jsx(Ko,{children:v.jsx(Yo,{children:"Edit Image"})}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"relative bg-muted rounded-lg overflow-hidden",children:[v.jsx("img",{src:t.url,alt:"Preview",className:"w-full max-h-96 object-contain",style:{transform:`rotate(${s}deg)`,transition:"transform 0.3s ease"}}),l&&v.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-primary bg-primary/10 flex items-center justify-center",children:v.jsx("p",{className:"text-primary font-medium",children:"Crop mode - drag to select area"})})]}),v.jsxs("div",{className:"flex flex-wrap gap-2",children:[v.jsxs(De,{variant:"outline",size:"sm",onClick:h,children:[v.jsx(_o,{className:"mr-2 h-4 w-4"}),"Rotate"]}),v.jsxs(De,{variant:"outline",size:"sm",onClick:u,children:[v.jsx(Ci,{className:"mr-2 h-4 w-4"}),l?"Exit Crop":"Crop"]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(rt,{htmlFor:"alt-text",children:"Alt Text (optional)"}),v.jsx(ji,{id:"alt-text",placeholder:"Describe what's in this image...",value:a,onChange:d=>o(d.target.value)}),v.jsx("p",{className:"text-xs text-muted-foreground",children:"Help make your content accessible by describing the image content"})]}),t.recognized&&t.recognized.length>0&&v.jsxs("div",{className:"space-y-2",children:[v.jsx(rt,{children:"Detected Ingredients"}),v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:t.recognized.map((d,p)=>v.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded text-sm",children:[v.jsx("span",{children:d.name}),v.jsxs("span",{className:"text-muted-foreground",children:[Math.round(d.confidence*100),"%"]})]},p))})]})]}),v.jsxs(Jo,{className:"gap-2",children:[v.jsxs(De,{variant:"outline",onClick:e,children:[v.jsx(dn,{className:"mr-2 h-4 w-4"}),"Cancel"]}),v.jsxs(De,{onClick:c,children:[v.jsx(No,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})})}function ii(){return Math.random().toString(36).substr(2,9)}async function lu(t){try{const e=await new Promise(i=>{ni.getData(t,function(){i(ni.getAllTags(this))})}),s=await ze(t,{maxSizeMB:1,maxWidthOrHeight:2048,useWebWorker:!0,preserveExif:!1});return new File([s],t.name,{type:s.type,lastModified:Date.now()})}catch(e){return console.warn("Image preprocessing failed, using original:",e),t}}function cu(t){return["image/jpeg","image/png","image/webp"].includes(t.type)?t.size>5*1024*1024?"File is too large. Maximum size is 5MB.":null:"Invalid file type. Only JPEG, PNG, and WebP images are supported."}function uu({maxImages:t=5,maxSizeMB:e=5,onUploadComplete:r,onAttach:s,autoDetect:i=!1,accept:a="image/*"}){const[o,l]=R.useState([]),[f,h]=R.useState([]),[c,u]=R.useState(null),[d,p]=R.useState(!1),C=R.useRef(null),I=R.useRef(null),{toast:k}=Ai(),P=Mr({mutationFn:async g=>Jn.post("/api/uploads/sign",g)}),D=Mr({mutationFn:async g=>Jn.post("/api/uploads/complete",g)}),E=Mr({mutationFn:async g=>Jn.post("/api/recognize-image",{...g,mode:"vision",max_suggestions:5})}),j=R.useCallback((g,y)=>{l(M=>M.map(F=>F.id===g?{...F,...y}:F))},[]),U=async(g,y,M)=>{for(let F=0;F<=100;F+=20)j(g,{progress:F}),await new Promise(B=>setTimeout(B,100));return`https://mock-storage.example.com/images/${g}.jpg`},T=async g=>{const y=ii(),M=cu(g);if(M){k({title:"Upload Error",description:M,variant:"destructive"});return}if(o.length+f.length>=t){k({title:"Upload Limit Reached",description:`Maximum ${t} images allowed.`,variant:"destructive"});return}l(F=>[...F,{id:y,file:g,progress:0,status:"processing"}]);try{j(y,{status:"processing"});const F=await lu(g);j(y,{status:"uploading"});const B=await P.mutateAsync({filename:F.name,contentType:F.type,size:F.size}),Q=await U(y,F,B.uploadUrl),$=await D.mutateAsync({image_id:B.image_id,url:Q}),q={id:B.image_id,url:Q,thumbnailUrl:$.thumbnailUrl};if(i){j(y,{status:"recognizing"});try{const z=await E.mutateAsync({image_id:B.image_id});q.recognized=z.recognized}catch(z){console.warn("Recognition failed:",z)}}h(z=>{const L=[...z,q];return r(L),L}),j(y,{status:"complete"}),setTimeout(()=>{l(z=>z.filter(L=>L.id!==y))},2e3),k({title:"Upload Complete",description:i&&q.recognized?.length?`Found ${q.recognized.length} ingredients!`:"Image uploaded successfully."})}catch(F){j(y,{status:"error",error:F instanceof Error?F.message:"Upload failed"}),k({title:"Upload Failed",description:F instanceof Error?F.message:"An error occurred during upload.",variant:"destructive"})}},O=R.useCallback(g=>{Array.from(g).forEach(T)},[]),b=R.useCallback(g=>{g.preventDefault(),p(!1),g.dataTransfer.files&&O(g.dataTransfer.files)},[O]),m=R.useCallback(g=>{g.preventDefault(),p(!0)},[]),x=R.useCallback(g=>{g.preventDefault(),p(!1)},[]),w=()=>{C.current?.click()},A=()=>{I.current?.click()},S=g=>{g.target.files&&O(g.target.files),g.target.value=""},N=g=>{h(y=>{const M=y.filter(F=>F.id!==g);return r(M),M})},_=(g,y)=>{ii(),g.name,s(y,void 0),k({title:"Ingredient Added",description:`Added ${g.name} to your ingredients.`})};return v.jsxs("div",{className:"space-y-4",children:[v.jsx(wt,{className:ke("border-2 border-dashed transition-colors cursor-pointer",d?"border-primary bg-primary/5":"border-muted-foreground/25",o.length+f.length>=t&&"opacity-50 cursor-not-allowed"),children:v.jsx(Rt,{className:"p-8 text-center",onDrop:b,onDragOver:m,onDragLeave:x,onClick:o.length+f.length<t?w:void 0,children:v.jsxs("div",{className:"space-y-4",children:[d?v.jsx(To,{className:"h-12 w-12 mx-auto text-primary"}):v.jsx(qr,{className:"h-12 w-12 mx-auto text-muted-foreground"}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold mb-2 text-center",children:d?"Drop images here":"Snap your Snacks"}),v.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"Take photos of ingredients or drag and drop images here"}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[v.jsxs(De,{variant:"outline",onClick:g=>{g.stopPropagation(),w()},disabled:o.length+f.length>=t,children:[v.jsx(Ao,{className:"mr-2 h-4 w-4"}),"Choose Photos"]}),v.jsxs(De,{variant:"outline",onClick:g=>{g.stopPropagation(),A()},disabled:o.length+f.length>=t,children:[v.jsx(qr,{className:"mr-2 h-4 w-4"}),"Take Photo"]})]}),v.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["JPEG, PNG, WebP  Max ",e,"MB  ",f.length+o.length,"/",t," images"]})]})]})})}),v.jsx("input",{ref:C,type:"file",accept:a,multiple:!0,onChange:S,className:"hidden","data-testid":"file-input"}),v.jsx("input",{ref:I,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:S,className:"hidden","data-testid":"camera-input"}),o.length>0&&v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:"text-sm font-medium",children:"Uploading..."}),o.map(g=>v.jsxs(wt,{className:"p-3",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("span",{className:"text-sm font-medium truncate flex-1",children:g.file.name}),v.jsx(Ve,{variant:g.status==="error"?"destructive":"secondary",children:g.status})]}),g.status!=="error"&&v.jsx(ba,{value:g.progress,className:"h-2"}),g.error&&v.jsxs("div",{className:"flex items-center gap-2 mt-2 text-destructive text-sm",children:[v.jsx(_i,{className:"h-4 w-4"}),g.error]})]},g.id))]}),f.length>0&&v.jsxs("div",{className:"space-y-4",children:[v.jsx("h4",{className:"text-sm font-medium",children:"Uploaded Images"}),v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:f.map(g=>v.jsxs(wt,{className:"overflow-hidden",children:[v.jsxs("div",{className:"relative",children:[v.jsx("img",{src:g.thumbnailUrl||g.url,alt:"Uploaded ingredient",className:"w-full h-32 object-cover"}),v.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[v.jsx(De,{size:"sm",variant:"secondary",className:"h-6 w-6 p-0",onClick:()=>u(g),children:v.jsx(Ci,{className:"h-3 w-3"})}),v.jsx(De,{size:"sm",variant:"destructive",className:"h-6 w-6 p-0",onClick:()=>N(g.id),children:v.jsx(dn,{className:"h-3 w-3"})})]})]}),g.recognized&&g.recognized.length>0&&v.jsx(Rt,{className:"p-3",children:v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs font-medium",children:"Found ingredients:"}),v.jsx(De,{size:"sm",variant:"outline",className:"h-6 text-xs px-2",onClick:()=>{g.recognized?.forEach(y=>_(y,g.id))},children:"Add All"})]}),v.jsx("div",{className:"flex flex-wrap gap-1",children:g.recognized.map((y,M)=>v.jsxs(De,{size:"sm",variant:"ghost",className:"h-6 text-xs px-2 justify-start",onClick:()=>_(y,g.id),children:[v.jsx(Po,{className:"mr-1 h-3 w-3"}),y.name,v.jsxs(Ve,{variant:"secondary",className:"ml-1 text-xs",children:[Math.round(y.confidence*100),"%"]})]},M))})]})})]},g.id))})]}),c&&v.jsx(ou,{image:c,onClose:()=>u(null),onSave:g=>{h(y=>y.map(M=>M.id===g.id?g:M)),u(null)}})]})}function ai({children:t,container:e}){const[r,s]=R.useState(!1);return R.useEffect(()=>{s(!0)},[]),r?Yt.createPortal(t,e||document.body):null}function du({chip:t,onRemove:e}){const{attributes:r,listeners:s,setNodeRef:i,transform:a,transition:o,isDragging:l}=Bc({id:t.id}),f={transform:Tn.Transform.toString(a),transition:o},h=t.qty&&t.unit?`${t.qty} ${t.unit} ${t.name}`:t.name;return v.jsxs("div",{ref:i,style:f,className:ke("inline-flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-sm font-semibold transition-colors min-w-fit max-w-48","bg-primary text-white hover:bg-primary/90",l&&"opacity-50"),"data-testid":`ingredient-chip-${t.name.toLowerCase()}`,children:[v.jsx("button",{...r,...s,className:"cursor-grab touch-none hover:cursor-grabbing","aria-label":`Drag ${t.name}`,children:v.jsx(Io,{className:"h-3 w-3"})}),v.jsx("span",{children:h}),v.jsx("button",{onClick:()=>e(t.id),className:"ml-1 rounded-full hover:bg-white/20 p-0.5","aria-label":`Remove ${t.name}`,"data-testid":`remove-chip-${t.name.toLowerCase()}`,children:v.jsx(dn,{className:"h-3 w-3"})})]})}const oi="ingredo:search_draft";function li(t){const e=t.trim(),r=e.match(/^(\d+(?:\/\d+)?(?:\.\d+)?)\s*(\w+)?\s+(.+)$/);if(r){const[,s,i,a]=r;return{name:a.trim(),qty:s.trim(),unit:i?.trim()}}return{name:e}}function ci(){return Math.random().toString(36).substring(2,11)}function fu({initialIngredients:t=[],onChange:e,placeholder:r="Add ingredients...",maxItems:s=50,onOpenImageModal:i}){const[a,o]=R.useState(t),[l,f]=R.useState(""),[h,c]=R.useState(!1),[u,d]=R.useState(-1),[p,C]=R.useState(""),[I,k]=R.useState(!1),P=R.useRef(null),D=R.useRef(null);R.useEffect(()=>{try{const _=localStorage.getItem(oi);if(_&&t.length===0){const g=JSON.parse(_);o(g),e(g)}}catch(_){console.warn("Failed to load ingredients from localStorage:",_)}},[]),R.useEffect(()=>{const _=setTimeout(()=>{C(l)},300);return()=>clearTimeout(_)},[l]);const{data:E}=Zr({queryKey:["/api/ingredients",p],enabled:p.length>0&&h,staleTime:300*1e3}),j=E?.suggestions||[];R.useEffect(()=>{try{localStorage.setItem(oi,JSON.stringify(a)),e(a)}catch(_){console.warn("Failed to save ingredients to localStorage:",_)}},[a,e]);const U=vl(zs(ws),zs(xs,{coordinateGetter:Vc})),T=R.useCallback(_=>{if(!_.trim()||a.length>=s)return;const g=li(_),y={id:ci(),...g};a.some(F=>F.name.toLowerCase()===g.name.toLowerCase())||o(F=>[...F,y]),f(""),c(!1),d(-1)},[a,s]),O=R.useCallback(_=>{o(g=>g.filter(y=>y.id!==_))},[]),b=R.useCallback(_=>{_.preventDefault();const y=_.clipboardData.getData("text").split(/[,\n]/).map(M=>M.trim()).filter(M=>M.length>0);if(y.length>1){const M=y.slice(0,s-a.length).map(F=>({id:ci(),...li(F)})).filter(F=>!a.some(B=>B.name.toLowerCase()===F.name.toLowerCase()));o(F=>[...F,...M]),f("")}else y.length===1&&f(y[0])},[a,s]),m=R.useCallback(_=>{if(_.key==="Enter")_.preventDefault(),u>=0&&j[u]?T(j[u].name):l.trim()&&T(l);else if(_.key==="Escape")c(!1),d(-1);else if(_.key==="ArrowDown")_.preventDefault(),d(g=>g<j.length-1?g+1:g);else if(_.key==="ArrowUp")_.preventDefault(),d(g=>g>0?g-1:-1);else if(_.key==="Backspace"&&l===""&&a.length>0){const g=a[a.length-1];O(g.id)}},[u,j,l,T,a,O]),x=R.useCallback(_=>{const{active:g,over:y}=_;y&&g.id!==y.id&&o(M=>{const F=M.findIndex(Q=>Q.id===g.id),B=M.findIndex(Q=>Q.id===y.id);return Ss(M,F,B)})},[]),w=R.useCallback(_=>{T(_.name)},[T]),A=R.useCallback(_=>{_.forEach(g=>{g.recognized&&g.recognized.forEach(y=>{y.confidence>.7&&T(y.name)})})},[T]),S=R.useCallback((_,g)=>{console.log(`Attaching image ${_} to chip at index ${g}`)},[]),N=R.useCallback(()=>{i?i():k(!0)},[i]);return v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"relative",children:[v.jsxs("div",{className:"relative flex min-h-[40px] w-full border border-vintage-warm-brown/50 focus-within:border-vintage-warm-brown focus-within:ring-0 focus-within:ring-offset-0 bg-transparent px-3 py-2 text-sm rounded-md flex-wrap gap-1",children:[v.jsx(Xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-vintage-warm-brown h-4 w-4"}),a.length>0&&v.jsx(xc,{sensors:U,collisionDetection:xl,onDragEnd:x,children:v.jsx(jc,{items:a.map(_=>_.id),strategy:Rc,children:v.jsx("div",{className:"flex flex-wrap gap-1.5 mr-2 max-w-full overflow-hidden",children:a.map(_=>v.jsx(du,{chip:_,onRemove:O},_.id))})})}),v.jsx("input",{ref:P,type:"text",value:l,onChange:_=>{f(_.target.value),c(_.target.value.length>0),d(-1)},onKeyDown:m,onPaste:b,onFocus:()=>{l.length>0&&c(!0)},onBlur:()=>{setTimeout(()=>c(!1),150)},placeholder:a.length===0?r:"",className:"flex-1 bg-transparent outline-none focus:outline-none focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 placeholder:text-muted-foreground pl-10 pr-10 text-sm font-medium",disabled:a.length>=s,"aria-label":"Add ingredients","data-testid":"ingredient-input"}),v.jsx(De,{type:"button",variant:"ghost",size:"sm",onClick:N,className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0 text-vintage-warm-brown","aria-label":"Add photo","data-testid":"add-photo-button",children:v.jsx(qr,{className:"h-4 w-4"})})]}),h&&j.length>0&&v.jsx(ai,{children:v.jsx("div",{ref:D,className:"fixed z-[10001] w-full mt-1 bg-popover border border-border rounded-md shadow-lg max-h-48 overflow-auto",role:"listbox",style:{left:P.current?.getBoundingClientRect().left||0,top:(P.current?.getBoundingClientRect().bottom||0)+4,width:P.current?.getBoundingClientRect().width||"auto"},children:j.slice(0,8).map((_,g)=>v.jsx("button",{type:"button",onClick:()=>w(_),className:ke("w-full px-3 py-2 text-left text-sm hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",u===g&&"bg-accent text-accent-foreground"),role:"option","aria-selected":u===g,"data-testid":`suggestion-${_.name.toLowerCase()}`,children:v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("span",{children:_.name}),_.commonUnit&&v.jsx(Ve,{variant:"secondary",className:"text-xs",children:_.commonUnit})]})},_.name))})})]}),v.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[v.jsx("span",{children:a.length===0?"Type ingredients or paste a list separated by commas":`${a.length}/${s} ingredients`}),v.jsx("span",{children:"Press Enter to add  Drag to reorder"})]}),I&&v.jsx(ai,{children:v.jsx("div",{className:"fixed inset-0 z-[10000] bg-background/80 backdrop-blur-sm",children:v.jsxs("div",{className:"fixed left-[50%] top-[50%] z-[10000] grid w-full max-w-4xl translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 sm:rounded-lg",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold",children:"Upload ingredient photos"}),v.jsx(De,{variant:"ghost",size:"sm",onClick:()=>k(!1),children:v.jsx(dn,{className:"h-4 w-4"})})]}),v.jsx(uu,{maxImages:3,maxSizeMB:5,onUploadComplete:A,onAttach:S,autoDetect:!0})]})})})]})}var Nr="Collapsible",[hu,Xm]=$n(Nr),[mu,As]=hu(Nr),wa=R.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:s,defaultOpen:i,disabled:a,onOpenChange:o,...l}=t,[f,h]=hs({prop:s,defaultProp:i??!1,onChange:o,caller:Nr});return v.jsx(mu,{scope:r,disabled:a,contentId:Vo(),open:f,onOpenToggle:R.useCallback(()=>h(c=>!c),[h]),children:v.jsx(Je.div,{"data-state":Is(f),"data-disabled":a?"":void 0,...l,ref:e})})});wa.displayName=Nr;var Sa="CollapsibleTrigger",Ca=R.forwardRef((t,e)=>{const{__scopeCollapsible:r,...s}=t,i=As(Sa,r);return v.jsx(Je.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Is(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...s,ref:e,onClick:bt(t.onClick,i.onOpenToggle)})});Ca.displayName=Sa;var Ps="CollapsibleContent",_a=R.forwardRef((t,e)=>{const{forceMount:r,...s}=t,i=As(Ps,t.__scopeCollapsible);return v.jsx(Pi,{present:r||i.open,children:({present:a})=>v.jsx(gu,{...s,ref:e,present:a})})});_a.displayName=Ps;var gu=R.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:s,children:i,...a}=t,o=As(Ps,r),[l,f]=R.useState(s),h=R.useRef(null),c=Tt(e,h),u=R.useRef(0),d=u.current,p=R.useRef(0),C=p.current,I=o.open||l,k=R.useRef(I),P=R.useRef(void 0);return R.useEffect(()=>{const D=requestAnimationFrame(()=>k.current=!1);return()=>cancelAnimationFrame(D)},[]),$o(()=>{const D=h.current;if(D){P.current=P.current||{transitionDuration:D.style.transitionDuration,animationName:D.style.animationName},D.style.transitionDuration="0s",D.style.animationName="none";const E=D.getBoundingClientRect();u.current=E.height,p.current=E.width,k.current||(D.style.transitionDuration=P.current.transitionDuration,D.style.animationName=P.current.animationName),f(s)}},[o.open,s]),v.jsx(Je.div,{"data-state":Is(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!I,...a,ref:c,style:{"--radix-collapsible-content-height":d?`${d}px`:void 0,"--radix-collapsible-content-width":C?`${C}px`:void 0,...t.style},children:I&&i})});function Is(t){return t?"open":"closed"}var pu=wa;const vu=pu,yu=Ca,xu=_a;var Na=["PageUp","PageDown"],Ta=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Aa={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gn="Slider",[ns,bu,wu]=Go(gn),[Pa,Km]=$n(gn,[wu]),[Su,Tr]=Pa(gn),Ia=R.forwardRef((t,e)=>{const{name:r,min:s=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:f=0,defaultValue:h=[s],value:c,onValueChange:u=()=>{},onValueCommit:d=()=>{},inverted:p=!1,form:C,...I}=t,k=R.useRef(new Set),P=R.useRef(0),E=o==="horizontal"?Cu:_u,[j=[],U]=hs({prop:c,defaultProp:h,onChange:w=>{[...k.current][P.current]?.focus(),u(w)}}),T=R.useRef(j);function O(w){const A=Iu(j,w);x(w,A)}function b(w){x(w,P.current)}function m(){const w=T.current[P.current];j[P.current]!==w&&d(j)}function x(w,A,{commit:S}={commit:!1}){const N=ku(a),_=Eu(Math.round((w-s)/a)*a+s,N),g=ki(_,[s,i]);U((y=[])=>{const M=Au(y,g,A);if(ju(M,f*a)){P.current=M.indexOf(g);const F=String(M)!==String(y);return F&&S&&d(M),F?M:y}else return y})}return v.jsx(Su,{scope:t.__scopeSlider,name:r,disabled:l,min:s,max:i,valueIndexToChangeRef:P,thumbs:k.current,values:j,orientation:o,form:C,children:v.jsx(ns.Provider,{scope:t.__scopeSlider,children:v.jsx(ns.Slot,{scope:t.__scopeSlider,children:v.jsx(E,{"aria-disabled":l,"data-disabled":l?"":void 0,...I,ref:e,onPointerDown:bt(I.onPointerDown,()=>{l||(T.current=j)}),min:s,max:i,inverted:p,onSlideStart:l?void 0:O,onSlideMove:l?void 0:b,onSlideEnd:l?void 0:m,onHomeKeyDown:()=>!l&&x(s,0,{commit:!0}),onEndKeyDown:()=>!l&&x(i,j.length-1,{commit:!0}),onStepKeyDown:({event:w,direction:A})=>{if(!l){const _=Na.includes(w.key)||w.shiftKey&&Ta.includes(w.key)?10:1,g=P.current,y=j[g],M=a*_*A;x(y+M,g,{commit:!0})}}})})})})});Ia.displayName=gn;var[Ra,Da]=Pa(gn,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Cu=R.forwardRef((t,e)=>{const{min:r,max:s,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:f,onStepKeyDown:h,...c}=t,[u,d]=R.useState(null),p=Tt(e,E=>d(E)),C=R.useRef(void 0),I=Ii(i),k=I==="ltr",P=k&&!a||!k&&a;function D(E){const j=C.current||u.getBoundingClientRect(),U=[0,j.width],O=Rs(U,P?[r,s]:[s,r]);return C.current=j,O(E-j.left)}return v.jsx(Ra,{scope:t.__scopeSlider,startEdge:P?"left":"right",endEdge:P?"right":"left",direction:P?1:-1,size:"width",children:v.jsx(ja,{dir:I,"data-orientation":"horizontal",...c,ref:p,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const j=D(E.clientX);o?.(j)},onSlideMove:E=>{const j=D(E.clientX);l?.(j)},onSlideEnd:()=>{C.current=void 0,f?.()},onStepKeyDown:E=>{const U=Aa[P?"from-left":"from-right"].includes(E.key);h?.({event:E,direction:U?-1:1})}})})}),_u=R.forwardRef((t,e)=>{const{min:r,max:s,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:f,...h}=t,c=R.useRef(null),u=Tt(e,c),d=R.useRef(void 0),p=!i;function C(I){const k=d.current||c.current.getBoundingClientRect(),P=[0,k.height],E=Rs(P,p?[s,r]:[r,s]);return d.current=k,E(I-k.top)}return v.jsx(Ra,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:v.jsx(ja,{"data-orientation":"vertical",...h,ref:u,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:I=>{const k=C(I.clientY);a?.(k)},onSlideMove:I=>{const k=C(I.clientY);o?.(k)},onSlideEnd:()=>{d.current=void 0,l?.()},onStepKeyDown:I=>{const P=Aa[p?"from-bottom":"from-top"].includes(I.key);f?.({event:I,direction:P?-1:1})}})})}),ja=R.forwardRef((t,e)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:f,...h}=t,c=Tr(gn,r);return v.jsx(Je.span,{...h,ref:e,onKeyDown:bt(t.onKeyDown,u=>{u.key==="Home"?(o(u),u.preventDefault()):u.key==="End"?(l(u),u.preventDefault()):Na.concat(Ta).includes(u.key)&&(f(u),u.preventDefault())}),onPointerDown:bt(t.onPointerDown,u=>{const d=u.target;d.setPointerCapture(u.pointerId),u.preventDefault(),c.thumbs.has(d)?d.focus():s(u)}),onPointerMove:bt(t.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&i(u)}),onPointerUp:bt(t.onPointerUp,u=>{const d=u.target;d.hasPointerCapture(u.pointerId)&&(d.releasePointerCapture(u.pointerId),a(u))})})}),ka="SliderTrack",Ea=R.forwardRef((t,e)=>{const{__scopeSlider:r,...s}=t,i=Tr(ka,r);return v.jsx(Je.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:e})});Ea.displayName=ka;var rs="SliderRange",Ma=R.forwardRef((t,e)=>{const{__scopeSlider:r,...s}=t,i=Tr(rs,r),a=Da(rs,r),o=R.useRef(null),l=Tt(e,o),f=i.values.length,h=i.values.map(d=>Ua(d,i.min,i.max)),c=f>1?Math.min(...h):0,u=100-Math.max(...h);return v.jsx(Je.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:l,style:{...t.style,[a.startEdge]:c+"%",[a.endEdge]:u+"%"}})});Ma.displayName=rs;var ss="SliderThumb",Fa=R.forwardRef((t,e)=>{const r=bu(t.__scopeSlider),[s,i]=R.useState(null),a=Tt(e,l=>i(l)),o=R.useMemo(()=>s?r().findIndex(l=>l.ref.current===s):-1,[r,s]);return v.jsx(Nu,{...t,ref:a,index:o})}),Nu=R.forwardRef((t,e)=>{const{__scopeSlider:r,index:s,name:i,...a}=t,o=Tr(ss,r),l=Da(ss,r),[f,h]=R.useState(null),c=Tt(e,D=>h(D)),u=f?o.form||!!f.closest("form"):!0,d=Ri(f),p=o.values[s],C=p===void 0?0:Ua(p,o.min,o.max),I=Pu(s,o.values.length),k=d?.[l.size],P=k?Ru(k,C,l.direction):0;return R.useEffect(()=>{if(f)return o.thumbs.add(f),()=>{o.thumbs.delete(f)}},[f,o.thumbs]),v.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${C}% + ${P}px)`},children:[v.jsx(ns.ItemSlot,{scope:t.__scopeSlider,children:v.jsx(Je.span,{role:"slider","aria-label":t["aria-label"]||I,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:c,style:p===void 0?{display:"none"}:t.style,onFocus:bt(t.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),u&&v.jsx(Oa,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},s)]})});Fa.displayName=ss;var Tu="RadioBubbleInput",Oa=R.forwardRef(({__scopeSlider:t,value:e,...r},s)=>{const i=R.useRef(null),a=Tt(i,s),o=Ei(e);return R.useEffect(()=>{const l=i.current;if(!l)return;const f=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(f,"value").set;if(o!==e&&c){const u=new Event("input",{bubbles:!0});c.call(l,e),l.dispatchEvent(u)}},[o,e]),v.jsx(Je.input,{style:{display:"none"},...r,ref:a,defaultValue:e})});Oa.displayName=Tu;function Au(t=[],e,r){const s=[...t];return s[r]=e,s.sort((i,a)=>i-a)}function Ua(t,e,r){const a=100/(r-e)*(t-e);return ki(a,[0,100])}function Pu(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Iu(t,e){if(t.length===1)return 0;const r=t.map(i=>Math.abs(i-e)),s=Math.min(...r);return r.indexOf(s)}function Ru(t,e,r){const s=t/2,a=Rs([0,50],[0,s]);return(s-a(e)*r)*r}function Du(t){return t.slice(0,-1).map((e,r)=>t[r+1]-e)}function ju(t,e){if(e>0){const r=Du(t);return Math.min(...r)>=e}return!0}function Rs(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(r-t[0])}}function ku(t){return(String(t).split(".")[1]||"").length}function Eu(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}var Ba=Ia,Mu=Ea,Fu=Ma,Ou=Fa;const La=R.forwardRef(({className:t,...e},r)=>v.jsxs(Ba,{ref:r,className:ke("relative flex w-full touch-none select-none items-center",t),...e,children:[v.jsx(Mu,{className:"relative h-2 w-full cursor-pointer grow overflow-hidden rounded-full bg-secondary",children:v.jsx(Fu,{className:"absolute h-full bg-primary"})}),v.jsx(Ou,{className:"block h-5 w-5 cursor-pointer rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));La.displayName=Ba.displayName;var Ds="Radio",[Uu,za]=$n(Ds),[Bu,Lu]=Uu(Ds),Va=R.forwardRef((t,e)=>{const{__scopeRadio:r,name:s,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:f,form:h,...c}=t,[u,d]=R.useState(null),p=Tt(e,k=>d(k)),C=R.useRef(!1),I=u?h||!!u.closest("form"):!0;return v.jsxs(Bu,{scope:r,checked:i,disabled:o,children:[v.jsx(Je.button,{type:"button",role:"radio","aria-checked":i,"data-state":Za(i),"data-disabled":o?"":void 0,disabled:o,value:l,...c,ref:p,onClick:bt(t.onClick,k=>{i||f?.(),I&&(C.current=k.isPropagationStopped(),C.current||k.stopPropagation())})}),I&&v.jsx(qa,{control:u,bubbles:!C.current,name:s,value:l,checked:i,required:a,disabled:o,form:h,style:{transform:"translateX(-100%)"}})]})});Va.displayName=Ds;var $a="RadioIndicator",Ga=R.forwardRef((t,e)=>{const{__scopeRadio:r,forceMount:s,...i}=t,a=Lu($a,r);return v.jsx(Pi,{present:s||a.checked,children:v.jsx(Je.span,{"data-state":Za(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:e})})});Ga.displayName=$a;var zu="RadioBubbleInput",qa=R.forwardRef(({__scopeRadio:t,control:e,checked:r,bubbles:s=!0,...i},a)=>{const o=R.useRef(null),l=Tt(o,a),f=Ei(r),h=Ri(e);return R.useEffect(()=>{const c=o.current;if(!c)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(f!==r&&p){const C=new Event("click",{bubbles:s});p.call(c,r),c.dispatchEvent(C)}},[f,r,s]),v.jsx(Je.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:l,style:{...i.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qa.displayName=zu;function Za(t){return t?"checked":"unchecked"}var Vu=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ar="RadioGroup",[$u,Ym]=$n(Ar,[Di,za]),Qa=Di(),Ha=za(),[Gu,qu]=$u(Ar),Wa=R.forwardRef((t,e)=>{const{__scopeRadioGroup:r,name:s,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:f,dir:h,loop:c=!0,onValueChange:u,...d}=t,p=Qa(r),C=Ii(h),[I,k]=hs({prop:a,defaultProp:i??null,onChange:u,caller:Ar});return v.jsx(Gu,{scope:r,name:s,required:o,disabled:l,value:I,onValueChange:k,children:v.jsx(qo,{asChild:!0,...p,orientation:f,dir:C,loop:c,children:v.jsx(Je.div,{role:"radiogroup","aria-required":o,"aria-orientation":f,"data-disabled":l?"":void 0,dir:C,...d,ref:e})})})});Wa.displayName=Ar;var Xa="RadioGroupItem",Ka=R.forwardRef((t,e)=>{const{__scopeRadioGroup:r,disabled:s,...i}=t,a=qu(Xa,r),o=a.disabled||s,l=Qa(r),f=Ha(r),h=R.useRef(null),c=Tt(e,h),u=a.value===i.value,d=R.useRef(!1);return R.useEffect(()=>{const p=I=>{Vu.includes(I.key)&&(d.current=!0)},C=()=>d.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",C),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",C)}},[]),v.jsx(Zo,{asChild:!0,...l,focusable:!o,active:u,children:v.jsx(Va,{disabled:o,required:a.required,checked:u,...f,...i,name:a.name,ref:c,onCheck:()=>a.onValueChange(i.value),onKeyDown:bt(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:bt(i.onFocus,()=>{d.current&&h.current?.click()})})})});Ka.displayName=Xa;var Zu="RadioGroupIndicator",Ya=R.forwardRef((t,e)=>{const{__scopeRadioGroup:r,...s}=t,i=Ha(r);return v.jsx(Ga,{...i,...s,ref:e})});Ya.displayName=Zu;var Ja=Wa,eo=Ka,Qu=Ya;const to=R.forwardRef(({className:t,...e},r)=>v.jsx(Ja,{className:ke("grid gap-2",t),...e,ref:r}));to.displayName=Ja.displayName;const bn=R.forwardRef(({className:t,...e},r)=>v.jsx(eo,{ref:r,className:ke("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:v.jsx(Qu,{className:"flex items-center justify-center",children:v.jsx(Ro,{className:"h-2.5 w-2.5 fill-current text-current"})})}));bn.displayName=eo.displayName;const V=Symbol.for("drizzle:entityKind");function Le(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,V))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(V in r&&r[V]===e[V])return!0;r=Object.getPrototypeOf(r)}return!1}class Pn{constructor(e,r){this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[V]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class Hu{static[V]="ColumnBuilder";config;constructor(e,r,s){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}const nn=Symbol.for("drizzle:Name");class Wu{static[V]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,r){this.reference=()=>{const{name:s,columns:i,foreignColumns:a}=e();return{name:s,columns:i,foreignTable:a[0].table,foreignColumns:a}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Xu(e,this)}}class Xu{constructor(e,r){this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[V]="PgForeignKey";reference;onUpdate;onDelete;getName(){const{name:e,columns:r,foreignColumns:s}=this.reference(),i=r.map(l=>l.name),a=s.map(l=>l.name),o=[this.table[nn],...i,s[0].table[nn],...a];return e??`${o.join("_")}_fk`}}function Ku(t,...e){return t(...e)}function Yu(t,e){return`${t[nn]}_${e.join("_")}_unique`}function ui(t,e,r){for(let s=e;s<t.length;s++){const i=t[s];if(i==="\\"){s++;continue}if(i==='"')return[t.slice(e,s).replace(/\\/g,""),s+1];if(!r&&(i===","||i==="}"))return[t.slice(e,s).replace(/\\/g,""),s]}return[t.slice(e).replace(/\\/g,""),t.length]}function no(t,e=0){const r=[];let s=e,i=!1;for(;s<t.length;){const a=t[s];if(a===","){(i||s===e)&&r.push(""),i=!0,s++;continue}if(i=!1,a==="\\"){s+=2;continue}if(a==='"'){const[f,h]=ui(t,s+1,!0);r.push(f),s=h;continue}if(a==="}")return[r,s+1];if(a==="{"){const[f,h]=no(t,s+1);r.push(f),s=h;continue}const[o,l]=ui(t,s,!1);r.push(o),s=l}return[r,s]}function Ju(t){const[e]=no(t,1);return e}function ro(t){return`{${t.map(e=>Array.isArray(e)?ro(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}class oe extends Hu{foreignKeyConfigs=[];static[V]="PgColumnBuilder";array(e){return new td(this.config.name,this,e)}references(e,r={}){return this.foreignKeyConfigs.push({ref:e,actions:r}),this}unique(e,r){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=r?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,r){return this.foreignKeyConfigs.map(({ref:s,actions:i})=>Ku((a,o)=>{const l=new Wu(()=>{const f=a();return{columns:[e],foreignColumns:[f]}});return o.onUpdate&&l.onUpdate(o.onUpdate),o.onDelete&&l.onDelete(o.onDelete),l.build(r)},s,i))}buildExtraConfigColumn(e){return new ed(e,this.config)}}class te extends Pn{constructor(e,r){r.uniqueName||(r.uniqueName=Yu(e,[r.name])),super(e,r),this.table=e}static[V]="PgColumn"}class ed extends te{static[V]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}}class td extends oe{static[V]="PgArrayBuilder";constructor(e,r,s){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=s}build(e){const r=this.config.baseBuilder.build(e);return new js(e,this.config,r)}}class js extends te{constructor(e,r,s,i){super(e,r),this.baseColumn=s,this.range=i,this.size=r.size}size;static[V]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=Ju(e)),e.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(e,r=!1){const s=e.map(i=>i===null?null:Le(this.baseColumn,js)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return r?s:ro(s)}}const di=Symbol.for("drizzle:isPgEnum");function nd(t){return!!t&&typeof t=="function"&&di in t&&t[di]===!0}class so{static[V]="Subquery";constructor(e,r,s,i=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:s,isWith:i}}}const rd={startActiveSpan(t,e){return e()}},rn=Symbol.for("drizzle:ViewBaseConfig"),zr=Symbol.for("drizzle:Schema"),fi=Symbol.for("drizzle:Columns"),hi=Symbol.for("drizzle:ExtraConfigColumns"),Vr=Symbol.for("drizzle:OriginalName"),$r=Symbol.for("drizzle:BaseName"),fr=Symbol.for("drizzle:IsAlias"),mi=Symbol.for("drizzle:ExtraConfigBuilder"),io=Symbol.for("drizzle:IsDrizzleTable");class st{static[V]="Table";static Symbol={Name:nn,Schema:zr,OriginalName:Vr,Columns:fi,ExtraConfigColumns:hi,BaseName:$r,IsAlias:fr,ExtraConfigBuilder:mi};[nn];[Vr];[zr];[fi];[hi];[$r];[fr]=!1;[io]=!0;[mi]=void 0;constructor(e,r,s){this[nn]=this[Vr]=e,this[zr]=r,this[$r]=s}}function ao(t){return typeof t=="object"&&t!==null&&io in t}function sd(t){return t!=null&&typeof t.getSQL=="function"}function id(t){const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),r.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}class ft{static[V]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new _e([this])}}class _e{constructor(e){this.queryChunks=e}static[V]="SQL";decoder=oo;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return rd.startActiveSpan("drizzle.buildSQL",r=>{const s=this.buildQueryFromSourceParams(this.queryChunks,e);return r?.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(e,r){const s=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:o,prepareTyping:l,inlineParams:f,paramStartIndex:h}=s;return id(e.map(c=>{if(Le(c,ft))return{sql:c.value.join(""),params:[]};if(Le(c,is))return{sql:a(c.value),params:[]};if(c===void 0)return{sql:"",params:[]};if(Array.isArray(c)){const u=[new ft("(")];for(const[d,p]of c.entries())u.push(p),d<c.length-1&&u.push(new ft(", "));return u.push(new ft(")")),this.buildQueryFromSourceParams(u,s)}if(Le(c,_e))return this.buildQueryFromSourceParams(c.queryChunks,{...s,inlineParams:f||c.shouldInlineParams});if(Le(c,st)){const u=c[st.Symbol.Schema],d=c[st.Symbol.Name];return{sql:u===void 0||c[fr]?a(d):a(u)+"."+a(d),params:[]}}if(Le(c,Pn)){const u=i.getColumnCasing(c);if(r.invokeSource==="indexes")return{sql:a(u),params:[]};const d=c.table[st.Symbol.Schema];return{sql:c.table[fr]||d===void 0?a(c.table[st.Symbol.Name])+"."+a(u):a(d)+"."+a(c.table[st.Symbol.Name])+"."+a(u),params:[]}}if(Le(c,ad)){const u=c[rn].schema,d=c[rn].name;return{sql:u===void 0||c[rn].isAlias?a(d):a(u)+"."+a(d),params:[]}}if(Le(c,co)){if(Le(c.value,as))return{sql:o(h.value++,c),params:[c],typings:["none"]};const u=c.value===null?null:c.encoder.mapToDriverValue(c.value);if(Le(u,_e))return this.buildQueryFromSourceParams([u],s);if(f)return{sql:this.mapInlineParam(u,s),params:[]};let d=["none"];return l&&(d=[l(c.encoder)]),{sql:o(h.value++,u),params:[u],typings:d}}return Le(c,as)?{sql:o(h.value++,c),params:[c],typings:["none"]}:Le(c,_e.Aliased)&&c.fieldAlias!==void 0?{sql:a(c.fieldAlias),params:[]}:Le(c,so)?c._.isWith?{sql:a(c._.alias),params:[]}:this.buildQueryFromSourceParams([new ft("("),c._.sql,new ft(") "),new is(c._.alias)],s):nd(c)?c.schema?{sql:a(c.schema)+"."+a(c.enumName),params:[]}:{sql:a(c.enumName),params:[]}:sd(c)?c.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([c.getSQL()],s):this.buildQueryFromSourceParams([new ft("("),c.getSQL(),new ft(")")],s):f?{sql:this.mapInlineParam(c,s),params:[]}:{sql:o(h.value++,c),params:[c],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const s=e.toString();return r(s==="[object Object]"?JSON.stringify(e):s)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new _e.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}}class is{constructor(e){this.value=e}static[V]="Name";brand;getSQL(){return new _e([this])}}const oo={mapFromDriverValue:t=>t},lo={mapToDriverValue:t=>t};({...oo,...lo});class co{constructor(e,r=lo){this.value=e,this.encoder=r}static[V]="Param";brand;getSQL(){return new _e([this])}}function In(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new ft(t[0]));for(const[s,i]of e.entries())r.push(i,new ft(t[s+1]));return new _e(r)}(t=>{function e(){return new _e([])}t.empty=e;function r(f){return new _e(f)}t.fromList=r;function s(f){return new _e([new ft(f)])}t.raw=s;function i(f,h){const c=[];for(const[u,d]of f.entries())u>0&&h!==void 0&&c.push(h),c.push(d);return new _e(c)}t.join=i;function a(f){return new is(f)}t.identifier=a;function o(f){return new as(f)}t.placeholder=o;function l(f,h){return new co(f,h)}t.param=l})(In||(In={}));(t=>{class e{constructor(s,i){this.sql=s,this.fieldAlias=i}static[V]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}t.Aliased=e})(_e||(_e={}));class as{constructor(e){this.name=e}static[V]="Placeholder";getSQL(){return new _e([this])}}const uo=Symbol.for("drizzle:IsDrizzleView");class ad{static[V]="View";[rn];[uo]=!0;constructor({name:e,schema:r,selectedFields:s,query:i}){this[rn]={name:e,originalName:e,schema:r,selectedFields:s,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new _e([this])}}function od(t){return typeof t=="object"&&t!==null&&uo in t}Pn.prototype.getSQL=function(){return new _e([this])};st.prototype.getSQL=function(){return new _e([this])};so.prototype.getSQL=function(){return new _e([this])};function ld(t){return t[st.Symbol.Columns]}function cd(t){return t[rn].selectedFields}function Ue(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}class Pr extends oe{static[V]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){const{name:r,...s}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:s}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...s}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:s}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class ud extends Pr{static[V]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new dd(e,this.config)}}class dd extends te{static[V]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class fd extends Pr{static[V]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new hd(e,this.config)}}class hd extends te{static[V]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}function md(t,e){const{name:r,config:s}=Ue(t,e);return s.mode==="number"?new ud(r):new fd(r)}class gd extends oe{static[V]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new pd(e,this.config)}}class pd extends te{static[V]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}class vd extends oe{static[V]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new yd(e,this.config)}}class yd extends te{static[V]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}function xd(t,e){const{name:r,config:s}=Ue(t,e);return s.mode==="number"?new gd(r):new vd(r)}class bd extends oe{static[V]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new wd(e,this.config)}}class wd extends te{static[V]="PgBoolean";getSQLType(){return"boolean"}}function Sd(t){return new bd(t??"")}class Cd extends oe{static[V]="PgCharBuilder";constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new _d(e,this.config)}}class _d extends te{static[V]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function Nd(t,e={}){const{name:r,config:s}=Ue(t,e);return new Cd(r,s)}class Td extends oe{static[V]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new Ad(e,this.config)}}class Ad extends te{static[V]="PgCidr";getSQLType(){return"cidr"}}function Pd(t){return new Td(t??"")}class Id extends oe{static[V]="PgCustomColumnBuilder";constructor(e,r,s){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=s}build(e){return new Rd(e,this.config)}}class Rd extends te{static[V]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,r){super(e,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}}function Dd(t){return(e,r)=>{const{name:s,config:i}=Ue(e,r);return new Id(s,i,t)}}class Qn extends oe{static[V]="PgDateColumnBaseBuilder";defaultNow(){return this.default(In`now()`)}}class jd extends Qn{static[V]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new kd(e,this.config)}}class kd extends te{static[V]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}class Ed extends Qn{static[V]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new Md(e,this.config)}}class Md extends te{static[V]="PgDateString";getSQLType(){return"date"}}function Fd(t,e){const{name:r,config:s}=Ue(t,e);return s?.mode==="date"?new jd(r):new Ed(r)}class Od extends oe{static[V]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Ud(e,this.config)}}class Ud extends te{static[V]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}function Bd(t){return new Od(t??"")}class Ld extends oe{static[V]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new zd(e,this.config)}}class zd extends te{static[V]="PgInet";getSQLType(){return"inet"}}function Vd(t){return new Ld(t??"")}class $d extends Pr{static[V]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new Gd(e,this.config)}}class Gd extends te{static[V]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}function qd(t){return new $d(t??"")}class Zd extends oe{static[V]="PgIntervalBuilder";constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new Qd(e,this.config)}}class Qd extends te{static[V]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){const e=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${e}${r}`}}function Hd(t,e={}){const{name:r,config:s}=Ue(t,e);return new Zd(r,s)}class Wd extends oe{static[V]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new Xd(e,this.config)}}class Xd extends te{static[V]="PgJson";constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function Kd(t){return new Wd(t??"")}class Yd extends oe{static[V]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new Jd(e,this.config)}}class Jd extends te{static[V]="PgJsonb";constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}function ef(t){return new Yd(t??"")}class tf extends oe{static[V]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new nf(e,this.config)}}class nf extends te{static[V]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){const[r,s,i]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(s),Number.parseFloat(i)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}class rf extends oe{static[V]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new sf(e,this.config)}}class sf extends te{static[V]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){const[r,s,i]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(s),c:Number.parseFloat(i)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}function af(t,e){const{name:r,config:s}=Ue(t,e);return!s?.mode||s.mode==="tuple"?new tf(r):new rf(r)}class of extends oe{static[V]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new lf(e,this.config)}}class lf extends te{static[V]="PgMacaddr";getSQLType(){return"macaddr"}}function cf(t){return new of(t??"")}class uf extends oe{static[V]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new df(e,this.config)}}class df extends te{static[V]="PgMacaddr8";getSQLType(){return"macaddr8"}}function ff(t){return new uf(t??"")}class hf extends oe{static[V]="PgNumericBuilder";constructor(e,r,s){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=s}build(e){return new mf(e,this.config)}}class mf extends te{static[V]="PgNumeric";precision;scale;constructor(e,r){super(e,r),this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}function gf(t,e){const{name:r,config:s}=Ue(t,e);return new hf(r,s?.precision,s?.scale)}class pf extends oe{static[V]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new vf(e,this.config)}}class vf extends te{static[V]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,s]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(s)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}class yf extends oe{static[V]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new xf(e,this.config)}}class xf extends te{static[V]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,s]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(s)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}function bf(t,e){const{name:r,config:s}=Ue(t,e);return!s?.mode||s.mode==="tuple"?new pf(r):new yf(r)}function wf(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function gi(t,e){const r=new ArrayBuffer(8),s=new DataView(r);for(let i=0;i<8;i++)s.setUint8(i,t[e+i]);return s.getFloat64(0,!0)}function fo(t){const e=wf(t);let r=0;const s=e[r];r+=1;const i=new DataView(e.buffer),a=i.getUint32(r,s===1);if(r+=4,a&536870912&&(i.getUint32(r,s===1),r+=4),(a&65535)===1){const o=gi(e,r);r+=8;const l=gi(e,r);return r+=8,[o,l]}throw new Error("Unsupported geometry type")}class Sf extends oe{static[V]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new Cf(e,this.config)}}class Cf extends te{static[V]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return fo(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}class _f extends oe{static[V]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Nf(e,this.config)}}class Nf extends te{static[V]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=fo(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}function Tf(t,e){const{name:r,config:s}=Ue(t,e);return!s?.mode||s.mode==="tuple"?new Sf(r):new _f(r)}class Af extends oe{static[V]="PgRealBuilder";constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new Pf(e,this.config)}}class Pf extends te{static[V]="PgReal";constructor(e,r){super(e,r)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e}function If(t){return new Af(t??"")}class Rf extends oe{static[V]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Df(e,this.config)}}class Df extends te{static[V]="PgSerial";getSQLType(){return"serial"}}function jf(t){return new Rf(t??"")}class kf extends Pr{static[V]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new Ef(e,this.config)}}class Ef extends te{static[V]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e}function Mf(t){return new kf(t??"")}class Ff extends oe{static[V]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Of(e,this.config)}}class Of extends te{static[V]="PgSmallSerial";getSQLType(){return"smallserial"}}function Uf(t){return new Ff(t??"")}class Bf extends oe{static[V]="PgTextBuilder";constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new Lf(e,this.config)}}class Lf extends te{static[V]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function os(t,e={}){const{name:r,config:s}=Ue(t,e);return new Bf(r,s)}class zf extends Qn{constructor(e,r,s){super(e,"string","PgTime"),this.withTimezone=r,this.precision=s,this.config.withTimezone=r,this.config.precision=s}static[V]="PgTimeBuilder";build(e){return new Vf(e,this.config)}}class Vf extends te{static[V]="PgTime";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function $f(t,e={}){const{name:r,config:s}=Ue(t,e);return new zf(r,s.withTimezone??!1,s.precision)}class Gf extends Qn{static[V]="PgTimestampBuilder";constructor(e,r,s){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=s}build(e){return new qf(e,this.config)}}class qf extends te{static[V]="PgTimestamp";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()}class Zf extends Qn{static[V]="PgTimestampStringBuilder";constructor(e,r,s){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=s}build(e){return new Qf(e,this.config)}}class Qf extends te{static[V]="PgTimestampString";withTimezone;precision;constructor(e,r){super(e,r),this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Hf(t,e={}){const{name:r,config:s}=Ue(t,e);return s?.mode==="string"?new Zf(r,s.withTimezone??!1,s.precision):new Gf(r,s?.withTimezone??!1,s?.precision)}class Wf extends oe{static[V]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(In`gen_random_uuid()`)}build(e){return new Xf(e,this.config)}}class Xf extends te{static[V]="PgUUID";getSQLType(){return"uuid"}}function Kf(t){return new Wf(t??"")}class Yf extends oe{static[V]="PgVarcharBuilder";constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Jf(e,this.config)}}class Jf extends te{static[V]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function ho(t,e={}){const{name:r,config:s}=Ue(t,e);return new Yf(r,s)}class eh extends oe{static[V]="PgBinaryVectorBuilder";constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new th(e,this.config)}}class th extends te{static[V]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function nh(t,e){const{name:r,config:s}=Ue(t,e);return new eh(r,s)}class rh extends oe{static[V]="PgHalfVectorBuilder";constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new sh(e,this.config)}}class sh extends te{static[V]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}function ih(t,e){const{name:r,config:s}=Ue(t,e);return new rh(r,s)}class ah extends oe{static[V]="PgSparseVectorBuilder";constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new oh(e,this.config)}}class oh extends te{static[V]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function lh(t,e){const{name:r,config:s}=Ue(t,e);return new ah(r,s)}class ch extends oe{static[V]="PgVectorBuilder";constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new uh(e,this.config)}}class uh extends te{static[V]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}function dh(t,e){const{name:r,config:s}=Ue(t,e);return new ch(r,s)}function fh(){return{bigint:md,bigserial:xd,boolean:Sd,char:Nd,cidr:Pd,customType:Dd,date:Fd,doublePrecision:Bd,inet:Vd,integer:qd,interval:Hd,json:Kd,jsonb:ef,line:af,macaddr:cf,macaddr8:ff,numeric:gf,point:bf,geometry:Tf,real:If,serial:jf,smallint:Mf,smallserial:Uf,text:os,time:$f,timestamp:Hf,uuid:Kf,varchar:ho,bit:nh,halfvec:ih,sparsevec:lh,vector:dh}}const ls=Symbol.for("drizzle:PgInlineForeignKeys"),pi=Symbol.for("drizzle:EnableRLS");class vi extends st{static[V]="PgTable";static Symbol=Object.assign({},st.Symbol,{InlineForeignKeys:ls,EnableRLS:pi});[ls]=[];[pi]=!1;[st.Symbol.ExtraConfigBuilder]=void 0}function hh(t,e,r,s,i=t){const a=new vi(t,s,i),o=typeof e=="function"?e(fh()):e,l=Object.fromEntries(Object.entries(o).map(([c,u])=>{const d=u;d.setName(c);const p=d.build(a);return a[ls].push(...d.buildForeignKeys(p,a)),[c,p]})),f=Object.fromEntries(Object.entries(o).map(([c,u])=>{const d=u;d.setName(c);const p=d.buildExtraConfigColumn(a);return[c,p]})),h=Object.assign(a,l);return h[st.Symbol.Columns]=l,h[st.Symbol.ExtraConfigColumns]=f,Object.assign(h,{enableRLS:()=>(h[vi.Symbol.EnableRLS]=!0,h)})}const mh=(t,e,r)=>hh(t,e,r,void 0);var ae;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},t.find=(i,a)=>{for(const o of i)if(a(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function s(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}t.joinValues=s,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(ae||(ae={}));var cs;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(cs||(cs={}));const H=ae.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),It=t=>{switch(typeof t){case"undefined":return H.undefined;case"string":return H.string;case"number":return Number.isNaN(t)?H.nan:H.number;case"boolean":return H.boolean;case"function":return H.function;case"bigint":return H.bigint;case"symbol":return H.symbol;case"object":return Array.isArray(t)?H.array:t===null?H.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?H.promise:typeof Map<"u"&&t instanceof Map?H.map:typeof Set<"u"&&t instanceof Set?H.set:typeof Date<"u"&&t instanceof Date?H.date:H.object;default:return H.unknown}},G=ae.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),gh=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class it extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(a){return a.message},s={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)s._errors.push(r(o));else{let l=s,f=0;for(;f<o.path.length;){const h=o.path[f];f===o.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(r(o))):l[h]=l[h]||{_errors:[]},l=l[h],f++}}};return i(this),s}static assert(e){if(!(e instanceof it))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ae.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},s=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];r[a]=r[a]||[],r[a].push(e(i))}else s.push(e(i));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}}it.create=t=>new it(t);const an=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===H.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ae.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${ae.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ae.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${ae.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ae.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,ae.assertNever(t)}return{message:r}};let mo=an;function ph(t){mo=t}function hr(){return mo}const mr=t=>{const{data:e,path:r,errorMaps:s,issueData:i}=t,a=[...r,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const f=s.filter(h=>!!h).slice().reverse();for(const h of f)l=h(o,{data:e,defaultError:l}).message;return{...i,path:a,message:l}},vh=[];function Z(t,e){const r=hr(),s=mr({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===an?void 0:an].filter(i=>!!i)});t.common.issues.push(s)}class $e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const s=[];for(const i of r){if(i.status==="aborted")return Y;i.status==="dirty"&&e.dirty(),s.push(i.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,r){const s=[];for(const i of r){const a=await i.key,o=await i.value;s.push({key:a,value:o})}return $e.mergeObjectSync(e,s)}static mergeObjectSync(e,r){const s={};for(const i of r){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Y;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(s[a.value]=o.value)}return{status:e.value,value:s}}}const Y=Object.freeze({status:"aborted"}),en=t=>({status:"dirty",value:t}),Qe=t=>({status:"valid",value:t}),us=t=>t.status==="aborted",ds=t=>t.status==="dirty",$t=t=>t.status==="valid",Rn=t=>typeof Promise<"u"&&t instanceof Promise;var W;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(W||(W={}));class _t{constructor(e,r,s,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=s,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const yi=(t,e)=>{if($t(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new it(t.common.issues);return this._error=r,this._error}}};function ee(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:s,description:i}=t;if(e&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{const{message:f}=t;return o.code==="invalid_enum_value"?{message:f??l.defaultError}:typeof l.data>"u"?{message:f??s??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:f??r??l.defaultError}},description:i}}class re{get description(){return this._def.description}_getType(e){return It(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:It(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $e,ctx:{common:e.parent.common,data:e.data,parsedType:It(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Rn(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const s=this.safeParse(e,r);if(s.success)return s.data;throw s.error}safeParse(e,r){const s={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:It(e)},i=this._parseSync({data:e,path:s.path,parent:s});return yi(s,i)}"~validate"(e){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:It(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:r});return $t(s)?{value:s.value}:{issues:r.common.issues}}catch(s){s?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(s=>$t(s)?{value:s.value}:{issues:r.common.issues})}async parseAsync(e,r){const s=await this.safeParseAsync(e,r);if(s.success)return s.data;throw s.error}async safeParseAsync(e,r){const s={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:It(e)},i=this._parse({data:e,path:s.path,parent:s}),a=await(Rn(i)?i:Promise.resolve(i));return yi(s,a)}refine(e,r){const s=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const o=e(i),l=()=>a.addIssue({code:G.custom,...s(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(f=>f?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,r){return this._refinement((s,i)=>e(s)?!0:(i.addIssue(typeof r=="function"?r(s,i):r),!1))}_refinement(e){return new pt({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return St.create(this,this._def)}nullable(){return Bt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mt.create(this)}promise(){return ln.create(this,this._def)}or(e){return En.create([this,e],this._def)}and(e){return Mn.create(this,e,this._def)}transform(e){return new pt({...ee(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Ln({...ee(this._def),innerType:this,defaultValue:r,typeName:J.ZodDefault})}brand(){return new ks({typeName:J.ZodBranded,type:this,...ee(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new zn({...ee(this._def),innerType:this,catchValue:r,typeName:J.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Hn.create(this,e)}readonly(){return Vn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yh=/^c[^\s-]{8,}$/i,xh=/^[0-9a-z]+$/,bh=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wh=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Sh=/^[a-z0-9_-]{21}$/i,Ch=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_h=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Nh=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Th="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Gr;const Ah=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ph=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Ih=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Rh=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Dh=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,jh=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,go="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",kh=new RegExp(`^${go}$`);function po(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Eh(t){return new RegExp(`^${po(t)}$`)}function vo(t){let e=`${go}T${po(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Mh(t,e){return!!((e==="v4"||!e)&&Ah.test(t)||(e==="v6"||!e)&&Ih.test(t))}function Fh(t,e){if(!Ch.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(s));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function Oh(t,e){return!!((e==="v4"||!e)&&Ph.test(t)||(e==="v6"||!e)&&Rh.test(t))}class ht extends re{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==H.string){const a=this._getOrReturnCtx(e);return Z(a,{code:G.invalid_type,expected:H.string,received:a.parsedType}),Y}const s=new $e;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),Z(i,{code:G.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),Z(i,{code:G.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const o=e.data.length>a.value,l=e.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?Z(i,{code:G.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Z(i,{code:G.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")Nh.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"email",code:G.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")Gr||(Gr=new RegExp(Th,"u")),Gr.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"emoji",code:G.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")wh.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"uuid",code:G.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")Sh.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"nanoid",code:G.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")yh.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"cuid",code:G.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")xh.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"cuid2",code:G.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")bh.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"ulid",code:G.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Z(i,{validation:"url",code:G.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"regex",code:G.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),Z(i,{code:G.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),Z(i,{code:G.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),Z(i,{code:G.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?vo(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{code:G.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?kh.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{code:G.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?Eh(a).test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{code:G.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?_h.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"duration",code:G.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?Mh(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"ip",code:G.invalid_string,message:a.message}),s.dirty()):a.kind==="jwt"?Fh(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"jwt",code:G.invalid_string,message:a.message}),s.dirty()):a.kind==="cidr"?Oh(e.data,a.version)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"cidr",code:G.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?Dh.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"base64",code:G.invalid_string,message:a.message}),s.dirty()):a.kind==="base64url"?jh.test(e.data)||(i=this._getOrReturnCtx(e,i),Z(i,{validation:"base64url",code:G.invalid_string,message:a.message}),s.dirty()):ae.assertNever(a);return{status:s.value,value:e.data}}_regex(e,r,s){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...W.errToObj(s)})}_addCheck(e){return new ht({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...W.errToObj(e)})}url(e){return this._addCheck({kind:"url",...W.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...W.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...W.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...W.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...W.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...W.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...W.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...W.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...W.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...W.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...W.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...W.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...W.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...W.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...W.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...W.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...W.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...W.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...W.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...W.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...W.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...W.errToObj(r)})}nonempty(e){return this.min(1,W.errToObj(e))}trim(){return new ht({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ht({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ht({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}ht.create=t=>new ht({checks:[],typeName:J.ZodString,coerce:t?.coerce??!1,...ee(t)});function Uh(t,e){const r=(t.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,i=r>s?r:s,a=Number.parseInt(t.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return a%o/10**i}class Ft extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==H.number){const a=this._getOrReturnCtx(e);return Z(a,{code:G.invalid_type,expected:H.number,received:a.parsedType}),Y}let s;const i=new $e;for(const a of this._def.checks)a.kind==="int"?ae.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{code:G.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:G.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:G.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?Uh(e.data,a.value)!==0&&(s=this._getOrReturnCtx(e,s),Z(s,{code:G.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),Z(s,{code:G.not_finite,message:a.message}),i.dirty()):ae.assertNever(a);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,W.toString(r))}gt(e,r){return this.setLimit("min",e,!1,W.toString(r))}lte(e,r){return this.setLimit("max",e,!0,W.toString(r))}lt(e,r){return this.setLimit("max",e,!1,W.toString(r))}setLimit(e,r,s,i){return new Ft({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:W.toString(i)}]})}_addCheck(e){return new Ft({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:W.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:W.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:W.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:W.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:W.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:W.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:W.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:W.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:W.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ae.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Ft.create=t=>new Ft({checks:[],typeName:J.ZodNumber,coerce:t?.coerce||!1,...ee(t)});class Ot extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==H.bigint)return this._getInvalidInput(e);let s;const i=new $e;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:G.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:G.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),Z(s,{code:G.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):ae.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return Z(r,{code:G.invalid_type,expected:H.bigint,received:r.parsedType}),Y}gte(e,r){return this.setLimit("min",e,!0,W.toString(r))}gt(e,r){return this.setLimit("min",e,!1,W.toString(r))}lte(e,r){return this.setLimit("max",e,!0,W.toString(r))}lt(e,r){return this.setLimit("max",e,!1,W.toString(r))}setLimit(e,r,s,i){return new Ot({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:s,message:W.toString(i)}]})}_addCheck(e){return new Ot({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:W.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:W.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:W.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:W.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:W.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Ot.create=t=>new Ot({checks:[],typeName:J.ZodBigInt,coerce:t?.coerce??!1,...ee(t)});class Dn extends re{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==H.boolean){const s=this._getOrReturnCtx(e);return Z(s,{code:G.invalid_type,expected:H.boolean,received:s.parsedType}),Y}return Qe(e.data)}}Dn.create=t=>new Dn({typeName:J.ZodBoolean,coerce:t?.coerce||!1,...ee(t)});class Gt extends re{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==H.date){const a=this._getOrReturnCtx(e);return Z(a,{code:G.invalid_type,expected:H.date,received:a.parsedType}),Y}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return Z(a,{code:G.invalid_date}),Y}const s=new $e;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),Z(i,{code:G.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),Z(i,{code:G.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):ae.assertNever(a);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Gt({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:W.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:W.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Gt.create=t=>new Gt({checks:[],coerce:t?.coerce||!1,typeName:J.ZodDate,...ee(t)});class gr extends re{_parse(e){if(this._getType(e)!==H.symbol){const s=this._getOrReturnCtx(e);return Z(s,{code:G.invalid_type,expected:H.symbol,received:s.parsedType}),Y}return Qe(e.data)}}gr.create=t=>new gr({typeName:J.ZodSymbol,...ee(t)});class jn extends re{_parse(e){if(this._getType(e)!==H.undefined){const s=this._getOrReturnCtx(e);return Z(s,{code:G.invalid_type,expected:H.undefined,received:s.parsedType}),Y}return Qe(e.data)}}jn.create=t=>new jn({typeName:J.ZodUndefined,...ee(t)});class kn extends re{_parse(e){if(this._getType(e)!==H.null){const s=this._getOrReturnCtx(e);return Z(s,{code:G.invalid_type,expected:H.null,received:s.parsedType}),Y}return Qe(e.data)}}kn.create=t=>new kn({typeName:J.ZodNull,...ee(t)});class on extends re{constructor(){super(...arguments),this._any=!0}_parse(e){return Qe(e.data)}}on.create=t=>new on({typeName:J.ZodAny,...ee(t)});class Vt extends re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qe(e.data)}}Vt.create=t=>new Vt({typeName:J.ZodUnknown,...ee(t)});class Dt extends re{_parse(e){const r=this._getOrReturnCtx(e);return Z(r,{code:G.invalid_type,expected:H.never,received:r.parsedType}),Y}}Dt.create=t=>new Dt({typeName:J.ZodNever,...ee(t)});class pr extends re{_parse(e){if(this._getType(e)!==H.undefined){const s=this._getOrReturnCtx(e);return Z(s,{code:G.invalid_type,expected:H.void,received:s.parsedType}),Y}return Qe(e.data)}}pr.create=t=>new pr({typeName:J.ZodVoid,...ee(t)});class mt extends re{_parse(e){const{ctx:r,status:s}=this._processInputParams(e),i=this._def;if(r.parsedType!==H.array)return Z(r,{code:G.invalid_type,expected:H.array,received:r.parsedType}),Y;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(o||l)&&(Z(r,{code:o?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Z(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Z(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>i.type._parseAsync(new _t(r,o,r.path,l)))).then(o=>$e.mergeArray(s,o));const a=[...r.data].map((o,l)=>i.type._parseSync(new _t(r,o,r.path,l)));return $e.mergeArray(s,a)}get element(){return this._def.type}min(e,r){return new mt({...this._def,minLength:{value:e,message:W.toString(r)}})}max(e,r){return new mt({...this._def,maxLength:{value:e,message:W.toString(r)}})}length(e,r){return new mt({...this._def,exactLength:{value:e,message:W.toString(r)}})}nonempty(e){return this.min(1,e)}}mt.create=(t,e)=>new mt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...ee(e)});function Wt(t){if(t instanceof Se){const e={};for(const r in t.shape){const s=t.shape[r];e[r]=St.create(Wt(s))}return new Se({...t._def,shape:()=>e})}else return t instanceof mt?new mt({...t._def,type:Wt(t.element)}):t instanceof St?St.create(Wt(t.unwrap())):t instanceof Bt?Bt.create(Wt(t.unwrap())):t instanceof Nt?Nt.create(t.items.map(e=>Wt(e))):t}class Se extends re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=ae.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==H.object){const h=this._getOrReturnCtx(e);return Z(h,{code:G.invalid_type,expected:H.object,received:h.parsedType}),Y}const{status:s,ctx:i}=this._processInputParams(e),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Dt&&this._def.unknownKeys==="strip"))for(const h in i.data)o.includes(h)||l.push(h);const f=[];for(const h of o){const c=a[h],u=i.data[h];f.push({key:{status:"valid",value:h},value:c._parse(new _t(i,u,i.path,h)),alwaysSet:h in i.data})}if(this._def.catchall instanceof Dt){const h=this._def.unknownKeys;if(h==="passthrough")for(const c of l)f.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(h==="strict")l.length>0&&(Z(i,{code:G.unrecognized_keys,keys:l}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const h=this._def.catchall;for(const c of l){const u=i.data[c];f.push({key:{status:"valid",value:c},value:h._parse(new _t(i,u,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const h=[];for(const c of f){const u=await c.key,d=await c.value;h.push({key:u,value:d,alwaysSet:c.alwaysSet})}return h}).then(h=>$e.mergeObjectSync(s,h)):$e.mergeObjectSync(s,f)}get shape(){return this._def.shape()}strict(e){return W.errToObj,new Se({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,s)=>{const i=this._def.errorMap?.(r,s).message??s.defaultError;return r.code==="unrecognized_keys"?{message:W.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Se({...this._def,unknownKeys:"strip"})}passthrough(){return new Se({...this._def,unknownKeys:"passthrough"})}extend(e){return new Se({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Se({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Se({...this._def,catchall:e})}pick(e){const r={};for(const s of ae.objectKeys(e))e[s]&&this.shape[s]&&(r[s]=this.shape[s]);return new Se({...this._def,shape:()=>r})}omit(e){const r={};for(const s of ae.objectKeys(this.shape))e[s]||(r[s]=this.shape[s]);return new Se({...this._def,shape:()=>r})}deepPartial(){return Wt(this)}partial(e){const r={};for(const s of ae.objectKeys(this.shape)){const i=this.shape[s];e&&!e[s]?r[s]=i:r[s]=i.optional()}return new Se({...this._def,shape:()=>r})}required(e){const r={};for(const s of ae.objectKeys(this.shape))if(e&&!e[s])r[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof St;)a=a._def.innerType;r[s]=a}return new Se({...this._def,shape:()=>r})}keyof(){return yo(ae.objectKeys(this.shape))}}Se.create=(t,e)=>new Se({shape:()=>t,unknownKeys:"strip",catchall:Dt.create(),typeName:J.ZodObject,...ee(e)});Se.strictCreate=(t,e)=>new Se({shape:()=>t,unknownKeys:"strict",catchall:Dt.create(),typeName:J.ZodObject,...ee(e)});Se.lazycreate=(t,e)=>new Se({shape:t,unknownKeys:"strip",catchall:Dt.create(),typeName:J.ZodObject,...ee(e)});class En extends re{_parse(e){const{ctx:r}=this._processInputParams(e),s=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new it(l.ctx.common.issues));return Z(r,{code:G.invalid_union,unionErrors:o}),Y}if(r.common.async)return Promise.all(s.map(async a=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const f of s){const h={...r,common:{...r.common,issues:[]},parent:null},c=f._parseSync({data:r.data,path:r.path,parent:h});if(c.status==="valid")return c;c.status==="dirty"&&!a&&(a={result:c,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(f=>new it(f));return Z(r,{code:G.invalid_union,unionErrors:l}),Y}}get options(){return this._def.options}}En.create=(t,e)=>new En({options:t,typeName:J.ZodUnion,...ee(e)});const Pt=t=>t instanceof On?Pt(t.schema):t instanceof pt?Pt(t.innerType()):t instanceof Un?[t.value]:t instanceof Ut?t.options:t instanceof Bn?ae.objectValues(t.enum):t instanceof Ln?Pt(t._def.innerType):t instanceof jn?[void 0]:t instanceof kn?[null]:t instanceof St?[void 0,...Pt(t.unwrap())]:t instanceof Bt?[null,...Pt(t.unwrap())]:t instanceof ks||t instanceof Vn?Pt(t.unwrap()):t instanceof zn?Pt(t._def.innerType):[];class Ir extends re{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==H.object)return Z(r,{code:G.invalid_type,expected:H.object,received:r.parsedType}),Y;const s=this.discriminator,i=r.data[s],a=this.optionsMap.get(i);return a?r.common.async?a._parseAsync({data:r.data,path:r.path,parent:r}):a._parseSync({data:r.data,path:r.path,parent:r}):(Z(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,s){const i=new Map;for(const a of r){const o=Pt(a.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,a)}}return new Ir({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...ee(s)})}}function fs(t,e){const r=It(t),s=It(e);if(t===e)return{valid:!0,data:t};if(r===H.object&&s===H.object){const i=ae.objectKeys(e),a=ae.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of a){const f=fs(t[l],e[l]);if(!f.valid)return{valid:!1};o[l]=f.data}return{valid:!0,data:o}}else if(r===H.array&&s===H.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const o=t[a],l=e[a],f=fs(o,l);if(!f.valid)return{valid:!1};i.push(f.data)}return{valid:!0,data:i}}else return r===H.date&&s===H.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Mn extends re{_parse(e){const{status:r,ctx:s}=this._processInputParams(e),i=(a,o)=>{if(us(a)||us(o))return Y;const l=fs(a.value,o.value);return l.valid?((ds(a)||ds(o))&&r.dirty(),{status:r.value,value:l.data}):(Z(s,{code:G.invalid_intersection_types}),Y)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Mn.create=(t,e,r)=>new Mn({left:t,right:e,typeName:J.ZodIntersection,...ee(r)});class Nt extends re{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==H.array)return Z(s,{code:G.invalid_type,expected:H.array,received:s.parsedType}),Y;if(s.data.length<this._def.items.length)return Z(s,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&s.data.length>this._def.items.length&&(Z(s,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...s.data].map((o,l)=>{const f=this._def.items[l]||this._def.rest;return f?f._parse(new _t(s,o,s.path,l)):null}).filter(o=>!!o);return s.common.async?Promise.all(a).then(o=>$e.mergeArray(r,o)):$e.mergeArray(r,a)}get items(){return this._def.items}rest(e){return new Nt({...this._def,rest:e})}}Nt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Nt({items:t,typeName:J.ZodTuple,rest:null,...ee(e)})};class Fn extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==H.object)return Z(s,{code:G.invalid_type,expected:H.object,received:s.parsedType}),Y;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in s.data)i.push({key:a._parse(new _t(s,l,s.path,l)),value:o._parse(new _t(s,s.data[l],s.path,l)),alwaysSet:l in s.data});return s.common.async?$e.mergeObjectAsync(r,i):$e.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,s){return r instanceof re?new Fn({keyType:e,valueType:r,typeName:J.ZodRecord,...ee(s)}):new Fn({keyType:ht.create(),valueType:e,typeName:J.ZodRecord,...ee(r)})}}class vr extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==H.map)return Z(s,{code:G.invalid_type,expected:H.map,received:s.parsedType}),Y;const i=this._def.keyType,a=this._def.valueType,o=[...s.data.entries()].map(([l,f],h)=>({key:i._parse(new _t(s,l,s.path,[h,"key"])),value:a._parse(new _t(s,f,s.path,[h,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const f of o){const h=await f.key,c=await f.value;if(h.status==="aborted"||c.status==="aborted")return Y;(h.status==="dirty"||c.status==="dirty")&&r.dirty(),l.set(h.value,c.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const f of o){const h=f.key,c=f.value;if(h.status==="aborted"||c.status==="aborted")return Y;(h.status==="dirty"||c.status==="dirty")&&r.dirty(),l.set(h.value,c.value)}return{status:r.value,value:l}}}}vr.create=(t,e,r)=>new vr({valueType:e,keyType:t,typeName:J.ZodMap,...ee(r)});class qt extends re{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.parsedType!==H.set)return Z(s,{code:G.invalid_type,expected:H.set,received:s.parsedType}),Y;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(Z(s,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(Z(s,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function o(f){const h=new Set;for(const c of f){if(c.status==="aborted")return Y;c.status==="dirty"&&r.dirty(),h.add(c.value)}return{status:r.value,value:h}}const l=[...s.data.values()].map((f,h)=>a._parse(new _t(s,f,s.path,h)));return s.common.async?Promise.all(l).then(f=>o(f)):o(l)}min(e,r){return new qt({...this._def,minSize:{value:e,message:W.toString(r)}})}max(e,r){return new qt({...this._def,maxSize:{value:e,message:W.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}qt.create=(t,e)=>new qt({valueType:t,minSize:null,maxSize:null,typeName:J.ZodSet,...ee(e)});class sn extends re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==H.function)return Z(r,{code:G.invalid_type,expected:H.function,received:r.parsedType}),Y;function s(l,f){return mr({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,hr(),an].filter(h=>!!h),issueData:{code:G.invalid_arguments,argumentsError:f}})}function i(l,f){return mr({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,hr(),an].filter(h=>!!h),issueData:{code:G.invalid_return_type,returnTypeError:f}})}const a={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof ln){const l=this;return Qe(async function(...f){const h=new it([]),c=await l._def.args.parseAsync(f,a).catch(p=>{throw h.addIssue(s(f,p)),h}),u=await Reflect.apply(o,this,c);return await l._def.returns._def.type.parseAsync(u,a).catch(p=>{throw h.addIssue(i(u,p)),h})})}else{const l=this;return Qe(function(...f){const h=l._def.args.safeParse(f,a);if(!h.success)throw new it([s(f,h.error)]);const c=Reflect.apply(o,this,h.data),u=l._def.returns.safeParse(c,a);if(!u.success)throw new it([i(c,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new sn({...this._def,args:Nt.create(e).rest(Vt.create())})}returns(e){return new sn({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,s){return new sn({args:e||Nt.create([]).rest(Vt.create()),returns:r||Vt.create(),typeName:J.ZodFunction,...ee(s)})}}class On extends re{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}On.create=(t,e)=>new On({getter:t,typeName:J.ZodLazy,...ee(e)});class Un extends re{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Z(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:e.data}}get value(){return this._def.value}}Un.create=(t,e)=>new Un({value:t,typeName:J.ZodLiteral,...ee(e)});function yo(t,e){return new Ut({values:t,typeName:J.ZodEnum,...ee(e)})}class Ut extends re{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),s=this._def.values;return Z(r,{expected:ae.joinValues(s),received:r.parsedType,code:G.invalid_type}),Y}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),s=this._def.values;return Z(r,{received:r.data,code:G.invalid_enum_value,options:s}),Y}return Qe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Ut.create(e,{...this._def,...r})}exclude(e,r=this._def){return Ut.create(this.options.filter(s=>!e.includes(s)),{...this._def,...r})}}Ut.create=yo;class Bn extends re{_parse(e){const r=ae.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==H.string&&s.parsedType!==H.number){const i=ae.objectValues(r);return Z(s,{expected:ae.joinValues(i),received:s.parsedType,code:G.invalid_type}),Y}if(this._cache||(this._cache=new Set(ae.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=ae.objectValues(r);return Z(s,{received:s.data,code:G.invalid_enum_value,options:i}),Y}return Qe(e.data)}get enum(){return this._def.values}}Bn.create=(t,e)=>new Bn({values:t,typeName:J.ZodNativeEnum,...ee(e)});class ln extends re{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==H.promise&&r.common.async===!1)return Z(r,{code:G.invalid_type,expected:H.promise,received:r.parsedType}),Y;const s=r.parsedType===H.promise?r.data:Promise.resolve(r.data);return Qe(s.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}ln.create=(t,e)=>new ln({type:t,typeName:J.ZodPromise,...ee(e)});class pt extends re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:s}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:o=>{Z(s,o),o.fatal?r.abort():r.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(s.data,a);if(s.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return Y;const f=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return f.status==="aborted"?Y:f.status==="dirty"||r.value==="dirty"?en(f.value):f});{if(r.value==="aborted")return Y;const l=this._def.schema._parseSync({data:o,path:s.path,parent:s});return l.status==="aborted"?Y:l.status==="dirty"||r.value==="dirty"?en(l.value):l}}if(i.type==="refinement"){const o=l=>{const f=i.refinement(l,a);if(s.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?Y:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?Y:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!$t(o))return Y;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>$t(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:r.value,value:l})):Y);ae.assertNever(i)}}pt.create=(t,e,r)=>new pt({schema:t,typeName:J.ZodEffects,effect:e,...ee(r)});pt.createWithPreprocess=(t,e,r)=>new pt({schema:e,effect:{type:"preprocess",transform:t},typeName:J.ZodEffects,...ee(r)});class St extends re{_parse(e){return this._getType(e)===H.undefined?Qe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}St.create=(t,e)=>new St({innerType:t,typeName:J.ZodOptional,...ee(e)});class Bt extends re{_parse(e){return this._getType(e)===H.null?Qe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bt.create=(t,e)=>new Bt({innerType:t,typeName:J.ZodNullable,...ee(e)});class Ln extends re{_parse(e){const{ctx:r}=this._processInputParams(e);let s=r.data;return r.parsedType===H.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ln.create=(t,e)=>new Ln({innerType:t,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ee(e)});class zn extends re{_parse(e){const{ctx:r}=this._processInputParams(e),s={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Rn(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new it(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new it(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}zn.create=(t,e)=>new zn({innerType:t,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ee(e)});class yr extends re{_parse(e){if(this._getType(e)!==H.nan){const s=this._getOrReturnCtx(e);return Z(s,{code:G.invalid_type,expected:H.nan,received:s.parsedType}),Y}return{status:"valid",value:e.data}}}yr.create=t=>new yr({typeName:J.ZodNaN,...ee(t)});const Bh=Symbol("zod_brand");class ks extends re{_parse(e){const{ctx:r}=this._processInputParams(e),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}}class Hn extends re{_parse(e){const{status:r,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?Y:a.status==="dirty"?(r.dirty(),en(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Y:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(e,r){return new Hn({in:e,out:r,typeName:J.ZodPipeline})}}class Vn extends re{_parse(e){const r=this._def.innerType._parse(e),s=i=>($t(i)&&(i.value=Object.freeze(i.value)),i);return Rn(r)?r.then(i=>s(i)):s(r)}unwrap(){return this._def.innerType}}Vn.create=(t,e)=>new Vn({innerType:t,typeName:J.ZodReadonly,...ee(e)});function xi(t,e){const r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function Es(t,e={},r){return t?on.create().superRefine((s,i)=>{const a=t(s);if(a instanceof Promise)return a.then(o=>{if(!o){const l=xi(e,s),f=l.fatal??r??!0;i.addIssue({code:"custom",...l,fatal:f})}});if(!a){const o=xi(e,s),l=o.fatal??r??!0;i.addIssue({code:"custom",...o,fatal:l})}}):on.create()}const Lh={object:Se.lazycreate};var J;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(J||(J={}));const zh=(t,e={message:`Input not instance of ${t.name}`})=>Es(r=>r instanceof t,e),Ye=ht.create,cn=Ft.create,Vh=yr.create,$h=Ot.create,Rr=Dn.create,Gh=Gt.create,qh=gr.create,Zh=jn.create,xo=kn.create,xr=on.create,Qh=Vt.create,Hh=Dt.create,Wh=pr.create,Dr=mt.create,un=Se.create,Xh=Se.strictCreate,Ms=En.create,Kh=Ir.create,Yh=Mn.create,Jh=Nt.create,bo=Fn.create,em=vr.create,tm=qt.create,nm=sn.create,rm=On.create,sm=Un.create,nr=Ut.create,im=Bn.create,am=ln.create,bi=pt.create,om=St.create,lm=Bt.create,cm=pt.createWithPreprocess,um=Hn.create,dm=()=>Ye().optional(),fm=()=>cn().optional(),hm=()=>Rr().optional(),mm={string:(t=>ht.create({...t,coerce:!0})),number:(t=>Ft.create({...t,coerce:!0})),boolean:(t=>Dn.create({...t,coerce:!0})),bigint:(t=>Ot.create({...t,coerce:!0})),date:(t=>Gt.create({...t,coerce:!0}))},gm=Y,pm=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Bh,DIRTY:en,EMPTY_PATH:vh,INVALID:Y,NEVER:gm,OK:Qe,ParseStatus:$e,Schema:re,ZodAny:on,ZodArray:mt,ZodBigInt:Ot,ZodBoolean:Dn,ZodBranded:ks,ZodCatch:zn,ZodDate:Gt,ZodDefault:Ln,ZodDiscriminatedUnion:Ir,ZodEffects:pt,ZodEnum:Ut,ZodError:it,get ZodFirstPartyTypeKind(){return J},ZodFunction:sn,ZodIntersection:Mn,ZodIssueCode:G,ZodLazy:On,ZodLiteral:Un,ZodMap:vr,ZodNaN:yr,ZodNativeEnum:Bn,ZodNever:Dt,ZodNull:kn,ZodNullable:Bt,ZodNumber:Ft,ZodObject:Se,ZodOptional:St,ZodParsedType:H,ZodPipeline:Hn,ZodPromise:ln,ZodReadonly:Vn,ZodRecord:Fn,ZodSchema:re,ZodSet:qt,ZodString:ht,ZodSymbol:gr,ZodTransformer:pt,ZodTuple:Nt,ZodType:re,ZodUndefined:jn,ZodUnion:En,ZodUnknown:Vt,ZodVoid:pr,addIssueToContext:Z,any:xr,array:Dr,bigint:$h,boolean:Rr,coerce:mm,custom:Es,date:Gh,datetimeRegex:vo,defaultErrorMap:an,discriminatedUnion:Kh,effect:bi,enum:nr,function:nm,getErrorMap:hr,getParsedType:It,instanceof:zh,intersection:Yh,isAborted:us,isAsync:Rn,isDirty:ds,isValid:$t,late:Lh,lazy:rm,literal:sm,makeIssue:mr,map:em,nan:Vh,nativeEnum:im,never:Hh,null:xo,nullable:lm,number:cn,object:un,get objectUtil(){return cs},oboolean:hm,onumber:fm,optional:om,ostring:dm,pipeline:um,preprocess:cm,promise:am,quotelessJson:gh,record:bo,set:tm,setErrorMap:ph,strictObject:Xh,string:Ye,symbol:qh,transformer:bi,tuple:Jh,undefined:Zh,union:Ms,unknown:Qh,get util(){return ae},void:Wh},Symbol.toStringTag,{value:"Module"})),we={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Ae(t,e){return e.includes(t.columnType)}function vm(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const ym=Ms([Ye(),cn(),Rr(),xo()]),xm=Ms([ym,bo(xr()),Dr(xr())]),bm=Es(t=>t instanceof Buffer);function wo(t,e){const r=e?.zodInstance??pm,s=e?.coerce??{};let i;return vm(t)&&(i=t.enumValues.length?r.enum(t.enumValues):r.string()),i||(Ae(t,["PgGeometry","PgPointTuple"])?i=r.tuple([r.number(),r.number()]):Ae(t,["PgGeometryObject","PgPointObject"])?i=r.object({x:r.number(),y:r.number()}):Ae(t,["PgHalfVector","PgVector"])?(i=r.array(r.number()),i=t.dimensions?i.length(t.dimensions):i):Ae(t,["PgLine"])?i=r.tuple([r.number(),r.number(),r.number()]):Ae(t,["PgLineABC"])?i=r.object({a:r.number(),b:r.number(),c:r.number()}):Ae(t,["PgArray"])?(i=r.array(wo(t.baseColumn,r)),i=t.size?i.length(t.size):i):t.dataType==="array"?i=r.array(r.any()):t.dataType==="number"?i=wm(t,r,s):t.dataType==="bigint"?i=Sm(t,r,s):t.dataType==="boolean"?i=s===!0||s.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?i=s===!0||s.date?r.coerce.date():r.date():t.dataType==="string"?i=Cm(t,r,s):t.dataType==="json"?i=xm:t.dataType==="custom"?i=r.any():t.dataType==="buffer"&&(i=bm)),i||(i=r.any()),i}function wm(t,e,r){let s=t.getSQLType().includes("unsigned"),i,a,o=!1;Ae(t,["MySqlTinyInt","SingleStoreTinyInt"])?(i=s?0:we.INT8_MIN,a=s?we.INT8_UNSIGNED_MAX:we.INT8_MAX,o=!0):Ae(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(i=s?0:we.INT16_MIN,a=s?we.INT16_UNSIGNED_MAX:we.INT16_MAX,o=!0):Ae(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(i=s?0:we.INT24_MIN,a=s?we.INT24_UNSIGNED_MAX:we.INT24_MAX,o=Ae(t,["MySqlMediumInt","SingleStoreMediumInt"])):Ae(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(i=s?0:we.INT32_MIN,a=s?we.INT32_UNSIGNED_MAX:we.INT32_MAX,o=!0):Ae(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(i=s?0:we.INT48_MIN,a=s?we.INT48_UNSIGNED_MAX:we.INT48_MAX):Ae(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(s=s||Ae(t,["MySqlSerial","SingleStoreSerial"]),i=s?0:Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,o=!0):Ae(t,["MySqlYear","SingleStoreYear"])?(i=1901,a=2155,o=!0):(i=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER);let l=r===!0||r?.number?e.coerce.number():e.number();return l=l.min(i).max(a),o?l.int():l}function Sm(t,e,r){const s=t.getSQLType().includes("unsigned"),i=s?0n:we.INT64_MIN,a=s?we.INT64_UNSIGNED_MAX:we.INT64_MAX;return(r===!0||r?.bigint?e.coerce.bigint():e.bigint()).min(i).max(a)}function Cm(t,e,r){if(Ae(t,["PgUUID"]))return e.string().uuid();let s,i,a=!1;Ae(t,["PgVarchar","SQLiteText"])?s=t.length:Ae(t,["MySqlVarChar","SingleStoreVarChar"])?s=t.length??we.INT16_UNSIGNED_MAX:Ae(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?s=we.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?s=we.INT24_UNSIGNED_MAX:t.textType==="text"?s=we.INT16_UNSIGNED_MAX:s=we.INT8_UNSIGNED_MAX),Ae(t,["PgChar","MySqlChar","SingleStoreChar"])&&(s=t.length,a=!0),Ae(t,["PgBinaryVector"])&&(i=/^[01]+$/,s=t.dimensions);let o=r===!0||r?.string?e.coerce.string():e.string();return o=i?o.regex(i):o,s&&a?o.length(s):s?o.max(s):o}function So(t){return ao(t)?ld(t):cd(t)}function Co(t,e,r,s){const i={};for(const[a,o]of Object.entries(t)){if(!Le(o,Pn)&&!Le(o,_e)&&!Le(o,_e.Aliased)&&typeof o=="object"){const u=ao(o)||od(o)?So(o):o;i[a]=Co(u,e[a]??{},r,s);continue}const l=e[a];if(l!==void 0&&typeof l!="function"){i[a]=l;continue}const f=Le(o,Pn)?o:void 0,h=f?wo(f,s):xr(),c=typeof l=="function"?l(h):h;r.never(f)||(i[a]=c,f&&(r.nullable(f)&&(i[a]=i[a].nullable()),r.optional(f)&&(i[a]=i[a].optional())))}return un(i)}const _m={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},Nm=(t,e)=>{const r=So(t);return Co(r,{},_m)},Tm=mh("users",{id:ho("id").primaryKey().default(In`gen_random_uuid()`),username:os("username").notNull().unique(),password:os("password").notNull()});Nm(Tm).pick({username:!0,password:!0});un({id:Ye(),name:Ye(),qty:Ye().optional(),unit:Ye().optional(),imageId:Ye().optional()});un({id:Ye(),url:Ye(),thumbnailUrl:Ye().optional(),recognized:Dr(un({name:Ye(),normalized:Ye(),confidence:cn()})).optional()});const Yn=un({diet:nr(["any","vegan","vegetarian","pescatarian","omnivore"]).default("any"),allergies:Dr(nr(["peanut","dairy","gluten","shellfish","tree-nuts","soy","eggs","fish"])).default([]),maxCookTime:cn().min(5).max(240).default(60),cuisine:Ye().optional(),difficulty:nr(["any","easy","medium","hard"]).default("any"),allowSubstitutions:Rr().default(!0),servings:cn().min(1).max(12).default(4)}),wi=[{value:"peanut",label:"Peanuts"},{value:"dairy",label:"Dairy"},{value:"gluten",label:"Gluten"},{value:"shellfish",label:"Shellfish"},{value:"tree-nuts",label:"Tree Nuts"},{value:"soy",label:"Soy"},{value:"eggs",label:"Eggs"},{value:"fish",label:"Fish"}],Am=["Italian","Chinese","Mexican","Indian","Japanese","French","Thai","Mediterranean","American","Korean","Greek","Spanish","Middle Eastern","Vietnamese","British","German","Brazilian"];function Pm(t,e){const[r,s]=R.useState(t);return R.useEffect(()=>{const i=setTimeout(()=>{s(t)},e);return()=>{clearTimeout(i)}},[t,e]),r}const Im=R.memo(function({onFiltersChange:e,className:r}){const[s,i]=Lo(),a=()=>new URLSearchParams(window.location.search),o=D=>{const E=`${window.location.pathname}?${D}`;i(E)},[l,f]=R.useState(!1),[h,c]=R.useState(()=>{const D=a(),E={},j=D.get("diet");j&&(E.diet=j);const U=D.get("allergies");U&&(E.allergies=U.split(","));const T=D.get("maxCookTime");T&&(E.maxCookTime=parseInt(T));const O=D.get("cuisine");O&&(E.cuisine=O);const b=D.get("difficulty");b&&(E.difficulty=b);const m=D.get("allowSubstitutions");m&&(E.allowSubstitutions=m==="true");const x=D.get("servings");return x&&(E.servings=parseInt(x)),Yn.parse(E)}),u=Pm(h,500);R.useEffect(()=>{const D=new URLSearchParams;u.diet!=="any"&&D.set("diet",u.diet),u.allergies.length>0&&D.set("allergies",u.allergies.join(",")),u.maxCookTime!==60&&D.set("maxCookTime",u.maxCookTime.toString()),u.cuisine&&D.set("cuisine",u.cuisine),u.difficulty!=="any"&&D.set("difficulty",u.difficulty),u.allowSubstitutions||D.set("allowSubstitutions","false"),u.servings!==4&&D.set("servings",u.servings.toString());const j=new URLSearchParams(window.location.search).get("ingredients");j&&D.set("ingredients",j),o(D.toString()),e(u)},[u,e,o]);const d=R.useCallback((D,E)=>{c(j=>({...j,[D]:E}))},[]),p=R.useCallback(D=>{c(E=>({...E,allergies:E.allergies.includes(D)?E.allergies.filter(j=>j!==D):[...E.allergies,D]}))},[]),C=R.useCallback(()=>{const D=Yn.parse({});c(D)},[]),I=R.useMemo(()=>{const D=Yn.parse({});let E=0;return h.diet!==D.diet&&E++,h.allergies.length>0&&E++,h.maxCookTime!==D.maxCookTime&&E++,h.cuisine&&E++,h.difficulty!==D.difficulty&&E++,h.allowSubstitutions!==D.allowSubstitutions&&E++,h.servings!==D.servings&&E++,E},[h]),P=(()=>{const D=Yn.parse({}),E=[];return h.diet!==D.diet&&E.push({label:h.diet.charAt(0).toUpperCase()+h.diet.slice(1),onRemove:()=>d("diet",D.diet)}),h.allergies.length>0&&h.allergies.forEach(j=>{const U=wi.find(T=>T.value===j)?.label||j;E.push({label:`No ${U}`,onRemove:()=>p(j)})}),h.maxCookTime!==D.maxCookTime&&E.push({label:`${h.maxCookTime} min`,onRemove:()=>d("maxCookTime",D.maxCookTime)}),h.cuisine&&E.push({label:h.cuisine,onRemove:()=>d("cuisine",void 0)}),h.difficulty!==D.difficulty&&E.push({label:h.difficulty.charAt(0).toUpperCase()+h.difficulty.slice(1),onRemove:()=>d("difficulty",D.difficulty)}),h.allowSubstitutions!==D.allowSubstitutions&&E.push({label:"No substitutions",onRemove:()=>d("allowSubstitutions",D.allowSubstitutions)}),h.servings!==D.servings&&E.push({label:`${h.servings} servings`,onRemove:()=>d("servings",D.servings)}),E})();return v.jsx(vu,{open:l,onOpenChange:f,children:v.jsxs(wt,{className:ke("w-full border border-gray-300 shadow-lg rounded-lg overflow-hidden",r),children:[v.jsx(yu,{asChild:!0,children:v.jsx(Qo,{className:"pb-3 cursor-pointer hover:bg-gray-50 transition-colors border-b border-gray-200 rounded-t-lg",children:v.jsxs(Ho,{className:"flex items-center justify-between text-base font-semibold",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Do,{className:"h-5 w-5 text-gray-700"}),v.jsx("span",{className:"text-gray-800",children:"Filters"}),I>0&&v.jsx(Ve,{variant:"secondary",className:"h-6 text-xs bg-primary/20 text-primary border-primary/30",children:I})]}),v.jsx(jo,{className:ke("h-5 w-5 text-gray-600 transition-transform",l&&"rotate-180")})]})})}),v.jsx(xu,{children:v.jsxs(Rt,{className:"space-y-6 bg-gray-50/30",children:[P.length>0&&v.jsxs("div",{className:"space-y-3 p-4 bg-white rounded-lg border border-gray-200",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Active Filters"}),v.jsx(De,{variant:"ghost",size:"sm",onClick:C,className:"h-auto py-1 px-3 text-xs text-secondary hover:text-secondary/80 hover:bg-secondary/10 border border-secondary/20","data-testid":"clear-all-filters",children:"Clear All"})]}),v.jsx("div",{className:"flex flex-wrap gap-2",children:P.map((D,E)=>v.jsxs(Ve,{variant:"secondary",className:"text-xs gap-1 bg-secondary/10 text-secondary border border-secondary/20 hover:bg-secondary/20",children:[D.label,v.jsx(De,{variant:"ghost",size:"sm",onClick:D.onRemove,className:"h-auto w-auto p-0 hover:bg-transparent hover:text-secondary",children:v.jsx(dn,{className:"h-3 w-3"})})]},E))})]}),v.jsxs("div",{className:"grid gap-6 md:grid-cols-2 mt-6",children:[v.jsxs("div",{className:"space-y-3 p-4 bg-white rounded-lg border border-gray-200",children:[v.jsx(rt,{className:"text-sm font-semibold text-gray-700",children:"Diet"}),v.jsxs(Qr,{value:h.diet,onValueChange:D=>d("diet",D),children:[v.jsx(Hr,{"data-testid":"diet-select",className:"border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20",children:v.jsx(Wr,{})}),v.jsxs(Xr,{className:"border border-gray-200 shadow-lg",children:[v.jsx(Et,{value:"any",children:"Any"}),v.jsx(Et,{value:"vegan",children:"Vegan"}),v.jsx(Et,{value:"vegetarian",children:"Vegetarian"}),v.jsx(Et,{value:"pescatarian",children:"Pescatarian"}),v.jsx(Et,{value:"omnivore",children:"Omnivore"})]})]})]}),v.jsxs("div",{className:"space-y-3 p-4 bg-white rounded-lg border border-gray-200",children:[v.jsx(rt,{className:"text-sm font-semibold text-gray-700",children:"Servings"}),v.jsx(ji,{type:"number",min:1,max:12,value:h.servings,onChange:D=>d("servings",parseInt(D.target.value)||4),className:"w-full border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20","data-testid":"servings-input"})]})]}),v.jsxs("div",{className:"space-y-4 p-4 bg-white rounded-lg border border-gray-200 mt-6",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx(rt,{className:"text-sm font-semibold text-gray-700",children:"Max Cook Time"}),v.jsxs("span",{className:"text-sm font-medium text-primary bg-primary/10 px-2 py-1 rounded",children:[h.maxCookTime," minutes"]})]}),v.jsx(La,{value:[h.maxCookTime],onValueChange:([D])=>d("maxCookTime",D),max:240,min:5,step:5,className:"w-full","data-testid":"cook-time-slider"})]}),v.jsxs("div",{className:"space-y-4 p-4 bg-white rounded-lg border border-gray-200 mt-6",children:[v.jsx(rt,{className:"text-sm font-semibold text-gray-700",children:"Difficulty"}),v.jsxs(to,{value:h.difficulty,onValueChange:D=>d("difficulty",D),className:"flex gap-6","data-testid":"difficulty-radio",children:[v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(bn,{value:"any",id:"any",className:"border border-gray-300 text-primary focus:ring-2 focus:ring-primary/20"}),v.jsx(rt,{htmlFor:"any",className:"text-sm font-medium text-gray-700",children:"Any"})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(bn,{value:"easy",id:"easy",className:"border border-gray-300 text-green-600 focus:ring-2 focus:ring-green-200"}),v.jsx(rt,{htmlFor:"easy",className:"text-sm font-medium text-gray-700",children:"Easy"})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(bn,{value:"medium",id:"medium",className:"border border-gray-300 text-yellow-600 focus:ring-2 focus:ring-yellow-200"}),v.jsx(rt,{htmlFor:"medium",className:"text-sm font-medium text-gray-700",children:"Medium"})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(bn,{value:"hard",id:"hard",className:"border border-gray-300 text-red-600 focus:ring-2 focus:ring-red-200"}),v.jsx(rt,{htmlFor:"hard",className:"text-sm font-medium text-gray-700",children:"Hard"})]})]})]}),v.jsxs("div",{className:"space-y-3 p-4 bg-white rounded-lg border border-gray-200 mt-6",children:[v.jsx(rt,{className:"text-sm font-semibold text-gray-700",children:"Cuisine"}),v.jsxs(Qr,{value:h.cuisine||"any",onValueChange:D=>d("cuisine",D==="any"?void 0:D),children:[v.jsx(Hr,{"data-testid":"cuisine-select",className:"border border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20",children:v.jsx(Wr,{placeholder:"Any cuisine"})}),v.jsxs(Xr,{className:"border border-gray-200 shadow-lg",children:[v.jsx(Et,{value:"any",children:"Any cuisine"}),Am.map(D=>v.jsx(Et,{value:D,children:D},D))]})]})]}),v.jsxs("div",{className:"space-y-4 p-4 bg-white rounded-lg border border-gray-200 mt-6",children:[v.jsx(rt,{className:"text-sm font-semibold text-gray-700",children:"Avoid Allergens"}),v.jsx("div",{className:"grid grid-cols-2 gap-3",children:wi.map(D=>v.jsx("button",{type:"button",onClick:()=>p(D.value),className:ke("inline-flex items-center justify-start whitespace-nowrap rounded-md px-3 h-10 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",h.allergies.includes(D.value)?"bg-secondary text-white border-secondary shadow-md":"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),"data-testid":`allergy-${D.value}`,children:D.label},D.value))})]}),v.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border border-gray-200 mt-6",children:[v.jsxs("div",{className:"space-y-1",children:[v.jsx(rt,{className:"text-sm font-semibold text-gray-700",children:"Allow Substitutions"}),v.jsx("p",{className:"text-xs text-gray-600",children:"Allow ingredient substitutions in recipes"})]}),v.jsx(el,{checked:h.allowSubstitutions,onCheckedChange:D=>d("allowSubstitutions",D),"data-testid":"substitutions-switch",className:"data-[state=checked]:bg-green-600"})]})]})})]})})});function Si({icon:t,title:e,description:r,action:s,className:i}){return v.jsx(wt,{className:ke("w-full",i),children:v.jsxs(Rt,{className:"p-8 text-center",children:[v.jsx("div",{className:"text-muted-foreground mb-4",children:t}),v.jsx("h3",{className:"text-lg font-medium mb-2 text-center",children:e}),v.jsx("p",{className:"text-black mb-4",children:r}),s&&v.jsx("div",{className:"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium bg-primary text-primary-foreground h-10 px-4 py-2 mt-2 select-none cursor-default","data-testid":"empty-state-action",children:s.label})]})})}const Rm=R.memo(function({recipe:e,onSave:r,onUseSuggestion:s,onFavorite:i,className:a,priority:o=!1,isFavorited:l=!1}){const[f,h]=R.useState(!1),[c,u]=R.useState(!1),[d,p]=R.useState(l),[C,I]=R.useState(!1),k=U=>{U.preventDefault(),U.stopPropagation(),u(!c),r?.(e.id)},P=U=>{U.preventDefault(),U.stopPropagation(),s?.(e.id)},D=async U=>{if(U.preventDefault(),U.stopPropagation(),!C){I(!0);try{const T=!d,O=T?`/api/recipe/${e.id}/save`:`/api/recipe/${e.id}/unsave`;await Jn.post(O),p(T),i?.(e.id,T),Us({title:T?"Recipe saved!":"Recipe removed from favorites",description:T?"Added to your favorites":"Removed from your favorites"})}catch{Us({title:"Error",description:"Failed to update favorites. Please try again.",variant:"destructive"})}finally{I(!1)}}},E=U=>{switch(U){case"Easy":return"bg-green-100 text-green-800 border-green-200";case"Medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Hard":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=U=>U>=90?"match-badge":U>=70?"bg-yellow-100 text-yellow-800 border-yellow-200":U>=50?"bg-accent/20 text-foreground border-accent/30":"bg-red-100 text-red-800 border-red-200";return v.jsx(wt,{className:ke("group overflow-hidden transition-all duration-300 hover:shadow-lg cursor-pointer recipe-card-vintage",f&&"shadow-lg scale-[1.02]",a),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:v.jsx(zo,{href:`/recipe/${e.id}`,children:v.jsxs("div",{className:"relative",children:[v.jsxs("div",{className:"relative overflow-hidden",children:[e.imageSet?v.jsxs("picture",{children:[v.jsx("source",{media:"(min-width: 1024px)",srcSet:e.imageSet.desktop}),v.jsx("source",{media:"(min-width: 768px)",srcSet:e.imageSet.tablet}),v.jsx("img",{src:e.imageSet.mobile,alt:e.title,width:600,height:400,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105",loading:o?"eager":"lazy"})]}):v.jsx("img",{src:e.image,alt:e.title,width:600,height:400,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105",loading:o?"eager":"lazy"}),v.jsx("div",{className:ke("absolute inset-0 bg-black/20 transition-opacity duration-300 flex items-center justify-center",f?"opacity-100":"opacity-0"),children:v.jsxs("div",{className:"flex gap-2",children:[v.jsxs(De,{size:"sm",variant:"secondary",className:"h-8 px-3",onClick:k,"data-testid":`save-recipe-${e.id}`,children:[v.jsx(ko,{className:ke("h-4 w-4 mr-1",c&&"fill-current")}),c?"Saved":"Save"]}),v.jsxs(De,{size:"sm",variant:d?"default":"secondary",className:"h-8 px-3",onClick:D,disabled:C,"data-testid":`favorite-recipe-${e.id}`,children:[v.jsx(Eo,{className:ke("h-4 w-4 mr-1",d&&"fill-current")}),d?"Favorited":"Favorite"]}),v.jsxs(De,{size:"sm",className:"h-8 px-3",onClick:P,"data-testid":`use-suggestion-${e.id}`,children:[v.jsx(Mo,{className:"h-4 w-4 mr-1"}),"Use This"]})]})}),e.matchPercentage!==void 0&&v.jsx("div",{className:"absolute top-3 left-3",children:v.jsxs(Ve,{className:ke("px-2 py-1 text-xs font-semibold",j(e.matchPercentage)),children:[e.matchPercentage,"% match"]})}),e.isCreative&&v.jsx("div",{className:"absolute top-3 right-3",children:v.jsx(Ve,{className:"px-2 py-1 text-xs font-semibold creative-badge",children:"Creative"})}),e.missingIngredients&&e.missingIngredients.length>0&&v.jsx("div",{className:"absolute bottom-3 right-3",children:v.jsxs(Ve,{className:"px-2 py-1 text-xs missing-ingredient",children:[v.jsx(_i,{className:"h-3 w-3 mr-1"}),e.missingIngredients.length," missing"]})}),e.hasAllIngredients&&v.jsx("div",{className:"absolute bottom-3 right-3",children:v.jsxs(Ve,{className:"px-2 py-1 text-xs all-ingredients",children:[v.jsx(Fo,{className:"h-3 w-3 mr-1"}),"All ingredients"]})})]}),v.jsxs(Rt,{className:"p-4",children:[v.jsxs("div",{className:"mb-3",children:[v.jsx("h3",{className:"recipe-title mb-1 line-clamp-1 group-hover:text-vintage-warm-brown transition-colors",children:e.title}),v.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2",children:e.description})]}),v.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm text-muted-foreground",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx(Ni,{className:"h-4 w-4 mr-1"}),v.jsxs("span",{children:[e.prepTime+e.cookTime,"m"]})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(Oo,{className:"h-4 w-4 mr-1"}),v.jsx("span",{children:e.servings})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx(Ti,{className:"h-4 w-4 mr-1 text-accent fill-current"}),v.jsx("span",{children:e.rating})]})]}),v.jsx(Ve,{className:ke("text-xs px-2 py-1",E(e.difficulty)),children:e.difficulty})]}),v.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.diet&&v.jsx(Ve,{variant:"outline",className:"text-xs",children:e.diet}),e.cuisine&&v.jsx(Ve,{variant:"outline",className:"text-xs",children:e.cuisine}),e.tags.slice(0,2).map(U=>v.jsx(Ve,{variant:"secondary",className:"text-xs",children:U},U))]}),e.missingIngredients&&e.missingIngredients.length>0&&v.jsxs("div",{className:"mb-3",children:[v.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Missing ingredients:"}),v.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.missingIngredients.slice(0,3).map(U=>v.jsxs(Ve,{className:"text-xs px-2 py-0.5 missing-ingredient",children:[v.jsx(dn,{className:"h-2 w-2 mr-1"}),U]},U)),e.missingIngredients.length>3&&v.jsxs(Ve,{variant:"outline",className:"text-xs px-2 py-0.5",children:["+",e.missingIngredients.length-3," more"]})]})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs(De,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300","data-testid":`view-recipe-${e.id}`,children:[v.jsx(Uo,{className:"h-4 w-4 mr-1"}),"View Recipe"]}),v.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.reviewCount," reviews"]})]})]})]})})})});function Dm({className:t}){return v.jsxs(wt,{className:ke("overflow-hidden",t),children:[v.jsx(nt,{className:"w-full h-48"}),v.jsxs(Rt,{className:"p-4",children:[v.jsxs("div",{className:"mb-3",children:[v.jsx(nt,{className:"h-5 w-3/4 mb-2"}),v.jsx(nt,{className:"h-4 w-full mb-1"}),v.jsx(nt,{className:"h-4 w-2/3"})]}),v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(nt,{className:"h-4 w-12"}),v.jsx(nt,{className:"h-4 w-8"}),v.jsx(nt,{className:"h-4 w-10"})]}),v.jsx(nt,{className:"h-5 w-16"})]}),v.jsxs("div",{className:"flex gap-1 mb-3",children:[v.jsx(nt,{className:"h-5 w-16"}),v.jsx(nt,{className:"h-5 w-20"}),v.jsx(nt,{className:"h-5 w-14"})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx(nt,{className:"h-8 w-24"}),v.jsx(nt,{className:"h-4 w-20"})]})]})]})}function jm({count:t=6}){return v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:t}).map((e,r)=>v.jsx(Dm,{},r))})}const km=[{value:"relevance",label:"Best Match",icon:Xt},{value:"time",label:"Quickest",icon:Ni},{value:"rating",label:"Highest Rated",icon:Ti},{value:"popularity",label:"Most Popular",icon:Bo}],Em=R.memo(function({ingredients:e,filters:r,onRecipeSave:s,onUseSuggestion:i,className:a}){const[o,l]=R.useState("relevance"),[f,h]=R.useState("match"),[c,u]=R.useState(!1),d=R.useMemo(()=>{const S=new URLSearchParams;return e.length>0&&S.set("ingredients",e.join(",")),r.diet&&r.diet!=="any"&&S.set("diet",r.diet),r.allergies&&r.allergies.length>0&&S.set("allergies",r.allergies.join(",")),r.maxCookTime&&r.maxCookTime!==60&&S.set("maxCookTime",r.maxCookTime.toString()),r.cuisine&&S.set("cuisine",r.cuisine),r.difficulty&&r.difficulty!=="any"&&S.set("difficulty",r.difficulty),r.allowSubstitutions===!1&&S.set("allowSubstitutions","false"),r.servings&&r.servings!==4&&S.set("servings",r.servings.toString()),S.set("mode",f),S.set("sort",o),S.toString()},[e,r,f,o]),{data:p,isLoading:C,error:I,refetch:k}=Zr({queryKey:["/api/recipes",d],enabled:e.length>0,staleTime:120*1e3}),{data:P,isLoading:D,error:E,refetch:j}=Zr({queryKey:["/api/recipes",d.replace("mode=match","mode=creative")],enabled:!1,staleTime:300*1e3}),U=async S=>{const N=S;if(h(N),N==="creative"&&!P){u(!0);try{await j()}finally{u(!1)}}},T=async()=>{u(!0);try{await j(),h("creative")}finally{u(!1)}},O=S=>{l(S)},b=R.useMemo(()=>{const S=f==="creative"?P?.recipes||[]:p?.recipes||[];switch(o){case"time":return[...S].sort((N,_)=>N.prepTime+N.cookTime-(_.prepTime+_.cookTime));case"rating":return[...S].sort((N,_)=>_.rating-N.rating);case"popularity":return[...S].sort((N,_)=>_.reviewCount-N.reviewCount);default:return[...S].sort((N,_)=>(_.matchPercentage||0)-(N.matchPercentage||0))}},[f,P,p,o]),m=f==="creative"?P:p,x=f==="creative"?D:C,w=f==="creative"?E:I,A=()=>{const S=["Try adding eggs or cheese","Add some fresh vegetables","Include protein like chicken or tofu","Add herbs and spices","Try adding pasta or rice"];return S[Math.floor(Math.random()*S.length)]};return e.length===0?v.jsx(Si,{icon:v.jsx(Xt,{className:"mx-auto h-12 w-12 mb-4 text-primary"}),title:"Start by adding ingredients",description:"Search for ingredients you have and we'll find recipes you can make!",action:{label:"Add ingredients above",onClick:()=>{}},className:a}):w?v.jsx(wt,{className:a,children:v.jsx(Rt,{className:"p-8 text-center",children:v.jsxs("div",{className:"flex flex-col items-center justify-center",children:[v.jsx(Xt,{className:"h-12 w-12 mb-4 text-primary"}),v.jsx("h3",{className:"text-lg font-medium mb-2 text-gray-800",children:"Search failed"}),v.jsx("p",{className:"text-black mb-4",children:"We couldn't find any recipes. Please try again."}),v.jsxs(De,{onClick:()=>k(),children:[v.jsx(Fs,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})})}):v.jsxs("div",{className:ke("space-y-6",a),children:[v.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("h2",{className:"h2 vintage-text-primary",children:f==="creative"?"Creative Recipes":"Matched Recipes"}),m&&v.jsxs(Ve,{variant:"secondary",className:"text-sm",children:[m.total," recipes found"]})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs(Qr,{value:o,onValueChange:O,children:[v.jsx(Hr,{className:"w-40",children:v.jsx(Wr,{})}),v.jsx(Xr,{children:km.map(S=>{const N=S.icon;return v.jsx(Et,{value:S.value,children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(N,{className:"h-4 w-4"}),S.label]})},S.value)})})]}),v.jsx(tl,{value:f,onValueChange:U,className:"w-auto",children:v.jsxs(nl,{children:[v.jsxs(Bs,{value:"match","data-testid":"mode-matched",children:[v.jsx(Xt,{className:"h-4 w-4 mr-1"}),"Matched"]}),v.jsxs(Bs,{value:"creative","data-testid":"mode-creative",children:[v.jsx(Os,{className:"h-4 w-4 mr-1"}),"Creative"]})]})})]})]}),x?v.jsx(jm,{count:6}):b.length>0?v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map((S,N)=>v.jsx(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:N*.2,duration:.8,ease:"easeOut"},children:v.jsx(Rm,{recipe:S,onSave:s,onUseSuggestion:i,priority:N<3})},`${S.id}-${f}`))}):v.jsx(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.8,ease:"easeOut"},children:v.jsx(Si,{icon:v.jsx(Xt,{className:"mx-auto h-12 w-12 mb-4 opacity-50"}),title:"No recipes found",description:`${A()}. Try adjusting your filters or adding more ingredients.`,action:{label:f==="match"?"Generate Creative Recipes":"Clear Filters",onClick:f==="match"?T:()=>{}}})}),c&&v.jsx(wt,{children:v.jsxs(Rt,{className:"p-8 text-center",children:[v.jsxs("div",{className:"flex items-center justify-center gap-3",children:[v.jsx(Fs,{className:"h-5 w-5 animate-spin text-primary"}),v.jsx("span",{className:"text-lg font-medium",children:"Generating creative recipes..."})]}),v.jsx("p",{className:"text-muted-foreground mt-2",children:"Our AI is creating unique recipe combinations for you!"})]})}),f==="creative"&&P&&!c&&v.jsx("div",{className:"text-center",children:v.jsxs(De,{variant:"outline",onClick:T,disabled:c,children:[v.jsx(Os,{className:"mr-2 h-4 w-4"}),"Generate More Creative Recipes"]})})]})});function Jm(){const[t,e]=R.useState([]),[r,s]=R.useState(()=>({diet:"any",allergies:[],maxCookTime:60,cuisine:void 0,difficulty:"any",allowSubstitutions:!0,servings:4})),{toast:i}=Ai(),a=h=>{e(h)},o=h=>{s(h)},l=h=>{i({title:"Recipe saved!",description:"Recipe has been added to your favorites."})},f=h=>{i({title:"Great choice!",description:"Recipe has been added to your meal plan."})};return v.jsx("div",{className:"relative min-h-screen bg-grain bg-background font-sans text-foreground py-12",children:v.jsx("div",{className:"container mx-auto px-6 lg:px-12",children:v.jsxs("div",{className:"max-w-6xl mx-auto",children:[v.jsx(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.8,ease:"easeOut"},children:v.jsxs("div",{className:"text-left mb-12",children:[v.jsx("h1",{className:"font-serif text-4xl lg:text-5xl font-medium tracking-tight text-foreground mb-4",children:"Find Recipes"}),v.jsx("div",{className:"w-12 h-0.5 mb-6",style:{background:"var(--accent-gold)"}}),v.jsx("p",{className:"text-muted-foreground text-left text-lg italic font-serif",children:"Add ingredients you have and discover delicious recipes you can make"})]})}),v.jsx(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.8,ease:"easeOut"},children:v.jsx(wt,{className:"mb-8",children:v.jsx(Rt,{className:"p-6",children:v.jsx(fu,{initialIngredients:t,onChange:a,placeholder:"Search ingredients...",maxItems:15})})})}),v.jsx(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.8,ease:"easeOut"},children:v.jsx("div",{className:"mb-8",children:v.jsx(Im,{onFiltersChange:o})})}),v.jsx(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.8,ease:"easeOut"},children:v.jsx(Em,{ingredients:t.map(h=>h.name),filters:r,onRecipeSave:l,onUseSuggestion:f})})]})})})}export{Jm as default};
